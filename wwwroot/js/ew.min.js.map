{"version":3,"names":["ew$1","$$1","luxon","_interopDefaultLegacy","e","default","ew__default","$__default","luxon__default","DateTime$1","DateTime","Validators","__proto__","userLevelId","el","ew","checkInteger","value","language","phrase","parseInt","userLevelName","id","elId","document","getElementById","name","trim","level","sameText","includes","toLowerCase","required","fieldName","_$el$data","$el","$p","closest","data","substring","css","hasValue","replace","fileRequired","elFn","mismatchPassword","startsWith","elPwd","between","x","z","endsWith","val","toUpperCase","passwordStrength","isMaskedPassword","hasClass","username","raw","match","RegExp","escapeRegExChars","INVALID_USERNAME_CHARACTERS","password","ENCRYPTED_PASSWORD","INVALID_PASSWORD_CHARACTERS","email","getValue","checkEmail","emails","cnt","err","checkEmails","datetime","format","checkDate","time","checkTime","float","checkNumber","range","min","max","checkRange","integer","phone","checkPhone","zip","checkZip","creditCard","checkCreditCard","ssn","checkSsn","guid","checkGuid","regex","pattern","checkByRegEx","url","checkUrl","custom","fn","_len","arguments","length","args","Array","_key","captcha","recaptcha","_grecaptcha","grecaptcha","getResponse","dataset","minDate","minDateTime","formatPattern","HTMLElement","minValue","minFormat","parseDate","Date","fromJSDate","zone","formatDateTime","DATE_FORMAT","TIME_FORMAT","maxDate","maxDateTime","maxValue","maxFormat","parseNumber","_typeof","obj","Symbol","iterator","constructor","prototype","_toPropertyKey","arg","key","input","hint","prim","toPrimitive","undefined","res","call","TypeError","String","Number","_toPrimitive","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","Constructor","protoProps","staticProps","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","setPrototypeOf","bind","_inheritsLoose","subClass","superClass","create","_defineProperty","batchSettings","type","contentType","processData","dataType","toJSON","JSON","stringify","parse","batchSetup","options","extend","Batch","batch","func","this","parent","ajaxSetup","_batch","requests","add","_func$name","clear","send","instance","success","parentSuccess","status","xhr","map","request","settings","childSuccess","statusText","_deliver","ajax","_addRequest","push","_responses$error","_responses$error2","responses","error","description","alert","each","response","_request$settings$com","_request$settings$suc","complete","$ajax","FormBase","pageId","$self","_initiated","element","$element","htmlForm","initSearchPanel","modified","emptyRow","multiPage","autoSuggests","lists","formKeyCountName","submitWithFetch","enableOnInit","filterList","disableForm","body","style","cursor","form","getForm","elements","filter","prop","addClass","trigger","enableForm","$elements","removeClass","not","appendHidden","$form","$dp","attr","find","ar","serializeArray","forEach","appendTo","canSubmit","async","_await$this$validate","_this$validate","updateTextArea","validate","$dps","dp","j","test","$els","result","evt","Event","originalEvent","isDefaultPrevented","isObject","submit","_e$originalEvent","_e$originalEvent$subm","formAction","submitter","parseUrl","pathname","setAttribute","getAttribute","method","serialize","fetch","finally","getList","_this$getElement","_this$getElement$data","field","getElement","compileTemplates","values","list","template","isString","templates","getOptionTemplate","_this$element","_this$element2","tagName","getElements","fixId","multiple","rowindex","t","split","prefix","isNumber","updateList","immediate","_Object$entries$find","entries","entry","parents","parentFields","slice","lookupOptions","updateOptions","getOptionValues","updateLists","_form$querySelector","isUndefined","querySelector","selector","_ref","join","_ref2","isArray","deferreds","batchSize","ajaxBatchSize","b","splice","getApiUrl","API_LOOKUP_ACTION","when","then","source","fail","console","log","always","createAutoSuggest","assign","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","index","later","AJAX_DELAY","upload","setupFilters","filters","$sf","toggleClass","$df","$delete","$save","saveFilters","CLIENT_SEARCH_FILTER","localStorage","setItem","PROJECT_NAME","SERVER_SEARCH_FILTER","currentPage","done","_result$","off","on","prompt","html","sanitize","prevAll","remove","next","$submenu","insertBefore","cmd","refresh","setLayout","append","one","init","hasFormData","text","hide","render","loadjs","ready","setTimeout","is","$tab","$panel","$container","width","CONFIRM_CANCEL","href","window","location","from","matches","forms","beforeSend","before","Field","fldvar","validators","invalid","validator","addValidator","_proto","addError","_this$_error","_error","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","resetInvalid","_this$_element","_this$_element$classL","_this$_element$closes","_this$_element$closes2","classList","contains","server","fieldContainerSelector","innerHTML","errorMessage","_this$_element$closes3","feedback","setInvalid","focus","setFocus","canFocus","_el$style","_el$classList","hidden","readonly","disabled","display","get","_checkbox","checked","set","_this$_element2","_this$_element2$id","activeElement","Form","_FormBase","_this","tryFocus","addField","fields","getField","addFields","apply","addCustomError","rowIndex","setFieldElement","delay","makeVisible","focusDelay","preventScroll","autoFocusPreventScroll","_focused","_this$_error2","getFocusable","getFieldElements","autoFocus","detailpage","querySelectorAll","_ew$forms$get","TABLE_BASIC_SEARCH","gotoPageByElement","$pane","validateFields","getCurrentRowIndex","row","_form$querySelector2","_e$currentTarget","validateRequired","updateSelected","addcnt","inlineAdd","action","currentTarget","keycnt","keyCount","gridinsert","rowcnt","_await$this$customVal","_this$customValidate","customValidate","returnFocus","detailpages","_await$frm$validate","frm","_this$getForm$dataset","getFieldValue","_ew$forms$get2","some","_this$getForm$querySe","FormBuilder","setId","setPageId","setLists","setQueryBuilderLists","autoFillTargetFields","childFields","filterFieldVars","filterFields","addList","setFields","setValidate","setCustomValidate","setValidateRequired","setSubmit","setFormKeyCountName","setEmptyRow","setMultiPage","setSubmitWithFetch","setFilterList","setInitSearchPanel","setEnableOnInit","build","MultiPage","context","AjaxLookup","_this$list$parentFiel","_this$list$parentFiel2","elementId","formElement","m","pf","debounce","recordCount","formatResult","opt","isAutoSuggest","jsRenderHelpers","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","getOptionValue","getUrl","query","start","params","URLSearchParams","q","n","rnd","random","toString","prepare","transform","results","totalRecordCount","records","toSelect2Data","every","item","hasOwnProperty","Set","gf","group","children","lf","df","df2","df3","df4","_isAutoSuggest","_AjaxLookup","$input","minWidth","maxHeight","highlight","minLength","classNames","forceSelection","forceSelect","lineHeight","paddingY","lookupAllDisplayFields","d","setValue","ta","isOpen","menu","empty","$item","getActiveSelectable","typeahead","close","timer","loadingMore","tpl","suggestion","footer","syncResults","asyncResults","cancel","getSyncResults","Infinity","$menu","$node","$dataset","suggestionHeight","outerHeight","suggestions","rendered","count","h","scrollTop","toggle","loadingMoreTimer","_loadingMoreTimer","$footer","_loadingMoreTimer2","offset","top","getMore","v","findIndex","option","selected","SelectionListOption","datasets","_append","Forms","_ew$getForm","_forms","f","ids","keys","lang","Select2Language","errorLoading","inputTooLong","overChars","maximum","inputTooShort","remainingChars","minimum","maximumSelected","noResults","searching","removeAllItems","removeItem","search","Utils$3","select2","amd","require","_defined","Select2ResultsDecorator","decorated","$results","displayMessage","escapeMarkup","hideLoading","$message","message","className","sort","cols","len","$row","last","$option","pagination","more","createElement","c","attrs","role","Element","msMatchesSelector","webkitMatchesSelector","_resultId","title","StoreData","Utils$2","ModalResults","container","_container$listeners$","listeners","pop","$highlighted","getHighlightedResults","GetData","_mousedown","$this","ModalSearch","$search","removeAttr","KEYS","$","PRINT_SCREEN","DropdownSearchDecorator","handleSearch","which","TAB","SHIFT","CTRL","ALT","_keyUpPrevented","term","Select2AttachBody","_AttachBody","_attachPositioningHandler","events","handler","_positionDropdown","_resizeDropdown","_detachPositioningHandler","_showDropdown","$dropdownContainer","$dropdownParent","_popper","Popper","createPopper","placement","IS_RTL","modifiers","enabled","_this$_popper2","update","_this$_popper3","ModalAttachBody","_bindContainerResultHandlers","stopPropagation","position","$dropdown","_containerResultsHandlersBound","$modal","_self$$search$","_updateDropdown","_e$originalEvent2","detach","end","oldValue","modal","event","draggable","FilterAttachBody","_hideDropdown","_this$_popper","outerWidth","_dropdownButton$close","contents","clone","triggerHandler","selection","_handleClear","$filterDropdown","dropdownButton","reference","DropdownAttachBody","_defined$1","AllowClear$1","Utils$1","FilterAllowClear","_AllowClear","_","isDisabled","$clear","$selection","previousVal","placeholder","unselectData","prevented","Select2MultipleSelectionDecorator","Select2DataAdapterDecorator","_data$element","ResultsList","SingleSelection","MultipleSelection","Placeholder","AllowClear","SelectionSearch","EventRelay","Utils","Translation","SelectData","ArrayData","AjaxData","Tags","Tokenizer","MinimumInputLength","MaximumInputLength","MaximumSelectionLength","Dropdown","DropdownSearch","HidePlaceholder","InfiniteScroll","MinimumResultsForSearch","SelectOnClose","CloseOnSelect","DropdownCSS","TagsSearchHighlight","Defaults","defaults","dataAdapter","Decorate","minimumInputLength","maximumInputLength","maximumSelectionLength","tags","tokenSeparators","tokenizer","resultsAdapter","columns","customOption","iconClass","templateResult","selectOptions","_templateResult","loading","selectOnClose","dropdownAdapter","minimumResultsForSearch","closeOnSelect","dropdownCssClass","dropdown","selectionAdapter","allowClear","translations","dir","currentUrl","URL","$document$1","$body","initIcons","_e$target","tooltipOptions","IS_MOBILE","tooltip","_bootstrap$Tooltip$ge","bootstrap","Tooltip","getInstance","initPasswordOptions","_e$target2","pStrength","MIN_PASSWORD_STRENGTH","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","pct","valid","setValid","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","PATH_BASE","API_URL","qs","route","encodeURIComponent","_pathname","_hash","hash","searchParams","createSearchParams","getSearchParams","setSearchParams","mergeSearchParams","buildUrl","_len2","_key2","has","setSearchParam","deleteSearchParam","_len3","names","_key3","delete","PAGE_LAYOUT","sanitizeUrl","decodeURIComponent","initExportLinks","_e$target3","fileDownload","getchartParams","preventDefault","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","initMultiSelectCheckboxes","_e$target4","$cbs","_update","getError","_result$error","_result$error2","failureMessage","isHtml","API_EXPORT_ACTION","swal","Swal","fire","sweetAlertSettings","showConfirmButton","allowOutsideClick","allowEscapeKey","willOpen","showLoading","_fetch","ct","headers","_getError","json","blob","createObjectURL","Blob","a","cd","download","appendChild","click","objectUrl","revokeObjectURL","catch","lazyLoad","_e$target5","LAZY_LOAD","img","LAZY_LOAD_DELAY","src","initLightboxes","_e$target6","USE_COLORBOX","lightboxSettings","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","_e$target7","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","_e$target8","popover","popoverOptions","parseJson","searchOperatorChange","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isEmptyOpr","isEmptyOpr2","hideOpr2","hideX","hideY","initForms","_e$target9","isFunction$2","_alert","cb","config","confirmButtonText","customClass","htmlContainer","show","isConfirmed","_prompt","cfg","_config","showCancelButton","cancelButtonText","inputValidator","toast","toastOptions","Toasts","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","parentId","change","_obj","_batch$send","els","getId","isTextbox","isFilter","$elf","typ","elf","_updateOptions","autoFill","fo","frmo","arp","$obj","arr","clearOptions","addOpt","newOption","selectOption","_updateSibling","isBoolean","ds","isNativeSelectOne","isModalLookup","MULTIPLE_OPTION_SEPARATOR","jqXHR","textStatus","errorThrown","root","exportCustom","divId","exportType","tblVar","_div$children$","div","customexport","exportEmail","convertToBool","charts","exportCharts","chart","chartEngine","streamType","stream","toBase64Image","fileName","_export","export","exportSelected","emailForm","keySelected","postParams","_document$querySelect","$iframe","isHiddenTextArea","_el$dataset","modalLookup","_el$dataset2","isSelect2","isBooleanCheckbox","isHidden","reset","once","MOBILE_DETECT","version","scrollIntoView","_OverlayScrollbars","OverlayScrollbars","scroll","selectAll","clearSelected","tbl","rowIndexes","r","rows","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","HTMLTableElement","$tbl","$rows","isset","tBodies","$target","cells","parentsUntil","RESPONSIVE_TABLE_CLASS","cell","rowSpan","clientHeight","offsetHeight","attach","$r","setupGrid","grid","$grid","htmlDecode","$root","selectors","getFieldSelector","table","s1","s2","flatMap","tag","sel","eq","getAncestorBy","node","parentNode","_node","nodeType","o1","o2","headerCase","str","charAt","samePath","p1","p2","ar1","ar2","LIST_ACTION","VIEW_ACTION","EDIT_ACTION","isValue","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","reduce","optionHtml","OPTION_HTML_TEMPLATE","addOption","_obj$querySelector","optGroup","g","label","_obj$dataset","_forms$get$getList","_forms$get$getList$pa","_obj$options$","selectedIndex","opts","autoselect","_init$headers","_init$headers$get","Headers","isApi","API_JWT_TOKEN","IS_WINDOWS_AUTHENTICATION","API_JWT_AUTHORIZATION_HEADER","_ajaxStop","lastPageSubmit","executeScript","replaceAll","matchAll","createRange","createContextualFragment","s","addScript","stripScript","scr","HTMLScriptElement","removeScript","getContent","keepScripts","_m$","$content","getOptions","modalDialogHide","$dlg","removeData","showing","reload","dest_array","destEl","v0","pid","post","$tt","trig","Popover","content","wd","_getTipElement","initSearchFilters","_e$target11","btn","IS_LOGGEDIN","IS_SYS_ADMIN","CURRENT_USER_NAME","_frm$filterList$filte","_frm$filterList","formId","getItem","_ref3","_ref4","copyToClipboard","_source","_source2","innerText","left","select","execCommand","removeChild","object_value","showMessage","_arg$target","doc","$div","$alert","$heading","w","$toast","Math","floor","Pace","_forms$get","ajaxSend","jqxhr","allowed","hostname","setRequestHeader","ajaxStart","ajaxStop","ajaxError","Interval","dt","fromSQL","fromSeconds","toFormat","locale","numberingSystem","getNumberingSystem","parseDateTime","fromFormat","redirect","_ew$vars","newUrl","vars","login","protocol","host","isMediumScreen","matchMedia","screenMediaQuery","promise","$overlay","overlayTemplate","Response","validation","warningMessage","successMessage","$html","unshift","history","pushState","$old","$new","$tmpl","$searchType","TABLE_BASIC_SEARCH_TYPE","replaceWith","initPage","_bootstrap$Tooltip$ge7","_fixLayoutHeightTimer","functions","Select2Utils","Select2Defaults","createSelect","selectId","lookup","processResults","_data$records$length","_data$records","transport","failure","$select","_$$data$$dropdown$fin","createModalLookup","_data$records$length2","_data$records2","_$$data$$dropdown$fin2","createFilter","_data$records$length3","_data$records3","_$$data$$dropdown$fin3","getSearchParam","setSessionTimer","timeoutTime","keepAliveTimer","counter","useKeepAlive","SESSION_KEEP_ALIVE_INTERVAL","IS_AUTOLOGIN","keepAlive","API_SESSION_ACTION","token","resetTimer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","timeout","timerInterval","timerProgressBar","setInterval","getHtmlContainer","sec","timeleft","round","getTimerLeft","textContent","willClose","clearInterval","setTimer","dismiss","DismissReason","TIMEOUT_URL","keepAliveInterval","updateDropdownPosition","prev","isFunction","setSearchType","searchType","phraseId","getQueryBuilderFilterInput","rule","_document$getElementB","_document$getElementB2","_span$innerHTML$repla","fldVar","tmplId","span","cloneNode","queryBuilderErrorClass","$0","$1","$2","getQueryBuilderValueSetter","getQueryBuilderFilterValidation","callback","$value","errors","operator","nb_inputs","$invalid","applyTemplate","classId","isModal","_parent$querySelector","subtmpl","rowspan","childNodes","views","hasTag","jsRenderAttributes","scripts","tmpl","toggleGroup","idx","valueChanged","fobj","infix","fld","bool","oldEl","fnEl","setLanguage","submitAction","_window$msg","isPostBack","isMultiple","_success","_submit","isDismissed","removeSpaces","clearError","jquery","sortUrl","sortType","shiftKey","ctrlKey","ctrl","inlineAction","_args$evt","$btn","$detached","ewAction","$record","curindex","_fail","_always","_deleted","_disableInlineButtons","_enableInlineButtons","_getTable","_updateRowIndexes","$data","inline","rowtype","Promise","resolve","prepend","_submitSuccess","$main","ROWTYPE_VIEW","ROWTYPE_ADD","returnUrl","_$grid$data","modalDialogShow","confirmDelete","selectAllKeys","selectKey","chk","addGridRow","_bootstrap$Tooltip$ge2","$tpl","$lastrow","suffix","$keycnt","FORM_KEY_COUNT_NAME","FORM_ROW_ACTION_NAME","attributes","dispose","after","scrollHeight","deleteGridRow","_bootstrap$Tooltip$ge3","rowidx","_delete","$keyact","htmlEncode","sameString","optionsHtml","MAX_OPTION_COUNT","enable2FA","TWO_FACTOR_AUTHENTICATION_TYPE","API_2FA_ACTION","API_2FA_SHOW","_result$error4","imageUrl","showLoaderOnConfirm","isLoading","getConfirmButton","disableInput","getImage","onload","enableInput","getInput","preConfirm","API_2FA_VERIFY","showValidationMessage","_result$error3","_result$error7","inputValue","account","API_2FA_SEND_OTP","_result$error5","_result$error6","disable2FA","API_2FA_RESET","_result$error8","_result$error9","sendOTP","_result$error10","_result$error11","showBackupCodes","showDenyButton","showLoaderOnDeny","denyButtonText","denyButton","disableButtons","API_2FA_BACKUP_CODES","codes","enableButtons","preDeny","getDenyButton","API_2FA_NEW_BACKUP_CODES","addOptionDialogShow","_args$evt2","lnk","addOptionDialog","_results","objName","API_OBJECT_NAME","re","linkField","dfs","displayFields","ffs","pfs","lfv","ff","txt","obj2","_results2","_results3","API_ADD_ACTION","nodeName","_args$evt3","_bootstrap$Tooltip$ge4","_args$evt4","_args$evt4$currentTar","_args$evt5","_args$evt5$currentTar","_$dlg$data","_$dlg$data2","modalDialog","size","_caption","$lnk","caption","_hide","handleResult","_current","view","_createButtons","_button","_return","_resp$headers$get","resp","isJson","hasErrors","lnkData","$dlglnk","stopImmediatePropagation","Modal","_focustrap","__handleFocusin","_handleFocusin","_e$target10","Accept","importDialogShow","_args$evt6","_bootstrap$Tooltip$ge5","importDialog","sse","$dropzone","$bd","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","scnt","successCount","fcnt","failCount","filename","file","addRow","_index","initialized","Tabulator","autoColumns","autoColumnsDefinitions","definitions","column","headerSort","resizable","visible","headerSortTristate","formatter","textOverflow","getRow","getData","importTabulatorOptions","importComplete","_sse","fileResults","files","fileResult","rollbacked","IMPORT_MAX_FAILURES","saveImport","importFail","_sse2","_table2","clearData","API_ACTION_NAME","API_IMPORT_ACTION","API_FILE_TOKEN_NAME","EventSource","addEventListener","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXTENSIONS","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","dropZone","messages","maxFileSize","maxNumberOfFiles","minFileSize","SESSION_ID","_data$result","_data$result$files","importfiles","ok","filetoken","_table","importFiles","processfail","progressall","loaded","total","uploadProgress","hdr","_this$querySelector","_table3","_table4","removeAttribute","emailDialogShow","emailDialog","_e$target$querySelect","_$$closest$find$data","MAX_EMAIL_RECIPIENT","showDrillDown","pos","spinnerTemplate","draggableOptions","boundary","cache","$tip","responseText","_result$error12","_result$error13","setContent","_convert","API_LIST_ACTION","API_VIEW_ACTION","API_DELETE_ACTION","responseJSON","toggleSearchOperator","toggleLayout","_bootstrap$Tooltip$ge6","layout","DECIMAL_SEPARATOR","min_value","max_value","creditcard_string","tempdigit","doubledigit","checkdigit","email_cnt","arEmails","nid","$ft","$fn","$fa","$label","_confirmDelete","confirm","uploadUrl","API_JQUERY_UPLOAD_ACTION","_downloadTemplate","_uploadTemplate","formData","session","deepAssign","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","uploadOptions","MULTIPLE_UPLOAD_SEPARATOR","fid","indexOf","_data$files","l","_data$files2","_data$result2","_data$result2$files","_data$files3","getLocaleFromPlatform","NUMBERING_SYSTEM","numeralSystem","delimiters","thousands","GROUPING_SEPARATOR","decimal","Intl","NumberFormat","resolvedOptions","formatTimeSpan","allDay","to","isValid","equals","startOf","minus","interval","days","isInteger","parseTime","formatCurrency","CURRENCY_FORMAT","formats","currency","CURRENCY_SYMBOL","formatNumber","NUMBER_FORMAT","formatPercent","PERCENT_FORMAT","_e$target12","$tables","initPanels","renderJsTemplates","_localStorage$getItem","inputs","$rpt","mh","USE_JAVASCRIPT_MESSAGE","togglePassword","$i","updateChart","$debug","isMobile","isDark","fixLayoutHeight","addEventHandlers","fullCalendar$1","fullCalendar","calendar","updateTable","eventFields","addUrl","viewUrl","editUrl","deleteUrl","copyUrl","fullCalendarOptions","eventPopoverOptions","processJson","convertValue","_calendar$getEventByI","getEventById","addEvent","curEvent","groupId","setStart","setEnd","setAllDay","setExtendedProp","setProp","processEvent","info","relatedEvents","apiAction","API_EDIT_ACTION","processRequest","revert","reject","toPlainObject","collapseExtendedProps","toISOString","apiUrl","getFldParm","currentTable","urlAddId","addEventDialogShow","startStr","endStr","startFld","endFld","viewEventDialogShow","customButtons","headerToolbar","bsDropdown","getOrCreatePopover","Default","getOrCreateInstance","seq","shift","_Array$from$find$repl","_Array$from$find","popoverClass","_templateFactory","generateGetBoundingClientRect","y","rect","getBoundingClientRect","jsEvent","offsetX","offsetY","height","right","bottom","virtualElement","useContextMenu","bsToggle","clearMenus","_menu","eventId","editEventDialogShow","deleteEvent","drop","draggedEl","eventReceive","eventDragStart","_bootstrap$Popover$ge","eventDrop","eventResize","eventClick","_bootstrap$Popover$ge2","button","open","usePopover","_getOrCreatePopover","showViewPageOnEventClick","eventMouseEnter","_bsDropdown","_getOrCreatePopover2","_isShown","eventMouseLeave","_bsDropdown2","_bootstrap$Popover$ge3","FullCalendar","Calendar","isPushNotificationSupported","navigator","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","charCodeAt","sendSubscriptionToServer","subscription","getKey","contentEncoding","PushManager","supportedContentEncodings","FormData","endpoint","btoa","fromCharCode","createSubscription","API_PUSH_NOTIFICATION_ACTION","API_PUSH_NOTIFICATION_SUBSCRIBE","serviceWorkerReg","serviceWorker","pushManager","subscribe","userVisibleOnly","applicationServerKey","PUSH_SERVER_PUBLIC_KEY","getSubscription","setSubscription","inst","subscribeNotification","Notification","permission","_await$getSubscriptio","requestPermission","checkSubscription","unsubscribeNotification","unsubscribe","API_PUSH_NOTIFICATION_DELETE","SERVICE_WORKER","register","scope","webpush","pushNotificationDialogShow","pushDialog","successes","acc","cur","failures","inited","latlng","useSingleMap","showAllMarkers","useMarkerClusterer","ext","maps","singleMapHeight","singleMapWidth","showMapOnTop","createMap","createBounds","createMarkerClusterer","marker","createMarker","fitBounds","promises","address","geocodingDelay","geocode","latitude","longitude","isNaN","createLatLng","all","MobileDetect","userAgent","mobile","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","pageShow","gotoPage","$page","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","google","setCenter","$bodies","$document","debugMode","DEBUG","animate","panel","Collapse","actions","_this$form","pageSize","zIndex","blueimp","processQueue","fileTypes","cropperOptions","cropperCanvasOptions","widget","processActions","cropImage","dfd","Deferred","that","cropperDialog","Cropper","getCroppedCanvas","toBlob","File","resolveWith","rejectWith","isFinite","isDate","periodic","clearTimeout","rec","_this$data","_this$data2","toNumber","toDate","_ew$vars$tables","_ew$vars$tables$table","_ew$vars$tables$table2","_ew$vars$tables$table3","tables","clientFormatPattern","toJsDate","toJSDate","mutationList","mutation","MutationObserver","observe","_parent","attributeFilter","attributeOldValue","subtree","isNil$1","isFunction$1","isNaNNumber$1","isFiniteNumber$1","multiplyByPowerOfTen$1","number","powerOfTenExponent","NaN","numAsString","indexOfE","log10$1","numberThatIsPowerOfTen","LOG10E","toObject$1","entriesResolver","object","escapeRegexString$1","string","memoize$1","cacheKey","powerOf10LookupObject","currentValue","additionalZeros","isPowerOfTen$1","toBase","valueUnit","unitScale","base","scale","toBaseMultiplier","convertUnit","originUnit","targetUnit","valueAsBase","resolvedScale","conversionFactorFromBase","unitScaleDefinition","unit","convert","toBest","exclude","cutOffNumber","best","scaleUnit","absoluteResult","abs","scaleDefinition","stringRepeat$1","createUnitScaleFromLocaleAbbreviations$1","scaleItem","scaleItemIndex","formattedStringToNumber$1","inputString","_a","stringOriginal","stringWithLatinDigits","numericStringWithExtraInfo","numeralSystemMap","numericStringLength","numeralSystemToLatinSystemMap","digit","digitIndex","output","numericStringIndex","char","replaceNumeralSystemWithLatinNumbers","zeroFormat","nullFormat","decimalDelimiterFromLocale","stringWithDotDecimalDelimiter","abbreviationScalingFactor","abbreviations","abbreviationsSortedByLengthDesc","abbreviation","scapedAbbreviationForRegex","regexp","getScalingFactorFromAbbreviations","negativeFactor","numberAsString","locale$1","code","ordinal","merge","newObject","argsLength","isObject$1","isString$1","truncateNumber$1","ceil","getPatternParts","patternMask","isInEscapedPart","currentEscapedWord","parts","escaped","patternIncludes","patternRemoveEscapedText","patternReplace","searchValue","replaceValue","stringIncludes$1","signRule$1","patternWithoutEscapedText","negativeParentheses","forceSign","outputPatternMask","abbreviationRule$1","compactUnit","compact","abbreviationRegExpResult","compactAuto","splitStringInTwoParts$1","separator","indexOfSearchChar","countChars","stringChar","decimalPlacesRule$1","patternPrecisionPart","minimumFractionDigits","maximumFractionDigits","trimmedPatternPrecisionPart","patternPrecisionPartWithoutClosingBracket","precisionSplitted","fractionDigits","optionalDecimalPlacesRule$1","optionalFractionDigits","parsePattern$1","inputPattern","resolvedInputPattern","patternMaskAfterSignRule","signRules","patternMaskAfterAbbreviationRule","abbreviationRules","patternMaskAfterOptionalDecimalPlacesRule","optionalDecimalPlacesRules","outputPatternMaskWithoutEscapedText","decimalPlacesRules","minimumIntegerDigits","patternMaskIntegerPart","minimumIntegerDigitsRule","grouping","patternMaskAfterHandlingNumberPosition","numberPositionRule","patternMaskWithEnsuredSignPosition","addSignPositionIfItDoesNotExists","removeSignIfExists$1","valueAsString","rescaleRoundedValue$1","currentAbbreviationScale","patternRules","newScaledValue","newScaledValueUnit","scaleValueWithAbbreviation$1","forcedAbbreviationUnit","abbreviationsFromLocale","targetPowerOfTenExponent","k","scaleDefinitionFromLocale","closestPowerOfTenWithAvailableAbbreviation","distanceFromTarget","resolveForcedAbbreviationUnit","scaledValue","localizedUnit","roundNumber$1","precision","roundingFunction","resolvedPrecision","roundedScaledValue","numberToNonExponentialString$1","significand","exponent","exponentAsNumber","integerPartOfSignificand","fractionalPartOfSignificand","numberOfZerosToAdd","formatPositiveExponentResult","significandAsString","negativeExponentAbsoluteValue","outputIntegerPartOfSignificand","outputFractionalPartOfSignificand","firstCharInIntegerPart","formatNegativeExponentResult","numberToFixed$1","finiteNumber","fractionalPartOfValueAsString","targetFractionDigitsAmount","roundedValue","integerPart","fractionalPart","addTrailingZerosInFractionalPart","roundValueAndAddTrailingZeros$1","rounding","resolvedRoundingFunction","replaceDigitsWithNumeralSystem$1","numericString","addOrRemoveLeadingZerosToValue$1","valueIntegerPartWithoutSign","addSignInfoToFullFormattedNumber$1","fullFormattedValueWithoutSign","isValueNegative","isValueZero","splitNumberIntegerAndDecimalParts$1","decimalPart","addThousandsSeparatorToValueIntegerPart$1","valueIntegerPartWithLeadingZerosAndWithoutSign","digitGroupingStyle","thousandsSeparator","restDigitGrouping","groupingSubIteration","applyAbbreviationLocalizedUnitToPatternMask$1","abbreviationLocalizedUnit","hasAbbreviationInPatternMask","numberToFormattedNumber$1","resolvedValue","localizedAbbreviationUnit","scaledValueLocalizedUnit","rescaledValue","rescaledValueLocalizedUnit","scaleAndRoundValue","signedZero","valueAsStringWithoutSign","valueIntegerPartWithLeadingZeros","valueIntegerPartWithThousandsSeparator","numeralSystemFromLocale","integerPartWithNumeralSystem","decimalPartWithNumeralSystem","fullNumberWithNumeralSystem","patternMaskWithNumber","cleanPatternMask","bpsFormatter$1","regexps","unformat","patternWithEscapedBPS","timeFormatter$1","absoluteValue","sign","hours","minutes","seconds","isNegative","timeArray","reverse","decimalSuffixes","binarySuffixes","unformatRegex","concat","bytesDecimalScale","unitIndex","pow","bytesBinaryScale","currencySymbolsMap","EUR","USD","XCD","AUD","INR","BRL","CAD","XAF","CNY","NZD","XPF","GBP","HKD","ILS","JPY","KRW","XOF","MXN","TWD","VND","BUILT_IN_FORMATTERS$1","hasNotScalePercentageSymbolInPattern","scalePercentage","patternWithEscapedPercentage","currencyFromOptions","localizedCurrencySymbol","patternWithEscapedCurrencySymbol","_b","localizedOrdinal","patternWithEscapedOrdinal","scaledValueUnit","patternWithEscapedBytes","exponential","toExponential","patternWithoutExponential","roundHalfAwayFromZero$1","resolveFormatOptions$1","formatOptions","_c","roundingOption","resolveRoundingOption","resolvedLocale","optionsLocale","defaultLocale","resolveOptionsLocale","resolvedFormatters","optionsFormatters","formatters","defaultPattern","nanFormat","nonBreakingSpace","parse$1$1","inputStringWithNormalSpaces","unformatFunctionFromFormatters","matcher","getUnformatFunctionIfMatch","parse$1","round$1","format$1$1","parseFloat","resolvedPattern","resolvedValueAsNumber","formatFunctionFromFormatters","getFormatFunctionIfMatch","_errorFormat","arg2","arg3","withOptions","baseOptions","optionsFromArguments","unique$1","rtlCharsRanges","rtlDirCheck","appendLeftToRightMarkIfIsRTL","isRTL","languagesWith4DigitsGroupingStyle","getAbbreviations","languageTag","digits","intlFormatOptions","notation","useGrouping","compactDisplay","digitOfZero","digitOfOne","digitOfTwo","abbreviationResultForOne","toLocaleString","abbreviationResultForTwo","abbreviationOne","abbreviationTwo","resultIndex","_err","getLocaleFromPlatform$1$1","resolvedLanguageTag","localizedNumber","lookupObject","repeatedChar","digitsAsArray","getNumeralSystemDigits","resolvedDigits","localizedNumberWithoutDigits","groupingDelimiter","fractionDelimiter","getGroupingAndFractionDelimiters","groupingStyle","subIterationIndex","digitOrGroupingDelimiter","getGroupingStyle","shortAbbreviations","_abbreviationsLong","numerable","jQuery"],"sources":["dist/js/ew.js"],"sourcesContent":["/*!\n * JavaScript for ASP.NET \n * \n */\n(function (ew$1, $$1, luxon) {\n  'use strict';\n\n  var _interopDefaultLegacy = e => e && typeof e === 'object' && 'default' in e ? e : { default: e };\n\n  var ew__default = /*#__PURE__*/_interopDefaultLegacy(ew$1);\n  var $__default = /*#__PURE__*/_interopDefaultLegacy($$1);\n  var luxon__default = /*#__PURE__*/_interopDefaultLegacy(luxon);\n\n  function MultiPage(formid) {\r\n    var self = this;\r\n    this.$form = null;\r\n    this.formID = formid;\r\n    this.pageIndex = 1;\r\n    this.maxPageIndex = 0;\r\n    this.minPageIndex = 0;\r\n    this.pageIndexes = [];\r\n    this.$pages = null;\r\n    this.$collapses = null;\r\n    this.isTab = false; // Is tabs\r\n    this.isCollapse = false; // Is collapses (accordion)\r\n    this.lastPageSubmit = false; // Enable submit button for the last page only\r\n    this.hideDisabledButton = false; // Hide disabled submit button\r\n    this.hideInactivePages = false; // Hide inactive pages\r\n    this.lockTabs = false; // Set inactive tabs as disabled\r\n    this.hideTabs = false; // Hide all tabs\r\n    this.showPagerTop = false; // Show pager at top\r\n    this.showPagerBottom = false; // Show pager at bottom\r\n    this.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><i class=\"fa-solid fa-angle-left\"></i> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <i class=\"fa-solid fa-angle-right\"></i></a></li></ul></nav>'; // Pager template\r\n\r\n    // \"show\" handler (for disabled tabs)\r\n    var _show = function (e) {\r\n      e.preventDefault();\r\n    };\r\n\r\n    // Set properties\r\n    var _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\", \"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n    this.set = function () {\r\n      if (arguments.length == 1 && $__default.default.isObject(arguments[0])) {\r\n        var obj = arguments[0];\r\n        for (var i in obj) {\r\n          var p = i[0].toLowerCase() + i.substring(1); // Camel case\r\n          if (_properties.includes(p)) this[p] = obj[i];\r\n        }\r\n      }\r\n    };\r\n\r\n    // DOM loaded\r\n    this.init = function () {\r\n      var tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n      if (this.isTab) {\r\n        if (this.showPagerTop) this.$pages.closest(\".ew-nav\").before(tpl);\r\n        if (this.showPagerBottom) this.$pages.closest(\".ew-nav\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().prev(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().next(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        if (this.hideTabs) this.$form.find(\".ew-multi-page > .ew-nav > .nav-tabs\").hide();\r\n      } else if (this.isCollapse) {\r\n        if (this.showPagerTop) this.$collapses.closest(\".ew-accordion\").before(tpl);\r\n        if (this.showPagerBottom) this.$collapses.closest(\".ew-accordion\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").prev(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").next(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n      }\r\n      this.pageShow();\r\n    };\r\n\r\n    // Page show\r\n    this.pageShow = function () {\r\n      if (this.isTab) {\r\n        if (this.lockTabs) this.$pages.on(\"show.bs.tab\", _show);\r\n        this.$pages.each(function () {\r\n          var $this = $__default.default(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n          if (self.lockTabs) $this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n        });\r\n      } else if (this.isCollapse) {\r\n        this.$pages.closest(\".accordion-item\").each(function () {\r\n          var $this = $__default.default(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n        });\r\n      }\r\n      var disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n      var $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n      $__default.default(\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n      disabled = this.pageIndex <= this.minPageIndex;\r\n      this.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n      disabled = this.pageIndex >= this.maxPageIndex;\r\n      this.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n    };\r\n\r\n    // Go to page by index\r\n    this.gotoPage = function (i) {\r\n      if (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex) return;\r\n      if (this.pageIndex != i) {\r\n        var $page = this.$pages.eq(i - 1);\r\n        if (this.isTab) {\r\n          if ($page.is(\":not(.d-none):not(.disabled)\")) $page.click();else $page.parent().next(\":has([data-bs-toggle=tab]):not(.d-none):not(.disabled)\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n        } else if (this.isCollapse) {\r\n          var $p = $page.closest(\".accordion-item\");\r\n          if ($p.is(\":not(.d-none)\")) $page.click();else $p.next(\":has([data-bs-toggle=collapse]):not(.d-none)\").find(\"[data-bs-toggle=collapse]\").click();\r\n        }\r\n        this.pageIndex = i;\r\n      }\r\n    };\r\n    this.gotoPageByIndex = this.gotoPage;\r\n\r\n    // Go to page by element\r\n    this.gotoPageByElement = function (el) {\r\n      this.gotoPage(parseInt($__default.default(el).data(\"page\"), 10) || -1);\r\n    };\r\n\r\n    // Go to page by element's id or name or data-field attribute\r\n    this.gotoPageByElementId = function (id) {\r\n      var $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n      this.gotoPageByElement($el);\r\n    };\r\n\r\n    // Toggle page\r\n    this.togglePage = function (i, show) {\r\n      if (this.isTab) {\r\n        this.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n      } else if (this.isCollapse) {\r\n        this.$pages.eq(i - 1).closest(\".accordion-item\").toggle(\"d-none\", !show);\r\n      }\r\n    };\r\n\r\n    // Render\r\n    this.render = function () {\r\n      this.$form = $__default.default(\"#\" + formid);\r\n      this.pageIndexes = this.$form.find(\"[data-page]\").map(function () {\r\n        var index = parseInt(this.dataset.page, 10);\r\n        return index > 0 ? index : null;\r\n      }).get();\r\n      this.pageIndexes.sort(function (a, b) {\r\n        return a - b;\r\n      });\r\n      this.minPageIndex = this.pageIndexes[0];\r\n      this.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n      var $tabs = this.$form.find(\"[data-bs-toggle=tab]\");\r\n      if ($tabs[0]) {\r\n        this.$pages = $tabs;\r\n        this.isTab = true;\r\n        $tabs.on(\"shown.bs.tab\", function (e) {\r\n          self.pageIndex = $tabs.index(e.target) + 1;\r\n          self.pageShow();\r\n          $__default.default($__default.default(this).attr(\"href\")).find(\".ew-map\").each(function () {\r\n            var m = ew.maps[this.id];\r\n            if (m != null && m[\"map\"]) {\r\n              google.maps.event.trigger(m[\"map\"], \"resize\");\r\n              m[\"map\"].setCenter(m[\"latlng\"]);\r\n            }\r\n          });\r\n        });\r\n        this.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n      } else {\r\n        this.$collapses = this.$form.find(\"[data-bs-toggle=collapse]\");\r\n        if (this.$collapses[0]) {\r\n          this.$pages = this.$collapses;\r\n          this.isCollapse = true;\r\n          var $bodies = this.$collapses;\r\n          $bodies.on(\"shown.bs.collapse\", function (e) {\r\n            self.pageIndex = $bodies.index(e.target) + 1;\r\n            self.pageShow();\r\n            $__default.default(this).find(\".ew-map\").each(function () {\r\n              var m = ew.maps[this.id];\r\n              if (m != null && m[\"map\"]) {\r\n                google.maps.event.trigger(m[\"map\"], \"resize\");\r\n                m[\"map\"].setCenter(m[\"latlng\"]);\r\n              }\r\n            });\r\n          });\r\n          this.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n        }\r\n      }\r\n      $__default.default(function () {\r\n        self.init();\r\n      });\r\n    };\r\n  }\n\n  let DateTime$1 = luxon__default.default.DateTime;\r\n\r\n  /**\r\n   * User level ID validator\r\n   */\r\n  function userLevelId(el) {\r\n    if (el && !ew.checkInteger(el.value)) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDInteger\")\r\n    };\r\n    let level = parseInt(el.value, 10);\r\n    if (level < 1) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDIncorrect\")\r\n    };\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * User level name validator\r\n   * @param {string} id User ID Field input element ID\r\n   */\r\n  function userLevelName(id) {\r\n    return function (el) {\r\n      let elId = document.getElementById(\"x_\" + id);\r\n      if (elId && el) {\r\n        let name = el.value.trim(),\r\n          level = parseInt(elId.value.trim(), 10);\r\n        if (level === 0 && !ew.sameText(name, \"Default\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelDefaultName\")\r\n          };\r\n        } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAdministratorName\")\r\n          };\r\n        } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAnonymousName\")\r\n          };\r\n        } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelNameIncorrect\")\r\n          };\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Required validator\r\n   */\r\n  function required(fieldName) {\r\n    return function (el) {\r\n      var _$el$data;\r\n      let $el = $__default.default(el),\r\n        $p = $el.closest(\"#r_\" + ((_$el$data = $el.data(\"field\")) == null ? void 0 : _$el$data.substring(2))); // Find the row\r\n      if (!$p[0]) $p = $el.closest(\"[id^=el]\"); // Find the span\r\n      if ($p.css(\"display\") == \"none\") {\r\n        // Hidden by .visible()\r\n        return false;\r\n      }\r\n      if (el && !ew.hasValue(el)) {\r\n        return {\r\n          required: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * File required validator\r\n   */\r\n  function fileRequired(fieldName) {\r\n    return function (el) {\r\n      let elFn = document.getElementById(\"fn_\" + el.id);\r\n      if (elFn && !ew.hasValue(elFn)) {\r\n        return {\r\n          fileRequired: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Mismatch password validator\r\n   */\r\n  function mismatchPassword(el) {\r\n    let id;\r\n    if (el.id.startsWith(\"c_\"))\r\n      // Confirm Password field in Register page\r\n      id = el.id.replace(/^c_/, \"x_\");else if (el.id == \"cpwd\")\r\n      // Change Password page\r\n      id = \"npwd\";\r\n    let elPwd = document.getElementById(id);\r\n    if (el.value !== elPwd.value) {\r\n      return {\r\n        mismatchPassword: ew.language.phrase(\"MismatchPassword\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Between validator\r\n   */\r\n  function between(el) {\r\n    let x, z;\r\n    if (el.id.startsWith(\"y_\")) {\r\n      x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\r\n      z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\r\n    } else if (el.id.endsWith(\"_value_1\")) {\r\n      // QueryBuider\r\n      x = document.getElementById(el.id.replace(/_value_1$/, \"_value_0\"));\r\n      z = document.getElementById(el.id.replace(/_value_1$/, \"_operator\"));\r\n    }\r\n    if (ew.hasValue(x) && $__default.default(z).val().toUpperCase() == \"BETWEEN\" && !ew.hasValue(el)) {\r\n      return {\r\n        between: ew.language.phrase(\"EnterValue2\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Password strength validator\r\n   */\r\n  function passwordStrength(el) {\r\n    let $el = $__default.default(el);\r\n    if (!ew.isMaskedPassword(el) && $el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\r\n      return {\r\n        passwordStrength: ew.language.phrase(\"PasswordTooSimple\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * User name validator\r\n   */\r\n  function username(raw) {\r\n    return function (el) {\r\n      if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']'))) return {\r\n        username: ew.language.phrase(\"InvalidUsernameChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Password validator\r\n   */\r\n  function password(raw) {\r\n    return function (el) {\r\n      if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']'))) return {\r\n        password: ew.language.phrase(\"InvalidPasswordChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Email validator\r\n   */\r\n  function email(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkEmail(value)) {\r\n      return {\r\n        email: ew.language.phrase(\"IncorrectEmail\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Emails validator\r\n   */\r\n  function emails(cnt, err) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkEmails(value, cnt)) {\r\n        return {\r\n          emails: err\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * DateTime validator\r\n   * @param {string} format DateTime format\r\n   */\r\n  function datetime(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkDate(value, format)) {\r\n        return {\r\n          datetime: ew.language.phrase(\"IncorrectDate\").replace(/%s/g, format)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Time validator\r\n   * @param {string} format Time format\r\n   */\r\n  function time(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkTime(value, format)) {\r\n        return {\r\n          time: ew.language.phrase(\"IncorrectTime\").replace(/%s/g, format)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Float validator\r\n   */\r\n  function float(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkNumber(value)) {\r\n      return {\r\n        float: ew.language.phrase(\"IncorrectFloat\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Range validator\r\n   * @param {number} min Min value\r\n   * @param {number} max Max value\r\n   */\r\n  function range(min, max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkRange(value, min, max)) {\r\n        return {\r\n          range: ew.language.phrase(\"IncorrectRange\").replace(\"%1\", min).replace(\"%2\", max)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Integer validator\r\n   */\r\n  function integer(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkInteger(value)) {\r\n      return {\r\n        integer: ew.language.phrase(\"IncorrectInteger\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US phone validator\r\n   */\r\n  function phone(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkPhone(value)) {\r\n      return {\r\n        phone: ew.language.phrase(\"IncorrectPhone\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US ZIP validator\r\n   */\r\n  function zip(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkZip(value)) {\r\n      return {\r\n        zip: ew.language.phrase(\"IncorrectZip\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Credit card validator\r\n   */\r\n  function creditCard(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkCreditCard(value)) {\r\n      return {\r\n        creditCard: ew.language.phrase(\"IncorrectCreditCard\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US SSN validator\r\n   */\r\n  function ssn(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkSsn(value)) {\r\n      return {\r\n        ssn: ew.language.phrase(\"IncorrectSSN\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * GUID validator\r\n   */\r\n  function guid(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkGuid(value)) {\r\n      return {\r\n        guid: ew.language.phrase(\"IncorrectGUID\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Regular expression validator\r\n   * @param {string} pattern Regular expression pattern\r\n   */\r\n  function regex(pattern) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkByRegEx(value, pattern)) {\r\n        return {\r\n          regex: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * URL validator\r\n   */\r\n  function url(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkUrl(value)) {\r\n      return {\r\n        url: ew.language.phrase(\"IncorrectUrl\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n    * Custom validator\r\n    * @param {Function} fn Function(value, ...args)\r\n    * @param {...any} args Additional arguments for the function\r\n    */\r\n  function custom(fn) {\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n    return function (el) {\r\n      if (typeof fn == \"function\") {\r\n        let value = ew.getValue(el);\r\n        if (fn(value, ...args)) return {\r\n          custom: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Captcha validator\r\n   */\r\n  function captcha(el) {\r\n    if (el && !ew.hasValue(el)) {\r\n      return {\r\n        captcha: ew.language.phrase(\"EnterValidateCode\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * reCaptcha validator\r\n   */\r\n  function recaptcha(el) {\r\n    var _grecaptcha;\r\n    if (el && !ew.hasValue(el) && ((_grecaptcha = grecaptcha) == null ? void 0 : _grecaptcha.getResponse(el.dataset.id)) === \"\") {\r\n      return {\r\n        recaptcha: ew.language.phrase(\"ClickReCaptcha\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Min date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} min Min date\r\n   */\r\n  function minDate(min) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n        format = el.dataset.formatPattern,\r\n        minDateTime;\r\n      min = typeof min == \"function\" ? min() : min;\r\n      if (min instanceof HTMLElement) {\r\n        let minValue = min.value,\r\n          minFormat = min.dataset.formatPattern;\r\n        if (min.value && min.dataset.formatPattern) minDateTime = ew.parseDate(minValue, minFormat);\r\n      } else if (min instanceof Date) {\r\n        minDateTime = DateTime$1.fromJSDate(min, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (min instanceof DateTime$1) {\r\n        minDateTime = min;\r\n      }\r\n      if (value && format && minDateTime) {\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime < minDateTime) return {\r\n          minDate: ew.language.phrase(\"IncorrectMinDate\").replace(\"%s\", ew.formatDateTime(minDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Max date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} max Max date\r\n   */\r\n  function maxDate(max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n        format = el.dataset.formatPattern,\r\n        maxDateTime;\r\n      max = typeof max == \"function\" ? max() : max;\r\n      if (max instanceof HTMLElement) {\r\n        let maxValue = max.value,\r\n          maxFormat = max.dataset.formatPattern;\r\n        if (max.value && max.dataset.formatPattern) maxDateTime = ew.parseDate(maxValue, maxFormat);\r\n      } else if (max instanceof Date) {\r\n        maxDateTime = DateTime$1.fromJSDate(max, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (max instanceof DateTime$1) {\r\n        maxDateTime = max;\r\n      }\r\n      if (value && format && maxDateTime) {\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime > maxDateTime) return {\r\n          maxDate: ew.language.phrase(\"IncorrectMaxDate\").replace(\"%s\", ew.formatDateTime(maxDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Min validator\r\n   * @param {Function|HTMLElement|String|Number} min Min value\r\n   */\r\n  function min(min) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n        minValue;\r\n      min = typeof min == \"function\" ? min() : min;\r\n      if (min instanceof HTMLElement) {\r\n        minValue = ew.parseNumber(ew.getValue(min));\r\n      } else if (typeof min == \"string\") {\r\n        minValue = ew.parseNumber(min);\r\n      } else if (typeof min == \"number\") {\r\n        minValue = min;\r\n      }\r\n      if (typeof value == \"number\" && typeof minValue == \"number\") {\r\n        if (value < minValue) return {\r\n          min: ew.language.phrase(\"IncorrectMin\").replace(\"%s\", minValue)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Max validator\r\n   * @param {Function|HTMLElement|String|Number} max Max value\r\n   */\r\n  function max(max) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n        maxValue;\r\n      max = typeof max == \"function\" ? max() : max;\r\n      if (max instanceof HTMLElement) {\r\n        maxValue = ew.parseNumber(ew.getValue(max));\r\n      } else if (typeof max == \"string\") {\r\n        maxValue = ew.parseNumber(max);\r\n      } else if (typeof max == \"number\") {\r\n        maxValue = max;\r\n      }\r\n      if (typeof value == \"number\" && typeof maxValue == \"number\") {\r\n        if (value > maxValue) return {\r\n          max: ew.language.phrase(\"IncorrectMax\").replace(\"%s\", maxValue)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\n\n  var Validators = {\n    __proto__: null,\n    userLevelId,\n    userLevelName,\n    required,\n    fileRequired,\n    mismatchPassword,\n    between,\n    passwordStrength,\n    username,\n    password,\n    email,\n    emails,\n    datetime,\n    time,\n    float,\n    range,\n    integer,\n    phone,\n    zip,\n    creditCard,\n    ssn,\n    guid,\n    regex,\n    url,\n    custom,\n    captcha,\n    recaptcha,\n    minDate,\n    maxDate,\n    min,\n    max\n  };\n\n  function _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n\r\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\r\n      return typeof obj;\r\n    } : function (obj) {\r\n      return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\r\n    }, _typeof(obj);\r\n  }\n\n  function _toPrimitive(input, hint) {\r\n    if (_typeof(input) !== \"object\" || input === null) return input;\r\n    var prim = input[Symbol.toPrimitive];\r\n    if (prim !== undefined) {\r\n      var res = prim.call(input, hint || \"default\");\r\n      if (_typeof(res) !== \"object\") return res;\r\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\r\n    }\r\n    return (hint === \"string\" ? String : Number)(input);\r\n  }\n\n  function _toPropertyKey(arg) {\r\n    var key = _toPrimitive(arg, \"string\");\r\n    return _typeof(key) === \"symbol\" ? key : String(key);\r\n  }\n\n  function _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\r\n    }\r\n  }\r\n  function _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) _defineProperties(Constructor, staticProps);\r\n    Object.defineProperty(Constructor, \"prototype\", {\r\n      writable: false\r\n    });\r\n    return Constructor;\r\n  }\n\n  function _assertThisInitialized(self) {\r\n    if (self === void 0) {\r\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n    }\r\n    return self;\r\n  }\n\n  function _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\r\n      o.__proto__ = p;\r\n      return o;\r\n    };\r\n    return _setPrototypeOf(o, p);\r\n  }\n\n  function _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass);\r\n  }\n\n  function _defineProperty(obj, key, value) {\r\n    key = _toPropertyKey(key);\r\n    if (key in obj) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n    } else {\r\n      obj[key] = value;\r\n    }\r\n    return obj;\r\n  }\n\n  /*\r\n   * Based on: jquery.batch v0.1.0\r\n   * Copyright 2013, Matt Morgan (@mlmorg)\r\n   * MIT license\r\n   */\r\n\r\n  // Global batch settings\r\n  $__default.default.batchSettings = {\r\n    type: 'POST',\r\n    contentType: 'application/json',\r\n    processData: false,\r\n    dataType: 'json',\r\n    toJSON: JSON.stringify,\r\n    parse: data => data\r\n  };\r\n\r\n  // Setup method\r\n  $__default.default.batchSetup = function (options) {\r\n    return $__default.default.extend($__default.default.batchSettings, options);\r\n  };\r\n\r\n  // $.batch class\r\n  // -------------\r\n\r\n  var Batch = $__default.default.batch = function (func, options) {\r\n    // Always instantiate a Batch class even if called without \"new\"\r\n    if (!(this instanceof Batch)) {\r\n      return new Batch(func, options);\r\n    }\r\n\r\n    // Shift arguments if func is an object\r\n    if (typeof func === 'object') {\r\n      options = func;\r\n      func = undefined;\r\n    }\r\n\r\n    // Default options\r\n    this.options = $__default.default.extend({}, $__default.default.batchSettings, options);\r\n\r\n    // Find a parent batch object, if we're nested\r\n    this.parent = $__default.default.ajaxSetup()._batch;\r\n\r\n    // Requests storage\r\n    this.requests = [];\r\n\r\n    // Add any requests\r\n    if (func) {\r\n      this.add(func);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Our methods\r\n  $__default.default.extend(Batch.prototype, {\r\n    // Method for adding requests to the batch\r\n    add: function (func) {\r\n      var _func$name;\r\n      // Set global _batch variable in jQuery.ajaxSettings\r\n      $__default.default.ajaxSetup({\r\n        _batch: this.parent || this\r\n      });\r\n\r\n      // Call the user's function\r\n      if ((_func$name = func.name) != null && _func$name.startsWith('bound ')) {\r\n        // Bound function\r\n        func();\r\n      } else {\r\n        func.call($__default.default.ajaxSetup()._batch);\r\n      }\r\n\r\n      // Remove the global _batch variable when we're not nested\r\n      if (!this.parent) {\r\n        $__default.default.ajaxSetup({\r\n          _batch: null\r\n        });\r\n      }\r\n      return this;\r\n    },\r\n    // Clear requests storage\r\n    clear: function () {\r\n      this.requests = [];\r\n    },\r\n    // Method for running the batch request\r\n    send: function (options) {\r\n      options = options || {};\r\n      var instance = this;\r\n\r\n      // When we're handling a child batch object, wrap any success functions\r\n      // and add them to the parent batch success\r\n      if (this.parent && options.success) {\r\n        var parentSuccess = this.parent.options.success;\r\n        this.parent.options.success = function (data, status, xhr) {\r\n          options.success(data, status, xhr);\r\n          if (parentSuccess) {\r\n            parentSuccess(data, status, xhr);\r\n          }\r\n        };\r\n      }\r\n\r\n      // When we're handling the top-most batch, send the request\r\n      else if (this.requests.length) {\r\n        // Map an array of requests\r\n        var requests = $__default.default.map(this.requests, function (request) {\r\n          return request.settings.data;\r\n        });\r\n\r\n        // Override the success callback\r\n        var success = options.success;\r\n        var childSuccess = this.options.success;\r\n        options.success = function (data, statusText, xhr) {\r\n          // Call our _deliver method to handle each individual batch request response\r\n          instance._deliver.call(instance, data, statusText);\r\n\r\n          // Child batch success functions\r\n          if (childSuccess) {\r\n            childSuccess(data, statusText, xhr);\r\n          }\r\n\r\n          // User's success function\r\n          if (success) {\r\n            success(data, statusText, xhr);\r\n          }\r\n        };\r\n\r\n        // Build the Ajax request options\r\n        options = $__default.default.extend({}, this.options, options);\r\n\r\n        // Create hash of requests to pass as the data in the Ajax request\r\n        if (!options.data) {\r\n          options.data = $__default.default.batchSettings.toJSON(requests);\r\n        }\r\n\r\n        // Call the request\r\n        return $__default.default.ajax(options);\r\n      }\r\n    },\r\n    // Private method to add a request to the batch requests array\r\n    _addRequest: function (xhr, settings) {\r\n      this.requests.push({\r\n        xhr: xhr,\r\n        settings: settings\r\n      });\r\n    },\r\n    // Delivers each batch request response to its intended xhr success/complete function\r\n    _deliver: function (data, statusText) {\r\n      var _responses$error;\r\n      var instance = this;\r\n\r\n      // Pass the response off to the user to parse out the responses\r\n      var responses = $__default.default.batchSettings.parse(data);\r\n      if (responses != null && (_responses$error = responses.error) != null && _responses$error.description) {\r\n        var _responses$error2;\r\n        ew__default.default.alert(responses == null ? void 0 : (_responses$error2 = responses.error) == null ? void 0 : _responses$error2.description);\r\n        return;\r\n      }\r\n\r\n      // Loop through the responses\r\n      $__default.default.each(responses, function (i, response) {\r\n        var _request$settings$com;\r\n        // Only work with batch requests that we have stored\r\n        if (!instance.requests[i]) {\r\n          return;\r\n        }\r\n\r\n        // Grab the stored request data\r\n        var request = instance.requests[i];\r\n\r\n        // Build statusText a la jQuery based on status code\r\n        request.xhr.statusText = statusText;\r\n\r\n        // Call the user/success function, if it exists. Pass the response body, status text and xhr.\r\n        if (statusText === 'success') {\r\n          var _request$settings$suc;\r\n          (_request$settings$suc = request.settings.success) == null ? void 0 : _request$settings$suc.call(request.xhr, response, statusText);\r\n        }\r\n\r\n        // Call complete\r\n        (_request$settings$com = request.settings.complete) == null ? void 0 : _request$settings$com.call(request.xhr, statusText);\r\n      });\r\n    }\r\n  });\r\n\r\n  // $.ajax override\r\n  // ---------------\r\n\r\n  // Override jQuery.ajax to cancel any outgoing requests called within\r\n  // a $.batch() function and add them to the batch requests array for\r\n  // that batch instance\r\n  var $ajax = $__default.default.ajax;\r\n  $__default.default.ajax = function (url, options) {\r\n    // Shift arguments when options are passed as first argument\r\n    if (typeof url === 'object') {\r\n      options = url;\r\n      url = undefined;\r\n    }\r\n\r\n    // Set options object\r\n    options = options || {};\r\n\r\n    // Override the jQuery beforeSend method\r\n    var beforeSend = options.beforeSend;\r\n    options.beforeSend = function (xhr, settings) {\r\n      // Call the user's beforeSend function, if passed\r\n      if (beforeSend) {\r\n        var before = beforeSend(xhr, settings);\r\n\r\n        // Cancel request if user's beforeSend function returns false\r\n        if (before === false) {\r\n          return before;\r\n        }\r\n      }\r\n\r\n      // We're only worried about requests made within a $.batch function\r\n      // (aka they have a _batch object)\r\n      if (settings._batch) {\r\n        // Add request to batch\r\n        settings._batch._addRequest(xhr, settings);\r\n\r\n        // Cancel this request\r\n        return false;\r\n      }\r\n    };\r\n\r\n    // Run original $.ajax method for all other requests\r\n    return $ajax.call(this, url, options);\r\n  };\n\n  // Form class\r\n  function FormBase(id, pageId) {\r\n    let self = this,\r\n      $self = $__default.default(self);\r\n    this._initiated = false;\r\n    this.id = id; // Same ID as the form\r\n    this.element = document.getElementById(id); // HTML form or div\r\n    this.$element = $__default.default(this.element); // jQuery object of the form or div\r\n    this.pageId = pageId;\r\n    this.htmlForm = null; // HTML form element\r\n    this.initSearchPanel = false; // Expanded by default\r\n    this.modified = false;\r\n    this.emptyRow = null; // Check empty row\r\n    this.multiPage = null; // Multi-page\r\n    this.autoSuggests = {}; // AutoSuggests\r\n    this.lists = {}; // Dynamic selection lists\r\n    this.batch = new Batch(); // For batch lookup\r\n    this.formKeyCountName = \"\"; // For list/grid pages\r\n    this.submitWithFetch = false; // Submit form with Fetch API and returns Promise\r\n    this.enableOnInit = false; // Disable form during init\r\n    this.filterList = null;\r\n\r\n    // Disable form\r\n    this.disableForm = function () {\r\n      document.body.style.cursor = \"wait\";\r\n      let form = this.getForm();\r\n      $__default.default(form.elements).filter(\":submit:not(.dropdown-toggle), .ew-submit\").prop(\"disabled\", true).addClass(\"disabled\");\r\n      this.trigger(\"disabled\");\r\n    };\r\n\r\n    // Enable form\r\n    this.enableForm = function () {\r\n      let form = this.getForm(),\r\n        $elements = $__default.default(form.elements);\r\n      $elements.filter(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\r\n      $elements.filter(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\r\n      $elements.filter(\":submit:not(.dropdown-toggle), .ew-submit\").not(\".ew-disabled\") // Exclude submit buttons with .ew-disabled (disabled purposely)\r\n      .prop(\"disabled\", false).removeClass(\"disabled\");\r\n      this.trigger(\"enabled\");\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Append hidden element with form name\r\n    this.appendHidden = function (el) {\r\n      var form = this.getForm(),\r\n        $form = $__default.default(form),\r\n        $dp = $__default.default(el).closest(\".ew-form\"),\r\n        name = $dp.attr(\"id\") + \"$\" + el.name;\r\n      if ($form.find(\"input:hidden[name='\" + name + \"']\")[0])\r\n        // Already appended\r\n        return;\r\n      var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\r\n      if (ar.length) {\r\n        ar.forEach(function (o, i) {\r\n          $__default.default('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\r\n        });\r\n      } else {\r\n        $__default.default('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\r\n      }\r\n    };\r\n\r\n    // Can submit\r\n    this.canSubmit = async function (e) {\r\n      var _await$this$validate, _this$validate;\r\n      var form = this.getForm(),\r\n        $form = $__default.default(form);\r\n      this.disableForm();\r\n      this.updateTextArea();\r\n      if (((_await$this$validate = await ((_this$validate = this.validate) == null ? void 0 : _this$validate.call(this, e))) != null ? _await$this$validate : true) && !$form.find(\".is-invalid\")[0]) {\r\n        $form.find(\"input[name^=sv_], input[name^=p_], [name*=_query_builder_rule_], .ew-template input, .ew-custom-option\") // Do not submit these values\r\n        .prop(\"disabled\", true).addClass(\"ew-disabled-element\");\r\n        $form.find(\"[data-readonly=1][disabled]\").prop(\"disabled\", false).addClass(\"ew-enabled-element\"); // Submit readonly values\r\n        var $dps = $form.find(\"input[name=detailpage]\").map(function (i, el) {\r\n          return $form.find(\"#\" + el.value)[0];\r\n        });\r\n        if ($dps.length > 1) {\r\n          // Multiple Master/Detail, check element names\r\n          $dps.each(function (i, dp) {\r\n            $__default.default(dp).find(\":input\").each(function (j, el) {\r\n              if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\r\n                var $els = $dps.not(dp).find(\":input[name='\" + el.name + \"']\");\r\n                if ($els.length) {\r\n                  // Elements with same name found\r\n                  self.appendHidden(el); // Append element with form name\r\n                  $els.each(function () {\r\n                    self.appendHidden(this); // Append elements with same name and form name\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        let args = {\r\n            form: form,\r\n            result: true\r\n          },\r\n          evt = $__default.default.Event(\"beforesubmit\", {\r\n            originalEvent: e\r\n          });\r\n        $form.trigger(evt, [args]);\r\n        let result = await args.result; // Support Promise<boolean|Object>\r\n        if (!evt.isDefaultPrevented() && (result === true || $__default.default.isObject(result) && result.value))\r\n          // Support Swal.fire()\r\n          return true;\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n      return false;\r\n    };\r\n\r\n    // Submit\r\n    this.submit = async function (e) {\r\n      var _e$originalEvent, _e$originalEvent$subm;\r\n      let form = this.getForm(),\r\n        formAction = e == null ? void 0 : (_e$originalEvent = e.originalEvent) == null ? void 0 : (_e$originalEvent$subm = _e$originalEvent.submitter) == null ? void 0 : _e$originalEvent$subm.formAction;\r\n      if (formAction) {\r\n        formAction = ew.parseUrl(formAction).pathname;\r\n        form.setAttribute(\"action\", formAction);\r\n      }\r\n      if (await this.canSubmit(e)) {\r\n        if (this.submitWithFetch) {\r\n          let url = form.getAttribute(\"action\"),\r\n            method = form.method.toUpperCase(),\r\n            body = $__default.default(form).serialize();\r\n          return ew.fetch(url, {\r\n            method,\r\n            body\r\n          }).finally(() => this.enableForm()); // Return Promise\r\n        } else {\r\n          form.submit();\r\n        }\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n    };\r\n\r\n    // Get dynamic selection list by element name or id\r\n    this.getList = function (name) {\r\n      var _this$getElement, _this$getElement$data;\r\n      if ($__default.default.isObject(name)) {\r\n        // Object\r\n        let obj = name;\r\n        name = obj.name || obj.id;\r\n        if (name.includes(\"query_builder_rule\")) name = obj.dataset.field;\r\n      }\r\n      name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n      if (this.lists[name]) return this.lists[name];\r\n      let field = (_this$getElement = this.getElement(name)) == null ? void 0 : (_this$getElement$data = _this$getElement.dataset.field) == null ? void 0 : _this$getElement$data.replace(/^x_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n      return field ? this.lists[field] : {};\r\n    };\r\n\r\n    // Compile templates\r\n    this.compileTemplates = function () {\r\n      let lists = Object.values(this.lists);\r\n      for (let list of lists) {\r\n        if (list.template && $__default.default.isString(list.template)) list.template = $__default.default.templates(list.template);\r\n      }\r\n    };\r\n\r\n    // Get option template of dynamic selection list\r\n    this.getOptionTemplate = function (list) {\r\n      if (list.template && $__default.default.isString(list.template)) list.template = $__default.default.templates(list.template);\r\n      return list.template;\r\n    };\r\n\r\n    // Get the HTML form element\r\n    this.getForm = function () {\r\n      if (!this.htmlForm) {\r\n        var _this$element, _this$element2;\r\n        if (((_this$element = this.element) == null ? void 0 : _this$element.tagName) == \"FORM\") {\r\n          // HTML form\r\n          this.htmlForm = this.element;\r\n        } else if (((_this$element2 = this.element) == null ? void 0 : _this$element2.tagName) == \"DIV\") {\r\n          // HTML div => Grid page\r\n          this.htmlForm = this.element.closest(\"form\");\r\n        }\r\n      }\r\n      return this.htmlForm;\r\n    };\r\n\r\n    // Get form element as single element\r\n    this.getElement = function (name) {\r\n      return name ? ew.getElement(name, this.$element) : this.$element[0];\r\n    };\r\n\r\n    // Get form element(s) as single element or array of radio/checkbox\r\n    this.getElements = function (name) {\r\n      return ew.getElements(name, this.$element);\r\n    };\r\n\r\n    // Fix ID\r\n    this.fixId = function (id, multiple, rowindex) {\r\n      let t = \"\",\r\n        ar = id.split(\" \");\r\n      if (ar.length > 1) {\r\n        t = ar[0];\r\n        rowindex = \"\";\r\n        id = ar[1];\r\n      }\r\n      let prefix = $__default.default.isNumber(rowindex) ? \"x\" + rowindex + \"_\" : \"x_\"; // Add row index\r\n      id = id.startsWith(\"x_\") ? id.replace(/^x_/, prefix) // Field element name\r\n      : prefix + id; // Field var\r\n      if (multiple && !id.endsWith(\"[]\"))\r\n        // Add [] if select-multiple\r\n        id += \"[]\";\r\n      return t ? t + \" \" + id : id;\r\n    };\r\n\r\n    /**\r\n     * Update a selection list\r\n     * @param {string|HTMLElement} id - ID (Field param) or HTML element\r\n     * @param {Object} list - List\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {boolean} immediate - Send request immediately\r\n     * @returns\r\n     */\r\n    this.updateList = function (id, list, rowindex, immediate) {\r\n      var _list, _Object$entries$find;\r\n      (_list = list) != null ? _list : list = $__default.default.isString(id) // Find the list if not provided\r\n      ? (_Object$entries$find = Object.entries(this.lists).find(entry => entry[0] == id.replace(/^x_/, \"\"))) == null ? void 0 : _Object$entries$find[1] // String\r\n      : this.getList(id); // HTMLElement\r\n      if (list.template && $__default.default.isString(list.template))\r\n        // Compile template in case updateLists() called before init()\r\n        list.template = $__default.default.templates(list.template);\r\n      let form = this.element,\r\n        parents = list.parentFields.slice().map(parent => this.fixId(parent, false, rowindex)),\r\n        // Clone and fix index\r\n        ajax = list.ajax && !list.lookupOptions.length; // Has link table and no lookup cache\r\n      id = $__default.default.isString(id) ? this.fixId(id, list.multiple, rowindex) : id;\r\n      return !ajax || immediate ? ew.updateOptions.call(this, id, parents, ajax, false) // Non-Ajax (lookup cache or user values) or update immediately\r\n      : [id, parents.map(parent => ew.getOptionValues(parent, form)), ajax, false]; // Ajax (async) => to be batch updated\r\n    };\r\n\r\n    /**\r\n     * Update selection lists\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {bool} [immediate] - Send request immediately\r\n     * @returns\r\n     */\r\n    this.updateLists = function (rowindex, immediate) {\r\n      var _form$querySelector;\r\n      if (rowindex === null)\r\n        // rowindex == $rowindex$ == null\r\n        return;\r\n      if (this.pageId == \"grid\" && !$__default.default.isNumber(rowindex) && !$__default.default.isUndefined(rowindex)) return;\r\n      let form = this.getForm(); // Set up $element and htmlForm\r\n      if ((form == null ? void 0 : (_form$querySelector = form.querySelector(\"input#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\")\r\n        // Confirm page\r\n        return;\r\n      let selector = Object.entries(this.lists).map(_ref => {\r\n        let [id, list] = _ref;\r\n        return \"[name='\" + this.fixId(id, list.multiple, rowindex) + \"']\";\r\n      }).join();\r\n      if (selector && this.element.querySelector(selector))\r\n        // List found\r\n        Object.entries(this.lists).map(_ref2 => {\r\n          let [id, list] = _ref2;\r\n          return this.updateList(id, list, rowindex);\r\n        }) // Update each list\r\n        .filter(result => Array.isArray(result)) // Get ajax requests for batch update\r\n        .forEach(request => this.batch.add(ew.updateOptions.bind(this, ...request))); // Batch update async requests\r\n      // Update the Ajax lists\r\n      if (this.batch.requests.length) {\r\n        if (rowindex === undefined || immediate) {\r\n          // Called by form or update immediately (add blank row)\r\n          let deferreds = [],\r\n            batchSize = ew.ajaxBatchSize > 0 ? ew.ajaxBatchSize : 1;\r\n          while (this.batch.requests.length > batchSize) {\r\n            let b = new Batch();\r\n            b.requests = this.batch.requests.splice(0, batchSize);\r\n            deferreds.push(b.send({\r\n              url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n            }));\r\n          }\r\n          if (this.batch.requests.length > 0) deferreds.push(this.batch.send({\r\n            url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n          }));\r\n          $__default.default.when(...deferreds).then(() => $__default.default(document).trigger(\"updatedone\", [{\r\n            source: self,\r\n            target: form\r\n          }])).fail(error => console.log(error)).always(() => this.batch.clear());\r\n        }\r\n      } else {\r\n        $__default.default(document).trigger(\"updatedone\", [{\r\n          source: self,\r\n          target: form\r\n        }]);\r\n      }\r\n    };\r\n\r\n    // Create AutoSuggest\r\n    this.createAutoSuggest = function (settings) {\r\n      var options = Object.assign({\r\n        limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\r\n        form: this\r\n      }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\r\n      self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\r\n    };\r\n\r\n    // Init editors\r\n    this.initEditors = function () {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default.default(el).data(\"editor\");\r\n        if (ed && !ed.active && !ed.name.includes(\"$rowindex$\")) ed.create();\r\n      });\r\n    };\r\n\r\n    // Update textareas\r\n    this.updateTextArea = function (name) {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default.default(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n        ed.save();\r\n        if (name) return false; // Break\r\n      });\r\n    };\r\n\r\n    // Destroy editor(s)\r\n    this.destroyEditor = function (name) {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default.default(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n        ed.destroy();\r\n        if (name) return false; // Break\r\n      });\r\n    };\r\n\r\n    // Show error message\r\n    this.onError = function (el, msg) {\r\n      return ew.onError(this, el, msg);\r\n    };\r\n\r\n    // Init file upload\r\n    this.initUpload = function () {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"input:file:not([name*='$rowindex$'])\").each(function (index) {\r\n        $__default.default.later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\r\n      });\r\n    };\r\n\r\n    // Set up filters\r\n    this.setupFilters = function (e, filters) {\r\n      let id = this.id,\r\n        data = this.filterList ? this.filterList.data : null,\r\n        $sf = $__default.default(\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\r\n        $df = $__default.default(\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\r\n        $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\r\n        $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data);\r\n      let saveFilters = function (id, filters) {\r\n        if (ew.CLIENT_SEARCH_FILTER) {\r\n          localStorage.setItem(ew.PROJECT_NAME + \"_\" + id + \"_filters\", JSON.stringify(filters));\r\n        } else if (ew.SERVER_SEARCH_FILTER) {\r\n          document.body.style.cursor = \"wait\";\r\n          $__default.default.ajax(ew.currentPage(), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: {\r\n              \"ajax\": \"savefilters\",\r\n              \"filters\": JSON.stringify(filters)\r\n            }\r\n          }).done(function (result) {\r\n            var _result$;\r\n            if ((_result$ = result[0]) != null && _result$.success) self.filterList.filters = filters; // Save filters\r\n          }).always(function () {\r\n            document.body.style.cursor = \"default\";\r\n          });\r\n        }\r\n      };\r\n      $save.off(\"click.ew\").on(\"click.ew\", function (e) {\r\n        // Save filter\r\n        if ($save.hasClass(\"disabled\")) return false;\r\n        ew.prompt({\r\n          input: \"text\",\r\n          html: ew.language.phrase(\"EnterFilterName\")\r\n        }, name => {\r\n          name = ew.sanitize(name);\r\n          if (name) {\r\n            filters.push([name, data]);\r\n            saveFilters(id, filters);\r\n          }\r\n        }, true);\r\n      }).prevAll().remove();\r\n      $df.next(\"ul.dropdown-menu\").remove();\r\n      if (filters.length) {\r\n        let $submenu = $__default.default('<ul class=\"dropdown-menu\"></ul>');\r\n        filters.forEach((filter, i, ar) => {\r\n          $__default.default('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').on(\"click\", function (e) {\r\n            // Delete\r\n            let index = this.querySelector(\"a[data-index]\").dataset.index;\r\n            ew.prompt(ew.language.phrase(\"DeleteFilterConfirm\").replace(\"%s\", filter[0]), result => {\r\n              if (result) {\r\n                ar.splice(index, 1);\r\n                saveFilters(id, filters);\r\n              }\r\n            });\r\n          }).appendTo($submenu);\r\n          $__default.default('<li><a class=\"dropdown-item ew-reset-filter-list\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').insertBefore($save).on(\"click\", function (e) {\r\n            let body = {\r\n              cmd: \"resetfilter\",\r\n              filter: JSON.stringify(filter[1])\r\n            };\r\n            ew.refresh(ew.fetch(ew.setLayout(ew.currentPage(), false), {\r\n              method: \"POST\",\r\n              body\r\n            }));\r\n          });\r\n        });\r\n        $__default.default('<li class=\"dropdown-divider\"></li>').insertBefore($save);\r\n        $delete.append($submenu);\r\n      }\r\n    };\r\n\r\n    // Add event handler\r\n    this.on = function () {\r\n      $self.on(...arguments);\r\n    };\r\n\r\n    // Add event handler\r\n    this.one = function () {\r\n      $self.one(...arguments);\r\n    };\r\n\r\n    // Remove event handler\r\n    this.off = function () {\r\n      $self.off(...arguments);\r\n    };\r\n\r\n    // Trigger event\r\n    this.trigger = function () {\r\n      $self.trigger(...arguments);\r\n    };\r\n\r\n    // Init form\r\n    this.init = function () {\r\n      if (this._initiated) return;\r\n\r\n      // Check form\r\n      var form = this.getForm();\r\n      if (!form) return;\r\n      var $form = $__default.default(form);\r\n\r\n      // Compile templates\r\n      this.compileTemplates();\r\n\r\n      // Search form\r\n      if (/s(ea)?rch$/.test(this.id)) {\r\n        // Search panel\r\n        if (this.initSearchPanel && !ew.hasFormData(form)) $__default.default(\"#\" + this.id + \"_search_panel\").removeClass(\"show\");\r\n\r\n        // Hide search operator column\r\n        if (!$__default.default(\".ew-table .ew-search-operator\").text().trim()) $__default.default(\".ew-table .ew-search-operator\").parent(\"td\").hide();\r\n\r\n        // Search operators\r\n        $form.find(\"select[id^=z_]\").each(function () {\r\n          var $this = $__default.default(this).trigger(\"change\");\r\n          if ($this.val() != \"BETWEEN\") $form.find(\"#w_\" + this.id.substring(2)).trigger(\"change\");\r\n        });\r\n      }\r\n\r\n      // Multi-page\r\n      if (this.multiPage) this.multiPage.render();\r\n\r\n      // HTML editors\r\n      loadjs.ready([\"editor\"], () => setTimeout(this.initEditors.bind(this), 0)); // Delay for custom template to apply first\r\n\r\n      // Dynamic selection lists\r\n      this.updateLists();\r\n\r\n      // Init file upload\r\n      this.initUpload();\r\n\r\n      // Submit/Cancel\r\n      if (this.$element.is(\"form\")) {\r\n        // Not Grid page\r\n        // Detail pages\r\n        this.$element.find(\".ew-detail-pages .ew-nav a[data-bs-toggle=tab]\").on(\"shown.bs.tab\", function (e) {\r\n          var $tab = $__default.default(e.target.getAttribute(\"href\")),\r\n            $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\r\n            $container = $tab.closest(\".container-fluid\");\r\n          if ($panel.width() >= $container.width()) $panel.width($container.width() + \"px\");else $panel.width(\"auto\");\r\n        });\r\n        $form.off(\"submit.ew\").on(\"submit.ew\", function (e) {\r\n          // Bind submit event\r\n          let args = {\r\n              form: form,\r\n              result: self.submit(e)\r\n            },\r\n            evt = $__default.default.Event(\"aftersubmit\", {\r\n              originalEvent: e\r\n            });\r\n          self.trigger(evt, [args]);\r\n          return false; // Disable normal submission\r\n        });\r\n\r\n        $form.find(\"[data-field], .ew-priv\").on(\"change\", function () {\r\n          if (ew.CONFIRM_CANCEL) self.modified = true;\r\n        });\r\n        $form.find(\"#btn-cancel[data-href]\").on(\"click\", function () {\r\n          // Cancel\r\n          self.updateTextArea();\r\n          var href = this.dataset.href;\r\n          if (self.modified && ew.hasFormData(form)) {\r\n            ew.prompt(ew.language.phrase(\"ConfirmCancel\"), result => {\r\n              if (result) {\r\n                $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n                window.location = href;\r\n              }\r\n            });\r\n          } else {\r\n            $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n            window.location = href;\r\n          }\r\n        });\r\n      }\r\n      this._initiated = true;\r\n\r\n      // Store form object as data\r\n      this.$element.data(\"form\", this);\r\n\r\n      // Enable form\r\n      if (this.enableOnInit || Array.from(form.elements).find(el => el.matches(\"button.disabled.enable-on-init\"))) this.enableForm();\r\n\r\n      // Trigger listeners\r\n      this.trigger(\"initiated\");\r\n    };\r\n\r\n    // Add to the global forms object\r\n    ew.forms.add(this);\r\n  }\n\n  /**\r\n   * Class Field\r\n   */\r\n  let Field = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]|Function} validators Validators\r\n     * @param {bool} invalid Initial valid status (e.g. server side)\r\n     */\r\n    function Field(fldvar, validators, invalid) {\r\n      _defineProperty(this, \"name\", \"\");\r\n      _defineProperty(this, \"validators\", []);\r\n      _defineProperty(this, \"_validate\", true);\r\n      this.name = fldvar;\r\n      if (Array.isArray(validators)) {\r\n        for (let validator of validators) this.addValidator(validator);\r\n      } else if (typeof validators === \"function\") {\r\n        this.addValidator(validators);\r\n      }\r\n      this.invalid = invalid;\r\n    }\r\n\r\n    /**\r\n     * Add validator\r\n     * @param {Function} validator Validator function\r\n     */\r\n    var _proto = Field.prototype;\r\n    _proto.addValidator = function addValidator(validator) {\r\n      if (typeof validator === \"function\") this.validators.push(validator);\r\n    }\r\n\r\n    /**\r\n     * Get error\r\n     * @returns {Object}\r\n     */;\r\n    /**\r\n     * Add error\r\n     * @param {Object} err Error\r\n     */\r\n    _proto.addError = function addError(err) {\r\n      if (err) {\r\n        var _this$_error;\r\n        let error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error = {\r\n          ...error,\r\n          ...err\r\n        };\r\n        this.invalid = true;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Clear all errors\r\n     */;\r\n    _proto.clearErrors = function clearErrors() {\r\n      this._error = null;\r\n      this.invalid = false;\r\n    }\r\n\r\n    /**\r\n     * Clear all validators\r\n     */;\r\n    _proto.clearValidators = function clearValidators() {\r\n      this.validators = [];\r\n    }\r\n\r\n    /**\r\n     * Get error message\r\n     * @returns {string} HTML\r\n     */;\r\n    /**\r\n     * Validate field value\r\n     * @returns {boolean}\r\n     */\r\n    _proto.validate = function validate() {\r\n      let result = true;\r\n      this.clearErrors(); // Reset error\r\n      if (this._element && this.shouldValidate) {\r\n        if (Array.isArray(this.validators)) {\r\n          for (let validator of this.validators) {\r\n            let err = validator(this._element);\r\n            if (err !== false) {\r\n              this.addError(err);\r\n              result = false;\r\n            }\r\n          }\r\n          this.updateFeedback();\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n     * Reset invalid property (on page load for Grid-Add/Edit)\r\n     */;\r\n    _proto.resetInvalid = function resetInvalid() {\r\n      var _this$_element, _this$_element$classL, _this$_element$closes, _this$_element$closes2;\r\n      this.clearErrors();\r\n      if ((_this$_element = this._element) != null && (_this$_element$classL = _this$_element.classList) != null && _this$_element$classL.contains(\"is-invalid\") && !this._error) this.addError({\r\n        server: (_this$_element$closes = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : (_this$_element$closes2 = _this$_element$closes.querySelector(\".invalid-feedback\")) == null ? void 0 : _this$_element$closes2.innerHTML\r\n      }); // Server side error\r\n    }\r\n\r\n    /**\r\n     * Update the error message to feedback element\r\n     */;\r\n    _proto.updateFeedback = function updateFeedback() {\r\n      let err = this.errorMessage;\r\n      if (this._element && err) {\r\n        var _this$_element$closes3;\r\n        let feedback = (_this$_element$closes3 = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : _this$_element$closes3.querySelector(\".invalid-feedback\");\r\n        if (feedback) feedback.innerHTML = err;\r\n        ew.setInvalid(this._element);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set focus\r\n     * @param {Object} options - Focus options\r\n     */;\r\n    _proto.focus = function focus(options) {\r\n      if (this._element) ew.setFocus(this._element, options);\r\n    }\r\n\r\n    /**\r\n     * Check if the field can be focused\r\n     */;\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n      let el = this._element;\r\n      return el && !(el.hidden && !el.tagName == \"SELECTION-LIST\" || el.readonly || el.disabled || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n\r\n    /**\r\n     * Check if focused\r\n     */;\r\n    _createClass(Field, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n    }, {\r\n      key: \"errorMessage\",\r\n      get: function () {\r\n        if (this._error) {\r\n          return Array.from(Object.values(this._error)).join(\"<br>\");\r\n        }\r\n        return \"\";\r\n      }\r\n\r\n      /**\r\n       * Check if the field should be validated\r\n       */\r\n    }, {\r\n      key: \"shouldValidate\",\r\n      get: function () {\r\n        return !this._checkbox || this._checkbox.checked;\r\n      }\r\n\r\n      /**\r\n       * Set form element\r\n       */\r\n    }, {\r\n      key: \"element\",\r\n      get:\r\n      /**\r\n       * Get form element\r\n       * @returns {HTMLElement|HTMLElement[]}\r\n       */\r\n      function () {\r\n        return this._element;\r\n      }\r\n\r\n      /**\r\n       * Get field value from form element\r\n       * @returns {string|Array}\r\n       */,\r\n      set: function (el) {\r\n        var _this$_element2, _this$_element2$id;\r\n        this._element = el;\r\n        this._checkbox = (_this$_element2 = this._element) != null && (_this$_element2$id = _this$_element2.id) != null && _this$_element2$id.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\").replace(/\\[\\]$/, \"\")) : null; // Find the checkbox for the field in Update page\r\n      }\r\n    }, {\r\n      key: \"value\",\r\n      get: function () {\r\n        return this._element ? ew.getValue(this._element) : \"\";\r\n      }\r\n    }, {\r\n      key: \"focused\",\r\n      get: function () {\r\n        return this._element && this._element == document.activeElement;\r\n      }\r\n    }]);\r\n    return Field;\r\n  }();\n\n  /**\r\n   * Class Form\r\n   */\r\n  let Form = /*#__PURE__*/function (_FormBase) {\r\n    _inheritsLoose(Form, _FormBase);\r\n    /**\r\n     * Constructor\r\n     * @param {string} id Form ID\r\n     * @param {string} pageId Page ID\r\n     */\r\n    function Form(id, pageId) {\r\n      var _this;\r\n      _this = _FormBase.call(this, id, pageId) || this;\r\n      _defineProperty(_assertThisInitialized(_this), \"row\", {});\r\n      _defineProperty(_assertThisInitialized(_this), \"fields\", {});\r\n      _defineProperty(_assertThisInitialized(_this), \"validateRequired\", true);\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocus\", true);\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocusPreventScroll\", true);\r\n      _this.on(\"initiated\", function () {\r\n        let form = this.getForm();\r\n        if (form.classList.contains(\"ew-wait\")) {\r\n          this.one(\"enabled\", function () {\r\n            this.setInvalid();\r\n            this.tryFocus();\r\n          });\r\n          return;\r\n        }\r\n        this.setInvalid();\r\n        this.tryFocus();\r\n      });\r\n      return _this;\r\n    }\r\n\r\n    /**\r\n     * Add field\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]} validators Validators\r\n     * @param {bool} invalid Invalid\r\n     */\r\n    var _proto = Form.prototype;\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!(fldvar in this.fields)) this.fields[fldvar] = new Field(fldvar, validators, invalid);\r\n    }\r\n\r\n    /**\r\n     * Get field\r\n     * @param {string} fldvar Field variable name\r\n     * @returns Field\r\n     */;\r\n    _proto.getField = function getField(fldvar) {\r\n      return this.fields[fldvar];\r\n    }\r\n\r\n    /**\r\n     * Add fields by field definitions\r\n     * @param {Array} fields\r\n     */;\r\n    _proto.addFields = function addFields(fields) {\r\n      if (Array.isArray(fields)) {\r\n        for (let field of fields) {\r\n          if (Array.isArray(field)) {\r\n            this.addField.apply(this, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Object} err Error\r\n     */;\r\n    _proto.addError = function addError(fldvar, err) {\r\n      if (err) {\r\n        var _this$_error;\r\n        this._error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error[fldvar] = err;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add custom error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {string} msg Error message\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.addCustomError = function addCustomError(fldvar, msg, rowIndex) {\r\n      if (fldvar in this.fields) {\r\n        let field = this.fields[fldvar],\r\n          err = {\r\n            custom: msg\r\n          };\r\n        field.addError(err);\r\n        this.setFieldElement(fldvar, rowIndex);\r\n        field.updateFeedback();\r\n        this.addError(fldvar, err);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * Get error\r\n     */;\r\n    /**\r\n     * Set focus to a HTML element\r\n     * @param {HTMLElement} el - HTML element to be focused\r\n     */\r\n    _proto.setFocus = function setFocus(el) {\r\n      let delay = this.makeVisible(el) ? Form.focusDelay : 0;\r\n      if (el && el != document.activeElement && el.focus) {\r\n        let preventScroll = !el.closest(\".modal-body\") && Form.autoFocusPreventScroll && this.autoFocusPreventScroll;\r\n        setTimeout(() => {\r\n          el.focus({\r\n            preventScroll\r\n          });\r\n        }, delay); // Focus after tab transition\r\n        this._focused = true;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set focus to the first field with error\r\n     */;\r\n    _proto.focus = function focus() {\r\n      if (!this.canFocus()) return;\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        var _this$_error2;\r\n        if (field.invalid || (_this$_error2 = this._error) != null && _this$_error2[fldvar]) {\r\n          this.getFocusable(field);\r\n          if (field.canFocus()) {\r\n            this.setFocus(field.element);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Get focuable field element\r\n     * @param {Field} field - Field object\r\n     */;\r\n    _proto.getFocusable = function getFocusable(field) {\r\n      var _field$element;\r\n      (_field$element = field.element) != null ? _field$element : field.element = this.getFieldElements(field.name);\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 0); // Inline-Add\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 1); // Inline-Edit or Grid-Add/Edit\r\n    }\r\n\r\n    /**\r\n     * Try set focus to a field\r\n     * @param {string|undefined|true} fieldName [undefined] - Field variable name. If undefined, find the first field. If true, always try to focus.\r\n     */;\r\n    _proto.tryFocus = function tryFocus(fieldName) {\r\n      if (!this.canFocus()) return;\r\n      if (!fieldName && (!Form.autoFocus || !this.autoFocus || this._focused)) return;\r\n      if (!fieldName && this.invalid) {\r\n        // Has error\r\n        this.focus();\r\n        return;\r\n      }\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        // Process detail forms\r\n        let form = this.getForm(),\r\n          detailpage = Array.from(form.querySelectorAll(\"input[name=detailpage]\")).find(dp => {\r\n            var _ew$forms$get;\r\n            return (_ew$forms$get = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get.invalid;\r\n          });\r\n        if (detailpage) {\r\n          detailpage.focus();\r\n          return;\r\n        }\r\n      }\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        if (typeof fieldName == \"string\" && fieldName !== fldvar) continue;\r\n        field.element = null; // Reset field element first so that it will get the first element\r\n        this.getFocusable(field);\r\n        if (field.canFocus()) {\r\n          this.setFocus(field.element);\r\n          return;\r\n        }\r\n      }\r\n      let input = this.element[ew.TABLE_BASIC_SEARCH]; // Quick Search input\r\n      if (this.id.endsWith(\"srch\") && input && input != document.activeElement) {\r\n        // Extended Search\r\n        input.focus({\r\n          preventScroll: Form.autoFocusPreventScroll && this.autoFocusPreventScroll\r\n        }); // Focus the Quick Search input\r\n        this._focused = true;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Check if the form can be focused\r\n     */;\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n      let el = this.element;\r\n      return el && !(el.hidden || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n\r\n    /**\r\n     * Make the form visible\r\n     * @param {HTMLElement} el - Focused element\r\n     */;\r\n    _proto.makeVisible = function makeVisible(el) {\r\n      if (this.multiPage) {\r\n        // Multi-page\r\n        this.multiPage.gotoPageByElement(el);\r\n        return true;\r\n      } else if (this.$element.is(\"div\")) {\r\n        // Multiple Master/Detail\r\n        let $pane = this.$element.closest(\".tab-pane\");\r\n        if ($pane[0] && !$pane.hasClass(\"active\")) {\r\n          $pane.closest(\".ew-nav\").find(\"a[data-bs-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").trigger(\"click\");\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * Validate all fields of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.validateFields = function validateFields(rowIndex) {\r\n      var _rowIndex;\r\n      (_rowIndex = rowIndex) != null ? _rowIndex : rowIndex = this.getCurrentRowIndex();\r\n      if (rowIndex < 2)\r\n        // Regular pages (\"\"), Inline-Add (\"0\") or first row (\"1\")\r\n        this.value = null; // Reset\r\n      this.row = {};\r\n      this._error = null; // Reset\r\n      let result = true;\r\n      for (let field of Object.values(this.fields)) {\r\n        field.element = this.getFieldElements(field.name, rowIndex);\r\n        this.row[field.name] = field.value; // Get field value\r\n        if (field.element && !field.validate()) {\r\n          // Invalid field value\r\n          this.addError(field.name, field.error);\r\n          result = false;\r\n        }\r\n      }\r\n      // Save the field values of the row\r\n      if (!this.value) {\r\n        this.value = {\r\n          ...this.row\r\n        };\r\n      } else {\r\n        if (!Array.isArray(this.value)) this.value = [this.value];\r\n        let index = parseInt(rowIndex, 10) || 0;\r\n        index = index > 1 ? index - 1 : 0;\r\n        this.value[index] = {\r\n          ...this.row\r\n        };\r\n      }\r\n      this.focus();\r\n      return result;\r\n    }\r\n\r\n    /**\r\n     * Key count (number|NaN)\r\n     */;\r\n    /**\r\n     * Validate\r\n     * @param {Event} e - Event\r\n     * @returns {bool}\r\n     */\r\n    _proto.validate = async function validate(e) {\r\n      var _form$querySelector, _form$querySelector2, _ref, _e$currentTarget;\r\n      if (!this.validateRequired) return true; // Ignore validation\r\n\r\n      let form = this.getForm();\r\n      if (((_form$querySelector = form.querySelector(\"#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\") return true;\r\n      if (this.pageId == \"update\" && !ew.updateSelected(form)) {\r\n        ew.alert(ew.language.phrase(\"NoFieldSelected\"));\r\n        return false;\r\n      }\r\n      let addcnt = 0,\r\n        inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n        // Inline-Add\r\n        action = ((_form$querySelector2 = form.querySelector(\"#action\")) == null ? void 0 : _form$querySelector2.value) || ((_ref = (_e$currentTarget = e == null ? void 0 : e.currentTarget) != null ? _e$currentTarget : inlineAdd) == null ? void 0 : _ref.dataset.action),\r\n        keycnt = inlineAdd ? 0 : this.keyCount,\r\n        gridinsert = action == \"gridinsert\" || [\"insert\", \"confirm\"].includes(action) && keycnt,\r\n        // Grid-Add or Master/Detail-Add\r\n        startcnt = inlineAdd ? 0 : 1,\r\n        rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n      for (let i = startcnt; i <= rowcnt; i++) {\r\n        var _await$this$customVal, _this$customValidate;\r\n        let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n        form.dataset.rowindex = rowIndex;\r\n        if ([\"list\", \"grid\"].includes(this.pageId)) {\r\n          if (gridinsert ? !this.emptyRow(rowIndex) : true) addcnt++;else continue;\r\n        }\r\n\r\n        // Validate fields\r\n        if (!this.validateFields(rowIndex)) return false;\r\n\r\n        // Call customValidate event\r\n        if (!((_await$this$customVal = await ((_this$customValidate = this.customValidate) == null ? void 0 : _this$customValidate.call(this, form))) != null ? _await$this$customVal : true)) {\r\n          this.focus();\r\n          return false;\r\n        }\r\n      }\r\n      delete form.dataset.rowindex; // Reset\r\n\r\n      if (this.pageId == \"list\" && gridinsert && addcnt == 0) {\r\n        // No row added\r\n        ew.alert({\r\n          html: ew.language.phrase(\"NoAddRecord\"),\r\n          returnFocus: false\r\n        }); // Do not return focus\r\n        this.tryFocus(true);\r\n        return false;\r\n      }\r\n\r\n      // Process detail forms\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        let detailpages = form.querySelectorAll(\"input[name=detailpage]\");\r\n        for (let dp of detailpages) {\r\n          var _await$frm$validate;\r\n          let frm = ew.forms.get(dp.value);\r\n          if (!((_await$frm$validate = await (frm == null ? void 0 : frm.validate == null ? void 0 : frm.validate(e))) != null ? _await$frm$validate : true)) return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n\r\n    /**\r\n     * Get current row index (during validation)\r\n     * @returns {string} Row index\r\n     */;\r\n    _proto.getCurrentRowIndex = function getCurrentRowIndex() {\r\n      var _this$getForm$dataset;\r\n      return (_this$getForm$dataset = this.getForm().dataset.rowindex) != null ? _this$getForm$dataset : \"\";\r\n    }\r\n\r\n    /**\r\n     * Get field values of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.getValue = function getValue(rowIndex) {\r\n      var _rowIndex2;\r\n      (_rowIndex2 = rowIndex) != null ? _rowIndex2 : rowIndex = this.getCurrentRowIndex();\r\n      let value = {};\r\n      for (let field of Object.values(this.fields)) {\r\n        var _field$element2;\r\n        (_field$element2 = field.element) != null ? _field$element2 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        value[field.name] = field.value; // Get field value\r\n      }\r\n\r\n      return value;\r\n    }\r\n\r\n    /**\r\n     * Get a field value of the specified row\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.getFieldValue = function getFieldValue(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n      if (field) {\r\n        var _rowIndex3, _field$element3;\r\n        (_rowIndex3 = rowIndex) != null ? _rowIndex3 : rowIndex = this.getCurrentRowIndex();\r\n        (_field$element3 = field.element) != null ? _field$element3 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        return field.value;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    /**\r\n     * Get HTML elements for a field\r\n     * @param {string} name - Field name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */;\r\n    _proto.getFieldElements = function getFieldElements(name, rowIndex) {\r\n      var _rowIndex4;\r\n      (_rowIndex4 = rowIndex) != null ? _rowIndex4 : rowIndex = this.getCurrentRowIndex();\r\n      return this.getElements(\"x\" + rowIndex + \"_\" + name) ||\r\n      // By name with prefix\r\n      this.getElements(\"x\" + rowIndex + \"_\" + name + \"[]\") ||\r\n      // By name with prefix and []\r\n      this.getElements(name); // By name directly (e.g. email form)\r\n    }\r\n\r\n    /**\r\n     * Set the element property of the field object and return the field elements\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */;\r\n    _proto.setFieldElement = function setFieldElement(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n      if (field) field.element = this.getFieldElements(field.name, rowIndex);\r\n      return field == null ? void 0 : field.element;\r\n    }\r\n\r\n    /**\r\n     * Set invalid fields of the specified row\r\n     * @param {number} rowIndex - Row index. If undefined, set for the whole form.\r\n     */;\r\n    _proto.setInvalid = function setInvalid(rowIndex) {\r\n      let form = this.getForm(); // Get HTML form\r\n      if (typeof rowIndex === \"undefined\" && this.formKeyCountName) {\r\n        let inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n          // Inline-Add\r\n          keycnt = inlineAdd ? 0 : this.keyCount,\r\n          startcnt = inlineAdd ? 0 : 1,\r\n          rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n        for (let i = startcnt; i <= rowcnt; i++) {\r\n          let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n          this.setInvalid(rowIndex);\r\n        }\r\n      } else {\r\n        var _rowIndex5;\r\n        (_rowIndex5 = rowIndex) != null ? _rowIndex5 : rowIndex = \"\";\r\n        for (let field of Object.values(this.fields)) {\r\n          field.element = this.getFieldElements(field.name, rowIndex); // Always get element in case Grid-Add/Edit\r\n          if (rowIndex) field.resetInvalid(); // For Grid-Add/Edit\r\n          if (field.invalid) {\r\n            this.addError(field.name, field.error);\r\n            if (!this._focused) this.focus(); // Focus at the current row\r\n          } else {\r\n            continue;\r\n          }\r\n          ew.setInvalid(field.element);\r\n        }\r\n        // Process detail forms\r\n        if ([\"add\", \"edit\"].includes(this.pageId)) form.querySelectorAll(\"input[name=detailpage]\").forEach(dp => {\r\n          var _ew$forms$get2;\r\n          return (_ew$forms$get2 = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get2.setInvalid();\r\n        });\r\n      }\r\n    };\r\n    _createClass(Form, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n\r\n      /**\r\n       * Check if invalid\r\n       */\r\n    }, {\r\n      key: \"invalid\",\r\n      get: function () {\r\n        return this._error || Object.values(this.fields).some(field => field.invalid);\r\n      }\r\n    }, {\r\n      key: \"keyCount\",\r\n      get: function () {\r\n        var _this$getForm$querySe;\r\n        let keycnt = this.formKeyCountName ? (_this$getForm$querySe = this.getForm().querySelector(\"#\" + this.formKeyCountName)) == null ? void 0 : _this$getForm$querySe.value : undefined; // Get key_count\r\n        return parseInt(keycnt, 10);\r\n      }\r\n    }]);\r\n    return Form;\r\n  }(FormBase);\r\n  _defineProperty(Form, \"autoFocus\", true);\r\n  _defineProperty(Form, \"autoFocusPreventScroll\", true);\r\n  _defineProperty(Form, \"focusDelay\", 200);\n\n  /**\r\n   * Class FormBuilder\r\n   */\r\n  let FormBuilder = /*#__PURE__*/function () {\r\n    function FormBuilder() {\r\n      _defineProperty(this, \"lists\", {});\r\n      _defineProperty(this, \"fields\", []);\r\n      _defineProperty(this, \"validateRequired\", false);\r\n      _defineProperty(this, \"multiPage\", false);\r\n      _defineProperty(this, \"submitWithFetch\", false);\r\n      _defineProperty(this, \"initSearchPanel\", false);\r\n      _defineProperty(this, \"enableOnInit\", false);\r\n    }\r\n    var _proto = FormBuilder.prototype;\r\n    // Set ID\r\n    _proto.setId = function setId(value) {\r\n      this.id = value;\r\n      return this;\r\n    }\r\n\r\n    // Set page ID\r\n    ;\r\n    _proto.setPageId = function setPageId(value) {\r\n      this.pageId = value;\r\n      return this;\r\n    }\r\n\r\n    // Set lists\r\n    ;\r\n    _proto.setLists = function setLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) this.lists = value;\r\n      return this;\r\n    }\r\n\r\n    // Set lists for query builder (Dynamic Selection Lists and AutoFill not supported since there can be multiple inputs for the same field)\r\n    ;\r\n    _proto.setQueryBuilderLists = function setQueryBuilderLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) {\r\n        for (let [id, list] of Object.entries(value)) value[id] = {\r\n          ...list,\r\n          ...{\r\n            autoFillTargetFields: [],\r\n            childFields: [],\r\n            filterFieldVars: [],\r\n            filterFields: [],\r\n            parentFields: []\r\n          }\r\n        };\r\n        this.lists = value;\r\n      }\r\n      return this;\r\n    }\r\n\r\n    // Add list\r\n    ;\r\n    _proto.addList = function addList(name, value) {\r\n      this.lists[name] = value;\r\n      return this;\r\n    }\r\n\r\n    // Set fields\r\n    ;\r\n    _proto.setFields = function setFields(value) {\r\n      if (Array.isArray(value)) this.fields = value;\r\n      return this;\r\n    }\r\n\r\n    // Add field\r\n    ;\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!this.fields.find(field => field[0] == fldvar)) this.fields.push([fldvar, validators, invalid]);\r\n      return this;\r\n    }\r\n\r\n    // Add fields\r\n    ;\r\n    _proto.addFields = function addFields(value) {\r\n      if (Array.isArray(value)) this.fields = [...this.fields, ...value];\r\n      return this;\r\n    }\r\n\r\n    // Set validate\r\n    ;\r\n    _proto.setValidate = function setValidate(value) {\r\n      this.validate = value;\r\n      return this;\r\n    }\r\n\r\n    // Set custom validate\r\n    ;\r\n    _proto.setCustomValidate = function setCustomValidate(value) {\r\n      this.customValidate = value;\r\n      return this;\r\n    }\r\n\r\n    // Set validate required\r\n    ;\r\n    _proto.setValidateRequired = function setValidateRequired(value) {\r\n      this.validateRequired = value;\r\n      return this;\r\n    }\r\n\r\n    // Set submit\r\n    ;\r\n    _proto.setSubmit = function setSubmit(value) {\r\n      this.submit = value;\r\n      return this;\r\n    }\r\n\r\n    // Set form KeyCount name\r\n    ;\r\n    _proto.setFormKeyCountName = function setFormKeyCountName(value) {\r\n      this.formKeyCountName = value;\r\n      return this;\r\n    }\r\n\r\n    // Set empty row\r\n    ;\r\n    _proto.setEmptyRow = function setEmptyRow(value) {\r\n      this.emptyRow = value;\r\n      return this;\r\n    }\r\n\r\n    // Set multi page\r\n    ;\r\n    _proto.setMultiPage = function setMultiPage(value) {\r\n      this.multiPage = value;\r\n      return this;\r\n    }\r\n\r\n    // Set submit with Fetch API\r\n    ;\r\n    _proto.setSubmitWithFetch = function setSubmitWithFetch(value) {\r\n      this.submitWithFetch = value;\r\n      return this;\r\n    }\r\n\r\n    // Set filter list\r\n    ;\r\n    _proto.setFilterList = function setFilterList(value) {\r\n      this.filterList = value;\r\n      return this;\r\n    }\r\n\r\n    // Set initSearchPanel\r\n    ;\r\n    _proto.setInitSearchPanel = function setInitSearchPanel(value) {\r\n      this.initSearchPanel = value;\r\n      return this;\r\n    }\r\n\r\n    // Set enableOnInit\r\n    ;\r\n    _proto.setEnableOnInit = function setEnableOnInit(value) {\r\n      this.enableOnInit = value;\r\n      return this;\r\n    }\r\n\r\n    // Build\r\n    ;\r\n    _proto.build = function build() {\r\n      let form = new ew.Form(this.id, this.pageId);\r\n      if (Array.isArray(this.fields)) form.addFields(this.fields);\r\n      if (typeof this.validate == 'function') form.validate = this.validate;\r\n      if (typeof this.customValidate == 'function') form.customValidate = this.customValidate;\r\n      if (typeof this.emptyRow == 'function') form.emptyRow = this.emptyRow;\r\n      if (typeof this.submit == 'function') form.submit = this.submit;\r\n      if (this.formKeyCountName) form.formKeyCountName = this.formKeyCountName;\r\n      if (this.multiPage) form.multiPage = new ew.MultiPage(this.id);\r\n      if (this.enableOnInit) form.enableOnInit = true;\r\n      if (this.submitWithFetch) {\r\n        form.submitWithFetch = true;\r\n        form.on(\"aftersubmit\", (e, args) => ew.refresh(args == null ? void 0 : args.result, args == null ? void 0 : args.context));\r\n      }\r\n      if (this.filterList) form.filterList = this.filterList;\r\n      if (this.lists) form.lists = this.lists;\r\n      form.validateRequired = !!this.validateRequired;\r\n      form.initSearchPanel = !!this.initSearchPanel;\r\n      form.lists = this.lists;\r\n      return form;\r\n    };\r\n    return FormBuilder;\r\n  }();\n\n  // AjaxLookup class\r\n  let AjaxLookup = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {Object} settings Settings\r\n     * @param {string} settings.id - Input element ID\r\n     * @param {string|Form} settings.form - Form of the input element\r\n     * @param {Number} settings.limit - Options per page\r\n     * @param {Object} settings.data - Data submitted by Ajax\r\n     * @param {string} settings.action - Ajax action: \"autosuggest\" or \"modal\"\r\n     */\r\n    function AjaxLookup(settings) {\r\n      var _this$list$parentFiel, _this$list$parentFiel2;\r\n      _defineProperty(this, \"_isAutoSuggest\", null);\r\n      this.elementId = settings.id; // Id\r\n      this.form = settings.form; // Form\r\n      if ($__default.default.isString(this.form))\r\n        // Form is string => Form id\r\n        this.form = ew.forms.get(this.form);\r\n      this.element = this.form.getElement(this.elementId); // Actual HTML element\r\n      this.formElement = this.form.getElement(); // HTML form or DIV\r\n      this.list = this.form.getList(this.element);\r\n      let m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\r\n        rowindex = m ? m[1] : \"\";\r\n      this.parentFields = (_this$list$parentFiel = (_this$list$parentFiel2 = this.list.parentFields) == null ? void 0 : _this$list$parentFiel2.slice() // Clone\r\n      .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf)) != null ? _this$list$parentFiel : []; // Parent field in the same table, add row index\r\n      this.limit = settings.limit;\r\n      this.debounce = settings.debounce;\r\n      this.data = settings.data;\r\n      this.recordCount = 0;\r\n      this.action = settings.action || \"autosuggest\";\r\n    }\r\n\r\n    /**\r\n     * Is AutoSuggest\r\n     */\r\n    var _proto = AjaxLookup.prototype;\r\n    /**\r\n     * Format display value\r\n     * @param {Array} opt Option\r\n     */\r\n    _proto.formatResult = function formatResult(opt) {\r\n      this.form.compileTemplates();\r\n      return this.list.template && !this.isAutoSuggest ? this.list.template.render(opt, ew.jsRenderHelpers) : ew.displayValue(opt, this.element) || opt[0];\r\n    }\r\n\r\n    /**\r\n     * Generate request\r\n     */;\r\n    _proto.generateRequest = function generateRequest() {\r\n      var _data$ajax;\r\n      var data = Object.assign({}, this.data, {\r\n        name: this.element.name,\r\n        page: this.list.page,\r\n        field: this.list.field,\r\n        language: ew.LANGUAGE_ID\r\n      }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\r\n      (_data$ajax = data.ajax) != null ? _data$ajax : data.ajax = this.action;\r\n      if (this.parentFields.length > 0) this.parentFields.forEach((pf, i) => data[\"v\" + (i + 1)] = ew.getOptionValue(pf, this.formElement));\r\n      return data;\r\n    }\r\n\r\n    /**\r\n     * Get URL\r\n     */;\r\n    _proto.getUrl = function getUrl(query, start) {\r\n      let params = new URLSearchParams({\r\n        q: query || \"\",\r\n        n: this.limit,\r\n        rnd: ew.random(),\r\n        start: $__default.default.isNumber(start) ? start : -1\r\n      });\r\n      return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\r\n    }\r\n\r\n    /**\r\n     * Prepare URL and data for sending request\r\n     * @param {string} query Search term\r\n     * @param {Number} start Start page\r\n     */;\r\n    _proto.prepare = function prepare(query, start) {\r\n      return {\r\n        url: this.getUrl(query, start),\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: this.generateRequest()\r\n      };\r\n    }\r\n\r\n    /**\r\n     * Transform options (virtual)\r\n     * @param {Object[]} data Data from server\r\n     */;\r\n    _proto.transform = function transform(data) {\r\n      let results = [];\r\n      if ((data == null ? void 0 : data.result) == \"OK\") {\r\n        this.recordCount = data.totalRecordCount;\r\n        results = data.records;\r\n      }\r\n      return results;\r\n    }\r\n\r\n    /**\r\n     * Convert options to Select2 data format\r\n     * @param {Object[]} options Options\r\n     * @returns {Object[]}\r\n     */;\r\n    _proto.toSelect2Data = function toSelect2Data(options) {\r\n      if (Array.isArray(options)) {\r\n        if (options.every(item => item.hasOwnProperty(\"gf\"))) {\r\n          // Has group by field\r\n          let groups = [...new Set(options.map(item => item.gf))];\r\n          return groups.map(group => {\r\n            return {\r\n              text: group,\r\n              children: options.filter(item => item.gf == group).map(item => {\r\n                return {\r\n                  id: item.lf,\r\n                  text: this.formatResult({\r\n                    lf: item.lf,\r\n                    df: item.df,\r\n                    df2: item.df2,\r\n                    df3: item.df3,\r\n                    df4: item.df4\r\n                  })\r\n                };\r\n              })\r\n            };\r\n          });\r\n        } else {\r\n          return options.map(item => {\r\n            return {\r\n              id: item.lf,\r\n              text: this.formatResult({\r\n                lf: item.lf,\r\n                df: item.df,\r\n                df2: item.df2,\r\n                df3: item.df3,\r\n                df4: item.df4\r\n              })\r\n            };\r\n          });\r\n        }\r\n      }\r\n      return options;\r\n    };\r\n    _createClass(AjaxLookup, [{\r\n      key: \"isAutoSuggest\",\r\n      get: function () {\r\n        var _this$_isAutoSuggest;\r\n        (_this$_isAutoSuggest = this._isAutoSuggest) != null ? _this$_isAutoSuggest : this._isAutoSuggest = ew.isAutoSuggest(this.element);\r\n        return this._isAutoSuggest;\r\n      }\r\n\r\n      /**\r\n       * Lookup options\r\n       */\r\n    }, {\r\n      key: \"options\",\r\n      get: function () {\r\n        return this.list.lookupOptions;\r\n      }\r\n    }]);\r\n    return AjaxLookup;\r\n  }();\n\n  // AutoSuggest class\r\n  let AutoSuggest = /*#__PURE__*/function (_AjaxLookup) {\r\n    _inheritsLoose(AutoSuggest, _AjaxLookup);\r\n    function AutoSuggest(settings) {\r\n      var _this;\r\n      _this = _AjaxLookup.call(this, settings) || this;\r\n      _this.input = _this.form.getElement(\"sv_\" + _this.elementId); // User input\r\n      if (!_this.input || _this.elementId.includes(\"$rowindex$\")) return _assertThisInitialized(_this);\r\n      let self = _assertThisInitialized(_this),\r\n        $input = $__default.default(_this.input),\r\n        $element = $__default.default(_this.element);\r\n\r\n      // Properties\r\n      _this.minWidth = settings.minWidth;\r\n      _this.maxHeight = settings.maxHeight;\r\n      _this.highlight = settings.highlight;\r\n      _this.hint = settings.hint;\r\n      _this.minLength = settings.minLength;\r\n      _this.templates = Object.assign({}, settings.templates);\r\n      _this.classNames = Object.assign({}, settings.classNames);\r\n      _this.delay = settings.delay; // For loading more results\r\n      _this.debounce = settings.debounce;\r\n      _this.display = settings.display || \"text\";\r\n      _this.forceSelection = settings.forceSelect;\r\n      _this.lineHeight = settings.lineHeight;\r\n      _this.paddingY = settings.paddingY;\r\n      _this.lookupAllDisplayFields = settings.lookupAllDisplayFields;\r\n      _this.$input = $input;\r\n      _this.$element = $element;\r\n\r\n      // Save instance\r\n      $element.data(\"autosuggest\", _assertThisInitialized(_this));\r\n\r\n      // Save initial option\r\n      if ($input.val() && $element.val()) _this.element.add($element.val(), $input.val(), true);\r\n\r\n      // Add events\r\n      $input.on(\"typeahead:select\", (e, d) => {\r\n        self.setValue(d[self.display]);\r\n      }).on(\"change\", () => {\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen() && !ta.menu.empty()) {\r\n          let $item = ta.menu.getActiveSelectable();\r\n          if ($item) {\r\n            // A suggestion is highlighted\r\n            let i = $item.index(),\r\n              val = self.element.options[i].text;\r\n            $input.typeahead(\"val\", val);\r\n          }\r\n        }\r\n        self.setValue();\r\n      }).on(\"blur\", () => {\r\n        // \"change\" fires before blur\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen()) ta.menu.close();\r\n      }).on(\"focus\", () => {\r\n        $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\r\n        $element.removeClass(\"is-invalid\");\r\n      });\r\n\r\n      // Get suggestions\r\n      let async = !_this.options.length,\r\n        loadingMore = false,\r\n        timer;\r\n\r\n      // Option template (\"suggestion\" template)\r\n      let tpl = self.list.template || self.templates.suggestion;\r\n      if (tpl && $__default.default.isString(tpl)) tpl = $__default.default.templates(tpl);\r\n      if (tpl) self.templates.suggestion = tpl.render.bind(tpl);\r\n      if (async && !self.templates.footer) self.templates.footer = '<div class=\"tt-footer dropdown-item\"><div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase(\"LoadingMore\") + '</span></div></div>'; // \"footer\" template\r\n\r\n      let source = (query, syncResults, asyncResults) => {\r\n        if (async) {\r\n          if (timer) timer.cancel();\r\n          timer = $__default.default.later(_this.debounce, null, () => {\r\n            _this.recordCount = 0; // Reset\r\n            $__default.default.ajax(_this.prepare(query)).done(data => asyncResults(_this.transform(data)));\r\n          });\r\n        } else {\r\n          let records = _this.getSyncResults(query);\r\n          syncResults(_this.transform({\r\n            result: \"OK\",\r\n            totalRecordCount: records.length,\r\n            records\r\n          }));\r\n        }\r\n      };\r\n\r\n      // Create Typeahead\r\n      $__default.default(function () {\r\n        // Typeahead options and dataset\r\n        let options = {\r\n          highlight: self.highlight,\r\n          minLength: self.minLength,\r\n          hint: self.hint,\r\n          classNames: self.classNames\r\n        };\r\n        let dataset = {\r\n          name: self.form.id + \"-\" + self.elementId,\r\n          source,\r\n          async,\r\n          templates: self.templates,\r\n          display: self.display,\r\n          limit: async ? self.limit : Infinity\r\n        };\r\n        let args = [options, dataset];\r\n        // Trigger \"typeahead\" event\r\n        $element.trigger(\"typeahead\", [args]);\r\n        // Create Typeahead\r\n        self.typeahead = $input.typeahead.apply($input, args).off(\"blur.tt\").data(\"tt-typeahead\");\r\n        let menu = self.typeahead.menu,\r\n          $menu = menu.$node,\r\n          $dataset = $menu.find(\".tt-dataset\"),\r\n          suggestionHeight = () => $menu.find(\".tt-suggestion\").outerHeight(false);\r\n        if (self.minWidth) $menu.css(\"min-width\", self.minWidth);\r\n        $input.on(\"typeahead:rendered\", (e, suggestions) => {\r\n          let rendered = suggestions.length,\r\n            count = self.count;\r\n          if (count >= self.limit) {\r\n            let h = suggestionHeight();\r\n            if (h) $dataset.css(\"max-height\", h * self.limit);\r\n          }\r\n          if (rendered > 0) $dataset.scrollTop(suggestionHeight() * (count - rendered)); // Scroll to the first suggestion\r\n          if (async) $menu.find(\".tt-footer\").toggle(self.recordCount > count);\r\n        });\r\n        if (async) {\r\n          let loadingMoreTimer;\r\n          $dataset.on(\"scroll\", () => {\r\n            var _loadingMoreTimer;\r\n            (_loadingMoreTimer = loadingMoreTimer) == null ? void 0 : _loadingMoreTimer.cancel();\r\n            loadingMoreTimer = $__default.default.later(self.delay, null, () => {\r\n              let $footer = $menu.find(\".tt-footer\");\r\n              if (!$footer.is(\":hidden\") && !loadingMore) {\r\n                let currentOffset = $dataset.offset().top + $dataset.outerHeight(false),\r\n                  loadingMoreOffset = $footer.offset().top + $footer.outerHeight(false);\r\n                if (currentOffset + 20 > loadingMoreOffset) {\r\n                  // $footer shows more than 20px\r\n                  loadingMore = true;\r\n                  self.getMore().always(() => loadingMore = false);\r\n                } else {\r\n                  var _loadingMoreTimer2;\r\n                  (_loadingMoreTimer2 = loadingMoreTimer) == null ? void 0 : _loadingMoreTimer2.cancel();\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n      return _this;\r\n    }\r\n\r\n    // Set the selected item to the actual field\r\n    var _proto = AutoSuggest.prototype;\r\n    _proto.setValue = function setValue(v) {\r\n      v || (v = this.$input.val());\r\n      let index = this.element.options.findIndex(option => option.text == v);\r\n      if (index < 0) {\r\n        // Not found in results\r\n        if (this.forceSelection && v) {\r\n          // Force selection and query not empty => error\r\n          this.$input.typeahead(\"val\", \"\").addClass(\"is-invalid\");\r\n          this.$element.next(\".invalid-feedback\").html(ew.language.phrase(\"ValueNotExist\"));\r\n          this.$element.addClass(\"is-invalid\").val(\"\").trigger(\"change\");\r\n          return;\r\n        }\r\n      } else {\r\n        // Found in results\r\n        this.element.options[index].selected = true;\r\n        if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection)\r\n          // Force selection or not search form\r\n          v = this.element.options[index].value; // Replace the display value by Link Field value\r\n      }\r\n\r\n      if (v !== this.$element.attr(\"value\")) this.$element.attr(\"value\", v).trigger(\"change\"); // Set value to the actual field\r\n    }\r\n\r\n    // Transform suggestion\r\n    ;\r\n    _proto.transform = function transform(data) {\r\n      let results = _AjaxLookup.prototype.transform.call(this, data).map(item => Object.assign({}, item, {\r\n        text: _AjaxLookup.prototype.formatResult.call(this, item)\r\n      }));\r\n      this.element.options = results.map(item => new ew.SelectionListOption(item.text, item.lf || item[0]));\r\n      return results;\r\n    }\r\n\r\n    // Get current suggestion count\r\n    ;\r\n    // Get suggestions from lookup cache\r\n    _proto.getSyncResults = function getSyncResults(query) {\r\n      if (this.options.length) {\r\n        let results = this.options.filter(item => {\r\n          if (this.lookupAllDisplayFields) {\r\n            let v = [item.df, item.df2, item.df3, item.df4].map(df => String(df).toLowerCase()).join(\" \");\r\n            return query.toLowerCase().split(\" \").filter(q => q !== \"\").every(q => v.includes(q));\r\n          } else {\r\n            return String(item.df).toLowerCase().startsWith(query);\r\n          }\r\n        });\r\n        this.recordCount = results.length;\r\n        return results;\r\n      }\r\n      return [];\r\n    }\r\n\r\n    // Get more suggestions by Ajax\r\n    ;\r\n    _proto.getMore = function getMore() {\r\n      let menu = this.typeahead.menu,\r\n        start = this.count,\r\n        settings = this.prepare(menu.query, start);\r\n      return $__default.default.ajax(settings).done(data => menu.datasets[0]._append(menu.query, this.transform(data)));\r\n    };\r\n    _createClass(AutoSuggest, [{\r\n      key: \"count\",\r\n      get: function () {\r\n        return this.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length || 0;\r\n      }\r\n    }]);\r\n    return AutoSuggest;\r\n  }(AjaxLookup);\n\n  /**\r\n   * Class Forms\r\n   */\r\n  let Forms = /*#__PURE__*/function () {\r\n    function Forms() {\r\n      _defineProperty(this, \"_forms\", {});\r\n    }\r\n    var _proto = Forms.prototype;\r\n    /**\r\n     * Get form by element or id\r\n     * @param {HTMLElement|string} el Element or id\r\n     */\r\n    _proto.get = function get(el) {\r\n      var _ew$getForm;\r\n      if (!el) return null;\r\n      let id = $__default.default.isString(el) ? el : (_ew$getForm = ew.getForm(el)) == null ? void 0 : _ew$getForm.id;\r\n      return this._forms[id];\r\n    }\r\n\r\n    /**\r\n     * Add form\r\n     * @param {Form} f Form\r\n     */;\r\n    _proto.add = function add(f) {\r\n      if (this._forms[f.id] && this._forms[f.id] !== f) delete this._forms[f.id];\r\n      this._forms[f.id] = f;\r\n    }\r\n\r\n    /**\r\n     * Get all ids\r\n     * @returns {string[]}\r\n     */;\r\n    _proto.ids = function ids() {\r\n      return Object.keys(this._forms);\r\n    };\r\n    return Forms;\r\n  }();\n\n  let lang = ew.language.phrase(\"select2\");\r\n  var Select2Language = {\r\n    errorLoading: function () {\r\n      return lang.errorLoading;\r\n    },\r\n    inputTooLong: function (args) {\r\n      var overChars = args.input.length - args.maximum;\r\n      return lang.inputTooLong.replace(\"%s\", overChars);\r\n    },\r\n    inputTooShort: function (args) {\r\n      var remainingChars = args.minimum - args.input.length;\r\n      return lang.inputTooShort.replace(\"%s\", remainingChars);\r\n    },\r\n    loadingMore: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.loadingMore + '</span></div>';\r\n    },\r\n    maximumSelected: function (args) {\r\n      return lang.maximumSelected.replace(\"%s\", args.maximum);\r\n    },\r\n    noResults: function () {\r\n      return lang.noResults;\r\n    },\r\n    searching: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.searching + '</span></div>';\r\n    },\r\n    removeAllItems: function () {\r\n      return lang.removeAllItems;\r\n    },\r\n    removeItem: function () {\r\n      return lang.removeItem;\r\n    },\r\n    search: function () {\r\n      return lang.search;\r\n    }\r\n  };\n\n  let _defined$3 = $__default.default.fn.select2.amd.require._defined,\r\n    Utils$3 = _defined$3['select2/utils'];\r\n\r\n  /**\r\n   * Select2 decorator for Results\r\n   */\r\n  let Select2ResultsDecorator = /*#__PURE__*/function () {\r\n    function Select2ResultsDecorator() {}\r\n    var _proto = Select2ResultsDecorator.prototype;\r\n    _proto.render = function render(decorated) {\r\n      var $results = $__default.default('<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'); //***\r\n\r\n      if (this.options.get('multiple')) {\r\n        $results.attr('aria-multiselectable', 'true');\r\n      }\r\n      this.$results = $results;\r\n      return $results;\r\n    };\r\n    _proto.displayMessage = function displayMessage(decorated, params) {\r\n      var escapeMarkup = this.options.get('escapeMarkup');\r\n      this.clear();\r\n      this.hideLoading();\r\n      var $message = $__default.default('<div role=\"alert\" aria-live=\"assertive\"' + ' class=\"select2-results__option\"></div>'); //***\r\n\r\n      if (params.message.includes(\"<\") && params.message.includes(\">\")) {\r\n        // HTML //***\r\n        $message.append(params.message);\r\n      } else {\r\n        var message = this.options.get('translations').get(params.message);\r\n        $message.append(escapeMarkup(message(params.args)));\r\n      }\r\n      $message[0].className += ' select2-results__message';\r\n      this.$results.append($message);\r\n    };\r\n    _proto.append = function append(decorated, data) {\r\n      this.hideLoading();\r\n      if (data.results == null || data.results.length === 0) {\r\n        if (this.$results.children().length === 0) {\r\n          if (this.$element.data(\"updating\") && data.pagination.more) {\r\n            this.trigger('results:message', {\r\n              message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\r\n            });\r\n            this.$element.one(\"updated\", () => this.$element.select2(\"close\").select2(\"open\"));\r\n          } else {\r\n            this.trigger('results:message', {\r\n              message: 'noResults'\r\n            });\r\n          }\r\n        }\r\n        return;\r\n      }\r\n      data.results = this.sort(data.results);\r\n\r\n      //***\r\n      var cols = this.options.get('columns'),\r\n        len = data.results.length,\r\n        $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\r\n      for (var d = 0; d < data.results.length; d++) {\r\n        var item = data.results[d];\r\n        var $option = this.option(item);\r\n        if (!$row.length || $row.children().length == cols) {\r\n          // Add new row\r\n          $row = $__default.default('<div class=\"' + this.options.get('rowClass') + '\"></div>');\r\n          this.$results.append($row);\r\n        }\r\n        $row.append($option);\r\n        if (d == len - 1) {\r\n          // Last\r\n          var cnt = cols - $row.children().length;\r\n          for (var i = 0; i < cnt; i++) $row.append('<div class=\"' + this.options.get('cellClass') + '\"></div>');\r\n        }\r\n      }\r\n    };\r\n    _proto.option = function option(decorated, data) {\r\n      // var option = document.createElement('li');\r\n      var option = document.createElement('div'); //***\r\n      option.classList.add('select2-results__option');\r\n      option.classList.add('select2-results__option--selectable');\r\n      this.options.get('cellClass').split(\" \").forEach(c => option.classList.add(c)); //***\r\n\r\n      var attrs = {\r\n        'role': 'option',\r\n        'aria-selected': 'false'\r\n      };\r\n      var matches = window.Element.prototype.matches || window.Element.prototype.msMatchesSelector || window.Element.prototype.webkitMatchesSelector;\r\n      if (data.element != null && matches.call(data.element, ':disabled') || data.element == null && data.disabled) {\r\n        attrs['aria-disabled'] = 'true';\r\n        option.classList.remove('select2-results__option--selectable');\r\n        option.classList.add('select2-results__option--disabled');\r\n      }\r\n      if (data.id == null) {\r\n        option.classList.remove('select2-results__option--selectable');\r\n      }\r\n      if (data._resultId != null) {\r\n        option.id = data._resultId;\r\n      }\r\n      if (data.title) {\r\n        option.title = data.title;\r\n      }\r\n\r\n      // if (data.children) { //***\r\n      //   attrs.role = 'group';\r\n      //   attrs['aria-label'] = data.text;\r\n      //   option.classList.remove('select2-results__option--selectable');\r\n      //   option.classList.add('select2-results__option--group');\r\n      // }\r\n\r\n      for (var attr in attrs) {\r\n        var val = attrs[attr];\r\n        option.setAttribute(attr, val);\r\n      }\r\n\r\n      // if (data.children) { //***\r\n      //   var $option = $(option);\r\n\r\n      //   var label = document.createElement('strong');\r\n      //   label.className = 'select2-results__group';\r\n\r\n      //   this.template(data, label);\r\n\r\n      //   var $children = [];\r\n\r\n      //   for (var c = 0; c < data.children.length; c++) {\r\n      //     var child = data.children[c];\r\n\r\n      //     var $child = this.option(child);\r\n\r\n      //     $children.push($child);\r\n      //   }\r\n\r\n      //   var $childrenContainer = $('<ul></ul>', {\r\n      //     'class': 'select2-results__options select2-results__options--nested',\r\n      //     'role': 'none'\r\n      //   });\r\n\r\n      //   $childrenContainer.append($children);\r\n\r\n      //   $option.append(label);\r\n      //   $option.append($childrenContainer);\r\n      // } else {\r\n      this.template(data, option);\r\n      // }\r\n\r\n      Utils$3.StoreData(option, 'data', data);\r\n      return option;\r\n    };\r\n    return Select2ResultsDecorator;\r\n  }();\n\n  let _defined$2 = $__default.default.fn.select2.amd.require._defined,\r\n    Utils$2 = _defined$2['select2/utils'];\r\n\r\n  /**\r\n   * Results for modal lookup\r\n   */\r\n  let ModalResults = /*#__PURE__*/function () {\r\n    function ModalResults() {}\r\n    var _proto = ModalResults.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n\r\n      // Remove handlers\r\n      (_container$listeners$ = container.listeners['results:select']) == null ? void 0 : _container$listeners$.pop();\r\n      this.$results.off('mouseup');\r\n      container.on('results:select', function (evt) {\r\n        var $highlighted = self.getHighlightedResults();\r\n        if ($highlighted.length === 0) {\r\n          return;\r\n        }\r\n        var data = Utils$2.GetData($highlighted[0], 'data');\r\n        if ($highlighted.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        } else {\r\n          self.trigger('select', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        }\r\n      });\r\n      this.$results.on('mousedown', '.select2-results__option--selectable', function (evt) {\r\n        this._mousedown = true;\r\n      });\r\n      this.$results.on('mouseup', '.select2-results__option--selectable', function (evt) {\r\n        if (!this._mousedown) return;\r\n        var $this = $__default.default(this);\r\n        var data = Utils$2.GetData(this, 'data');\r\n        if ($this.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n          return;\r\n        }\r\n        self.trigger('select', {\r\n          originalEvent: evt,\r\n          data: data\r\n        });\r\n      });\r\n    };\r\n    return ModalResults;\r\n  }();\n\n  /**\r\n   * Search box for modal lookup\r\n   */\r\n  let ModalSearch = /*#__PURE__*/function () {\r\n    function ModalSearch() {}\r\n    var _proto = ModalSearch.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      (_container$listeners$ = container.listeners['close']) == null ? void 0 : _container$listeners$.pop(); // Remove handler from Search\r\n\r\n      container.on('close', function () {\r\n        self.$search.attr('tabindex', -1).removeAttr('aria-controls').removeAttr('aria-activedescendant');\r\n      });\r\n    };\r\n    return ModalSearch;\r\n  }();\n\n  /**\r\n   * Dropdown search decorator\r\n   */\r\n  let KEYS = $.fn.select2.amd.require._defined['select2/keys'];\r\n  KEYS.PRINT_SCREEN = 44;\r\n  let DropdownSearchDecorator = /*#__PURE__*/function () {\r\n    function DropdownSearchDecorator() {}\r\n    var _proto = DropdownSearchDecorator.prototype;\r\n    _proto.handleSearch = function handleSearch(decorated, evt) {\r\n      var key = evt.which;\r\n\r\n      // Ignore events from modifier keys\r\n      if ([KEYS.TAB, KEYS.SHIFT, KEYS.CTRL, KEYS.ALT, KEYS.PRINT_SCREEN].includes(key)) {\r\n        return;\r\n      }\r\n      if (!this._keyUpPrevented) {\r\n        var input = this.$search.val();\r\n        this.trigger('query', {\r\n          term: input\r\n        });\r\n      }\r\n      this._keyUpPrevented = false;\r\n    };\r\n    return DropdownSearchDecorator;\r\n  }();\n\n  let AttachBody$2 = $__default.default.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody with popper\r\n   */\r\n  let Select2AttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(Select2AttachBody, _AttachBody);\r\n    // Constructor\r\n    function Select2AttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override _attachPositioningHandler\r\n    var _proto = Select2AttachBody.prototype;\r\n    _proto._attachPositioningHandler = function _attachPositioningHandler(decorated, container) {\r\n      var self = this;\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      var handler = () => {\r\n        self._positionDropdown();\r\n        self._resizeDropdown();\r\n      };\r\n      $__default.default(window).on(events.join(' '), handler);\r\n      container.$element.closest('.modal').on('scroll.select2.' + container.id, handler);\r\n    };\r\n    // Override _detachPositioningHandler\r\n    _proto._detachPositioningHandler = function _detachPositioningHandler(decorated, container) {\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      $__default.default(window).off(events.join(' '));\r\n      container.$element.closest('.modal').off('scroll.select2.' + container.id);\r\n    };\r\n    // Override _showDropdown\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$container[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    };\r\n    // Override _positionDropdown()\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n      (_this$_popper2 = this._popper) == null ? void 0 : _this$_popper2.update();\r\n    }\r\n\r\n    // Override destroy()\r\n    ;\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return Select2AttachBody;\r\n  }(AttachBody$2);\n\n  /**\r\n   * Select2 AttachBody decorator for modal lookup\r\n   */\r\n  let ModalAttachBody = /*#__PURE__*/function () {\r\n    function ModalAttachBody(decorated, $element, options) {\r\n      _defineProperty(this, \"$modal\", null);\r\n      options.set('dropdownParent', $__default.default(document.body));\r\n      decorated.call(this, $element, options);\r\n    }\r\n    var _proto = ModalAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      let self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown.removeClass('select2');\r\n      this.$container = $container;\r\n    };\r\n    _proto.render = function render(decorated) {\r\n      let $container = $__default.default('<span></span>');\r\n      let $dropdown = decorated.call(this);\r\n      $container.append($dropdown);\r\n      this.$dropdownContainer = $container;\r\n      return $container;\r\n    };\r\n    _proto._bindContainerResultHandlers = function _bindContainerResultHandlers(decorated, container) {\r\n      // These should only be bound once\r\n      if (this._containerResultsHandlersBound) {\r\n        return;\r\n      }\r\n      let self = this;\r\n      container.$modal = this.$modal;\r\n      container.on('results:all', function () {\r\n        var _self$$search$;\r\n        self._updateDropdown();\r\n        (_self$$search$ = self.$search[0]) == null ? void 0 : _self$$search$.focus();\r\n      });\r\n      container.on('results:append', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('results:message', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('select', function (e) {\r\n        var _e$originalEvent;\r\n        let target = (_e$originalEvent = e.originalEvent) == null ? void 0 : _e$originalEvent.currentTarget;\r\n        target == null ? void 0 : target.classList.add('select2-results__option--selected');\r\n        self._updateDropdown();\r\n      });\r\n      container.on('unselect', function (e) {\r\n        var _e$originalEvent2;\r\n        let target = (_e$originalEvent2 = e.originalEvent) == null ? void 0 : _e$originalEvent2.currentTarget;\r\n        target == null ? void 0 : target.classList.remove('select2-results__option--selected');\r\n        self._updateDropdown();\r\n      });\r\n      this._containerResultsHandlersBound = true;\r\n    };\r\n    _proto._updateDropdown = function _updateDropdown() {\r\n      if (!this.$modal.find(this.$dropdownContainer)[0]) this.$modal.find('.modal-body').children().detach().end().append(this.$dropdownContainer);\r\n    };\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$$modal;\r\n      let self = this,\r\n        oldValue = this.$element.val();\r\n      this.$dropdownContainer.appendTo(this.options.get('dropdownParent'));\r\n      (_this$$modal = this.$modal) != null ? _this$$modal : this.$modal = $__default.default('#ew-modal-lookup-dialog');\r\n      this._updateDropdown();\r\n      this.$modal.find('.modal-title').empty().append(ew.language.phrase('LookupTitle').replace('%s', this.$element.data('caption')));\r\n      this.$modal.find('.modal-footer button[data-value]').off().on('click', function () {\r\n        if (!$__default.default(this).data('value'))\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n      });\r\n      this.$modal.modal('show').on('hidden.bs.modal', function (event) {\r\n        self.$container.removeClass('select2-container--open');\r\n      }).draggable(this.options.get('draggableOptions'));\r\n    };\r\n    return ModalAttachBody;\r\n  }();\n\n  let AttachBody$1 = $__default.default.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n  let FilterAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(FilterAttachBody, _AttachBody);\r\n    // Constructor\r\n    function FilterAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override bind()\r\n    var _proto = FilterAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    }\r\n\r\n    // Override _positionDropdown()\r\n    ;\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper;\r\n      (_this$_popper = this._popper) == null ? void 0 : _this$_popper.update();\r\n    }\r\n\r\n    // Override _resizeDropdown()\r\n    ;\r\n    _proto._resizeDropdown = function _resizeDropdown() {\r\n      var css = {\r\n        width: this.$container.outerWidth(false) + 'px'\r\n      };\r\n      if (this.options.get('dropdownAutoWidth')) {\r\n        css.minWidth = css.width;\r\n        css.position = 'relative';\r\n        css.width = 'auto';\r\n      }\r\n      this.$dropdown.css(css);\r\n    }\r\n\r\n    // Override _showDropdown()\r\n    ;\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _dropdownButton$close, _this$_popper2;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n\r\n      // Footer\r\n      let self = this,\r\n        oldValue = this.$element.val(),\r\n        $footer = $__default.default('#ew-filter-dropdown-footer').contents().clone();\r\n      $footer.find('.ew-filter-btn[data-value]').off('click.ew').on('click.ew', function (e) {\r\n        let value = $__default.default(this).data('value');\r\n        if (value) {\r\n          // OK\r\n          $__default.default(self.$element[0].form).triggerHandler('submit');\r\n        } else {\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n        }\r\n        self.$element.select2('close');\r\n      });\r\n      $footer.find('.ew-filter-clear').off('click.ew').on('click.ew', e => self.$element.data('select2').selection._handleClear(e));\r\n      let $filterDropdown = this.$dropdownContainer.find('.ew-filter-dropdown');\r\n      if (!$filterDropdown.find('.ew-filter-btn')[0]) $filterDropdown.append($footer);\r\n\r\n      // Popper\r\n      var dropdownButton = document.querySelector('.ew-filter-dropdown-btn[data-table=' + this.$element.data('table') + '][data-field=' + this.$element.data('field') + ']'),\r\n        reference = (_dropdownButton$close = dropdownButton.closest(\".ew-table-header-cell\")) != null ? _dropdownButton$close : dropdownButton.closest(\".ew-table-header-btn\");\r\n      (_this$_popper2 = this._popper) != null ? _this$_popper2 : this._popper = Popper.createPopper(reference, this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    }\r\n\r\n    // Override position()\r\n    ;\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return FilterAttachBody;\r\n  }(AttachBody$1);\n\n  let AttachBody = $__default.default.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody for dropdown\r\n   */\r\n  let DropdownAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(DropdownAttachBody, _AttachBody);\r\n    // Constructor\r\n    function DropdownAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override bind()\r\n    var _proto = DropdownAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    }\r\n\r\n    // Override _showDropdown()\r\n    ;\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$element.parent().find('.select2-container')[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    }\r\n\r\n    // Override _positionDropdown()\r\n    ;\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n      (_this$_popper2 = this._popper) == null ? void 0 : _this$_popper2.update();\r\n    }\r\n\r\n    // Override position()\r\n    ;\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return DropdownAttachBody;\r\n  }(AttachBody);\n\n  let _defined$1 = $__default.default.fn.select2.amd.require._defined,\r\n    AllowClear$1 = _defined$1['select2/selection/allowClear'],\r\n    Utils$1 = _defined$1['select2/utils'];\r\n\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n  let FilterAllowClear = /*#__PURE__*/function (_AllowClear) {\r\n    _inheritsLoose(FilterAllowClear, _AllowClear);\r\n    function FilterAllowClear() {\r\n      return _AllowClear.apply(this, arguments) || this;\r\n    }\r\n    var _proto = FilterAllowClear.prototype;\r\n    // Override _handleClear\r\n    _proto._handleClear = function _handleClear(_, evt) {\r\n      // Ignore the event if it is disabled\r\n      if (this.isDisabled()) {\r\n        return;\r\n      }\r\n      var $clear = this.$selection.find('.select2-selection__clear');\r\n\r\n      // Ignore the event if nothing has been selected\r\n      if ($clear.length === 0) {\r\n        return;\r\n      }\r\n      evt.stopPropagation();\r\n      var data = Utils$1.GetData($clear[0], 'data');\r\n      var previousVal = this.$element.val();\r\n      this.$element.val(this.placeholder.id);\r\n      var unselectData = {\r\n        data: data\r\n      };\r\n      this.trigger('clear', unselectData);\r\n      if (unselectData.prevented) {\r\n        this.$element.val(previousVal);\r\n        return;\r\n      }\r\n      for (var d = 0; d < data.length; d++) {\r\n        unselectData = {\r\n          data: data[d]\r\n        };\r\n\r\n        // Trigger the `unselect` event, so people can prevent it from being\r\n        // cleared.\r\n        this.trigger('unselect', unselectData);\r\n\r\n        // If the event was prevented, don't clear it out.\r\n        if (unselectData.prevented) {\r\n          this.$element.val(previousVal);\r\n          return;\r\n        }\r\n      }\r\n      this.$element.trigger('input').trigger('change');\r\n    };\r\n    return FilterAllowClear;\r\n  }(AllowClear$1);\n\n  /**\r\n   * Select2 decorator for MultipleSelection\r\n   */\r\n  let Select2MultipleSelectionDecorator = /*#__PURE__*/function () {\r\n    function Select2MultipleSelectionDecorator() {}\r\n    var _proto = Select2MultipleSelectionDecorator.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      decorated.call(this, container, $container);\r\n      this.$selection.on('click', '.select2-selection__choice__remove', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n    return Select2MultipleSelectionDecorator;\r\n  }();\n\n  /**\r\n   * Select2 decorator for SelectAdapter\r\n   */\r\n  let Select2DataAdapterDecorator = /*#__PURE__*/function () {\r\n    function Select2DataAdapterDecorator() {}\r\n    var _proto = Select2DataAdapterDecorator.prototype;\r\n    _proto.option = function option(decorated, data) {\r\n      var _data$element;\r\n      var text = data.text,\r\n        html = (_data$element = data.element) == null ? void 0 : _data$element.innerHTML,\r\n        $option = decorated.call(this, data);\r\n\r\n      // Check HTML\r\n      if (text.startsWith('<') && text.endsWith('>')) $option.html(text);else if (html && html != text) $option.html(html);\r\n      return $option;\r\n    };\r\n    return Select2DataAdapterDecorator;\r\n  }();\n\n  // Defined classes from select2\r\n  let _defined = $.fn.select2.amd.require._defined,\r\n    ResultsList = _defined['select2/results'],\r\n    SingleSelection = _defined['select2/selection/single'],\r\n    MultipleSelection = _defined['select2/selection/multiple'],\r\n    Placeholder = _defined['select2/selection/placeholder'],\r\n    AllowClear = _defined['select2/selection/allowClear'],\r\n    SelectionSearch = _defined['select2/selection/search'],\r\n    EventRelay = _defined['select2/selection/eventRelay'],\r\n    Utils = _defined['select2/utils'],\r\n    Translation = _defined['select2/translation'],\r\n    SelectData = _defined['select2/data/select'],\r\n    ArrayData = _defined['select2/data/array'],\r\n    AjaxData = _defined['select2/data/ajax'],\r\n    Tags = _defined['select2/data/tags'],\r\n    Tokenizer = _defined['select2/data/tokenizer'],\r\n    MinimumInputLength = _defined['select2/data/minimumInputLength'],\r\n    MaximumInputLength = _defined['select2/data/maximumInputLength'],\r\n    MaximumSelectionLength = _defined['select2/data/maximumSelectionLength'],\r\n    Dropdown = _defined['select2/dropdown'],\r\n    DropdownSearch = _defined['select2/dropdown/search'],\r\n    HidePlaceholder = _defined['select2/dropdown/hidePlaceholder'],\r\n    InfiniteScroll = _defined['select2/dropdown/infiniteScroll'],\r\n    // AttachBody = _defined['select2/dropdown/attachBody'],\r\n    MinimumResultsForSearch = _defined['select2/dropdown/minimumResultsForSearch'],\r\n    SelectOnClose = _defined['select2/dropdown/selectOnClose'],\r\n    CloseOnSelect = _defined['select2/dropdown/closeOnSelect'],\r\n    DropdownCSS = _defined['select2/dropdown/dropdownCss'],\r\n    TagsSearchHighlight = _defined['select2/dropdown/tagsSearchHighlight'],\r\n    Defaults = _defined['select2/defaults'];\r\n\r\n  // Override select2 Defaults\r\n  Defaults.apply = function (options) {\r\n    options = $.extend(true, {}, this.defaults, options);\r\n    if (options.dataAdapter == null) {\r\n      if (options.ajax != null) {\r\n        options.dataAdapter = AjaxData;\r\n      } else if (options.data != null) {\r\n        options.dataAdapter = ArrayData;\r\n      } else {\r\n        options.dataAdapter = SelectData;\r\n      }\r\n      options.dataAdapter = Utils.Decorate(\r\n      // Override\r\n      options.dataAdapter, Select2DataAdapterDecorator);\r\n      if (options.minimumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MinimumInputLength);\r\n      }\r\n      if (options.maximumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumInputLength);\r\n      }\r\n      if (options.maximumSelectionLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumSelectionLength);\r\n      }\r\n      if (options.tags) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\r\n      }\r\n      if (options.tokenSeparators != null || options.tokenizer != null) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tokenizer);\r\n      }\r\n    }\r\n    if (options.resultsAdapter == null) {\r\n      options.resultsAdapter = ResultsList;\r\n\r\n      // Override\r\n      if (options.columns > 0 && options.customOption) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, Select2ResultsDecorator);\r\n        if (options.iconClass && options.multiple && options.templateResult == ew.selectOptions.templateResult) {\r\n          options._templateResult = options.templateResult;\r\n          options.templateResult = result => result.loading ? result.text : '<div class=\"form-check-input ew-dropdown-check-input\"></div><label class=\"' + options.iconClass + ' ew-dropdown-check-label\">' + options._templateResult(result) + '</label>';\r\n        }\r\n      } else if (options.modal || options.filter) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, ModalResults);\r\n      }\r\n      if (options.ajax != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, InfiniteScroll);\r\n      }\r\n      if (options.placeholder != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, HidePlaceholder);\r\n      }\r\n      if (options.selectOnClose) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, SelectOnClose);\r\n      }\r\n      if (options.tags) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, TagsSearchHighlight);\r\n      }\r\n    }\r\n    if (options.dropdownAdapter == null) {\r\n      if (options.modal || options.filter) {\r\n        options.dropdownAdapter = Utils.Decorate(Dropdown, DropdownSearch);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, ModalSearch);\r\n      } else {\r\n        options.dropdownAdapter = Dropdown;\r\n        if (!options.multiple) {\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearch);\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        }\r\n      }\r\n      if (options.minimumResultsForSearch !== 0) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, MinimumResultsForSearch);\r\n      }\r\n      if (options.closeOnSelect) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, CloseOnSelect);\r\n      }\r\n      if (options.dropdownCssClass != null) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownCSS);\r\n      }\r\n      options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, options.modal ? ModalAttachBody : options.filter ? FilterAttachBody : options.dropdown ? DropdownAttachBody : Select2AttachBody // Override\r\n      );\r\n    }\r\n\r\n    if (options.selectionAdapter == null) {\r\n      if (options.multiple) {\r\n        options.selectionAdapter = MultipleSelection;\r\n        options.selectionAdapter = Utils.Decorate(\r\n        // Override\r\n        options.selectionAdapter, Select2MultipleSelectionDecorator);\r\n      } else {\r\n        options.selectionAdapter = SingleSelection;\r\n      }\r\n\r\n      // Add the placeholder mixin if a placeholder was specified\r\n      if (options.placeholder != null) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, Placeholder);\r\n      }\r\n      if (options.allowClear) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, options.filter ? FilterAllowClear : AllowClear);\r\n      }\r\n      if (options.multiple) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, SelectionSearch);\r\n      }\r\n      options.selectionAdapter = Utils.Decorate(options.selectionAdapter, EventRelay);\r\n    }\r\n    options.translations = new Translation(Select2Language);\r\n    options.dir = ew.IS_RTL ? \"rtl\" : \"ltr\";\r\n    return options;\r\n  };\n\n  let currentUrl = new URL(window.location);\r\n  let forms = new Forms();\r\n  let $document$1 = $__default.default(document),\r\n    $body = $__default.default(\"body\");\r\n  let fieldContainerSelector = \".row, [id^=el_], [class^=el_]\";\r\n\r\n  // Set focus\r\n  Pace.on(\"done\", () => {\r\n    var _forms$get;\r\n    let form = document.querySelector(\".modal.show form.ew-form\") || document.querySelector(\"form.ew-form\");\r\n    (_forms$get = forms.get(form == null ? void 0 : form.id)) == null ? void 0 : _forms$get.tryFocus();\r\n  });\r\n\r\n  // Create select2\r\n  function createSelect(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($__default.default.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.toSelect2Data(lookup.options);\r\n    }\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length, _data$records;\r\n          let self = this;\r\n          return {\r\n            results: lookup.toSelect2Data(lookup.transform(data)),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length = (_data$records = data.records) == null ? void 0 : _data$records.length) != null ? _data$records$length : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $__default.default.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let args = {\r\n      name: options.name,\r\n      options\r\n    };\r\n    $document$1.trigger(\"select2\", [args]);\r\n    let $select = $__default.default(\"select[data-select2-id='\" + options.selectId + \"']\").select2(args.options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin;\r\n      (_$$data$$dropdown$fin = $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search__field\")[0]) == null ? void 0 : _$$data$$dropdown$fin.focus();\r\n    });\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default.default(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n    if (options.minimumResultsForSearch === Infinity) {\r\n      $select.on(\"select2:opening select2:closing\", function () {\r\n        $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search--dropdown\").addClass(\"select2-search--hide\");\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create modal lookup\r\n  function createModalLookup(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($__default.default.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length2, _data$records2;\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length2 = (_data$records2 = data.records) == null ? void 0 : _data$records2.length) != null ? _data$records$length2 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $__default.default.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let $select = $__default.default(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin2;\r\n      (_$$data$$dropdown$fin2 = $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null ? void 0 : _$$data$$dropdown$fin2.focus();\r\n    });\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default.default(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create table header filter\r\n  function createFilter(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($__default.default.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length3, _data$records3;\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length3 = (_data$records3 = data.records) == null ? void 0 : _data$records3.length) != null ? _data$records$length3 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $__default.default.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let $select = $__default.default(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin3;\r\n      (_$$data$$dropdown$fin3 = $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null ? void 0 : _$$data$$dropdown$fin3.focus({\r\n        preventScroll: options.preventScroll\r\n      }); // Do not scroll on focus by default\r\n    });\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default.default(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  }\r\n\r\n  // Init icon tooltip\r\n  function initIcons(e) {\r\n    var _e$target;\r\n    let el = (_e$target = e == null ? void 0 : e.target) != null ? _e$target : document,\r\n      tooltipOptions = {\r\n        ...ew.tooltipOptions,\r\n        container: \"body\",\r\n        trigger: ew.IS_MOBILE ? \"manual\" : \"hover\"\r\n      };\r\n    $__default.default(el).find(\".ew-icon\").closest(\".btn, .ew-home, .ew-row-link:not(.dropdown-item)\").each(function () {\r\n      let $this = $__default.default(this);\r\n      if ($this.hasClass(\"dropdown-toggle\")) {\r\n        let $p = $this.closest(\".btn-group\");\r\n        if ($p.children(\".btn\").length == 1) {\r\n          $p.tooltip({\r\n            ...tooltipOptions,\r\n            title: this.dataset.title || this.title\r\n          }).on(\"mouseleave\", e => {\r\n            var _bootstrap$Tooltip$ge;\r\n            return (_bootstrap$Tooltip$ge = bootstrap.Tooltip.getInstance(e.currentTarget)) == null ? void 0 : _bootstrap$Tooltip$ge.hide();\r\n          });\r\n          $this.next(\".dropdown-menu\").on(\"mouseover\", e => e.stopPropagation());\r\n        }\r\n      } else {\r\n        $this.tooltip(tooltipOptions);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Init password options\r\n  function initPasswordOptions(e) {\r\n    var _e$target2;\r\n    var el = (_e$target2 = e == null ? void 0 : e.target) != null ? _e$target2 : document;\r\n    if ($__default.default.fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\r\n      $__default.default(el).find(\".ew-password-strength\").each(function () {\r\n        var $this = $__default.default(this);\r\n        if (!$this.data(\"pStrength\")) $this.pStrength({\r\n          \"changeBackground\": false,\r\n          \"backgrounds\": [],\r\n          \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\r\n          \"onPasswordStrengthChanged\": function (strength, percentage) {\r\n            var $pst = $__default.default(\"[id='\" + this.attr(\"data-password-strength\") + \"']\"),\r\n              // Do not use #\r\n              $pb = $pst.find(\".progress-bar\");\r\n            if (this.val() && !ew.isMaskedPassword(this)) {\r\n              var pct = percentage + \"%\",\r\n                min = ew.MIN_PASSWORD_STRENGTH,\r\n                valid = percentage >= min;\r\n              if (percentage < min * 0.25) {\r\n                $pb.addClass(\"bg-danger\").removeClass(\"bg-warning bg-info bg-success\");\r\n              } else if (percentage < min * 0.5) {\r\n                $pb.addClass(\"bg-warning\").removeClass(\"bg-danger bg-info bg-success\");\r\n              } else if (percentage < min * 0.75) {\r\n                $pb.addClass(\"bg-primary\").removeClass(\"bg-danger bg-warning bg-success\");\r\n              } else {\r\n                $pb.addClass(\"bg-success\").removeClass(\"bg-danger bg-warning bg-info\");\r\n              }\r\n              $pb.css(\"width\", pct);\r\n              if (percentage > min * 0.5) pct = ew.language.phrase(\"PasswordStrength\").replace(\"%p\", pct);\r\n              $pb.html(pct);\r\n              $pst.removeClass(\"d-none\");\r\n              this.data(\"validated\", valid);\r\n              if (valid) setValid(this[0]);\r\n            } else {\r\n              $pst.addClass(\"d-none\");\r\n              this.data(\"validated\", null);\r\n            }\r\n            $pst.width(this.outerWidth());\r\n          }\r\n        });\r\n      });\r\n    }\r\n    if ($__default.default.fn.pGenerator) {\r\n      $__default.default(el).find(\".ew-password-generator\").each(function () {\r\n        var $this = $__default.default(this);\r\n        if (!$this.data(\"pGenerator\")) $this.pGenerator({\r\n          \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\r\n          \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\r\n          \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\r\n          \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\r\n          \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\r\n          \"onPasswordGenerated\": function (pwd) {\r\n            $__default.default(\"#\" + this.attr(\"data-password-confirm\")).val(pwd);\r\n            $__default.default(\"#\" + this.attr(\"data-password-field\")).val(pwd).trigger(\"change\").trigger(\"focus\").triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get API action URL\r\n   * @param {string|string[]} action - Route as string or array, e.g. \"foo\", [\"foo\", \"1\"]\r\n   * @param {string|string[]|Object|URLSearchParams|FormData} query - Search params, e.g. \"foo=1&bar=2\", [[\"foo\", \"1\"], [\"bar\", \"2\"]], {\"foo\": \"1\", \"bar\": \"2\"}\r\n   */\r\n  function getApiUrl(action, query) {\r\n    var url = ew.PATH_BASE + ew.API_URL,\r\n      params = query instanceof URLSearchParams ? query : new URLSearchParams(query),\r\n      qs = params.toString();\r\n    if ($__default.default.isString(action)) {\r\n      // Route as string\r\n      url += action ? action : \"\";\r\n    } else if (Array.isArray(action)) {\r\n      // Route as array\r\n      var route = action.map(function (v) {\r\n        return encodeURIComponent(v);\r\n      }).join(\"/\");\r\n      url += route ? route : \"\";\r\n    }\r\n    return url + (qs ? \"?\" + qs : \"\");\r\n  }\r\n\r\n  /**\r\n   * Parse URL\r\n   * Note: .search is read only, always use .searchParams to change parameters\r\n   * @param {string} url - URL\r\n   * @returns {Object}\r\n   */\r\n  function parseUrl(url) {\r\n    var _pathname, _hash;\r\n    let pathname, search, hash;\r\n    [pathname, hash] = url.split(\"#\");\r\n    [pathname, search] = pathname.split(\"?\");\r\n    if (!search && pathname.includes(\"=\")) [pathname, search] = [\"\", pathname];\r\n    let obj = {\r\n      url: url,\r\n      pathname: (_pathname = pathname) != null ? _pathname : \"\",\r\n      hash: (_hash = hash) != null ? _hash : \"\",\r\n      searchParams: new URLSearchParams(search)\r\n    };\r\n    Object.defineProperty(obj, \"search\", {\r\n      // Read only\r\n      value: search,\r\n      writable: false,\r\n      enumerable: true\r\n    });\r\n    return obj;\r\n  }\r\n\r\n  /**\r\n   * Create URLSearchParams\r\n   * @param {*} params - search parameters\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function createSearchParams(params) {\r\n    try {\r\n      return new URLSearchParams(params);\r\n    } catch (e) {\r\n      console.log(e);\r\n      return new URLSearchParams();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get URL search parameters\r\n   * @param {string} url - URL\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function getSearchParams(url) {\r\n    return parseUrl(url).searchParams;\r\n  }\r\n\r\n  /**\r\n   * Get a search parameter from URL\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @returns {string} Value\r\n   */\r\n  function getSearchParam(url, name) {\r\n    return getSearchParams(url).get(name);\r\n  }\r\n\r\n  /**\r\n   * Set URL search parameters\r\n   * @param {string} url - URL\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {string} URL\r\n   */\r\n  function setSearchParams(url) {\r\n    let obj = parseUrl(url);\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n    obj.searchParams = mergeSearchParams(obj.searchParams, ...args);\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  /**\r\n   * Merge URL search parameters\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function mergeSearchParams() {\r\n    let searchParams = new URLSearchParams();\r\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n      args[_key2] = arguments[_key2];\r\n    }\r\n    for (const params of args) {\r\n      if ($__default.default.isObject(params) || $__default.default.isString(params) && params) {\r\n        // Note: Array is also object\r\n        let newParams = params instanceof URLSearchParams ? params : createSearchParams(params);\r\n        newParams.forEach((value, key) => searchParams.has(key) ? key.endsWith(\"[]\") ? searchParams.append(key, value) : searchParams.set(key, value) : searchParams.set(key, value));\r\n      }\r\n    }\r\n    return searchParams;\r\n  }\r\n\r\n  /**\r\n   * Set URL search parameter\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @param {string} value - Value\r\n   * @returns {string} URL\r\n   */\r\n  function setSearchParam(url, name, value) {\r\n    return setSearchParams(url, {\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Delete search parameters from URL\r\n   * @param {string} url - URL\r\n   * @param {string[]} names - Names\r\n   * @returns {string} URL\r\n   */\r\n  function deleteSearchParam(url) {\r\n    let obj = parseUrl(url);\r\n    for (var _len3 = arguments.length, names = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\r\n      names[_key3 - 1] = arguments[_key3];\r\n    }\r\n    names.forEach(name => obj.searchParams.delete(name));\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  /**\r\n   * Build URL\r\n   * @param {Object} obj Object { pathname, searchParams, hash }\r\n   * @returns {string} URL\r\n   */\r\n  function buildUrl(obj) {\r\n    let search = obj.searchParams.toString();\r\n    return obj.pathname + (obj.pathname && search ? \"?\" : \"\") + search + (obj.hash ? \"#\" + obj.hash : \"\");\r\n  }\r\n\r\n  /**\r\n   * Set layout parameter to URL\r\n   * Disable layout by adding \"layout=false\"\r\n   * @param {string} url - URL\r\n   * @param {string} value - Layout\r\n   * @returns {string} URL\r\n   */\r\n  function setLayout(url, value) {\r\n    return url && url != \"#\" ? setSearchParams(url, {\r\n      [ew.PAGE_LAYOUT]: String(value)\r\n    }) : url;\r\n  }\r\n\r\n  // Sanitize URL\r\n  function sanitizeUrl(url) {\r\n    let obj = parseUrl(url),\r\n      searchParams = obj.searchParams;\r\n    searchParams.forEach((value, key) => {\r\n      value = decodeURIComponent(value);\r\n      if ([\"<>\", \"<=\", \">=\", \">\", \"<\"].includes(value)) searchParams.set(key, value);else searchParams.set(key, ew.sanitize(value));\r\n    });\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  // Set session timer\r\n  function setSessionTimer() {\r\n    var timeoutTime,\r\n      timer,\r\n      keepAliveTimer,\r\n      counter,\r\n      useKeepAlive = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGEDIN && ew.IS_AUTOLOGIN;\r\n    // Keep alive\r\n    var keepAlive = () => {\r\n      $__default.default.get(getApiUrl(ew.API_SESSION_ACTION), {\r\n        \"rnd\": random()\r\n      }, token => {\r\n        if (token && $__default.default.isObject(token)) {\r\n          // PHP\r\n          ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\r\n          ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\r\n          if (token[\"JWT\"]) ew.API_JWT_TOKEN = token[\"JWT\"];\r\n        }\r\n      });\r\n    };\r\n    // Reset timer\r\n    var resetTimer = () => {\r\n      counter = ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      if (timeoutTime < 0) {\r\n        // Timeout now\r\n        timeoutTime = 0;\r\n        counter = ew.SESSION_TIMEOUT;\r\n      }\r\n      if (timer) timer.cancel(); // Clear timer\r\n    };\r\n    // Timeout\r\n    var timeout = () => {\r\n      if (keepAliveTimer) keepAliveTimer.cancel(); // Stop keep alive\r\n      if (counter > 0) {\r\n        let timerInterval;\r\n        let message = '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\") + '</p>';\r\n        if (message.includes(\"%m\") && message.includes(\"%s\")) {\r\n          message = message.replace(\"%m\", '<span class=\"ew-session-counter-minute\">' + Math.floor(counter / 60) + '</span>');\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter % 60 + '</span>');\r\n        } else if (message.includes(\"%s\")) {\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter + '</span>');\r\n        }\r\n        Swal.fire({\r\n          ...ew.sweetAlertSettings,\r\n          html: message,\r\n          showConfirmButton: true,\r\n          confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n          timer: counter * 1000,\r\n          timerProgressBar: true,\r\n          allowOutsideClick: false,\r\n          allowEscapeKey: false,\r\n          willOpen: () => {\r\n            timerInterval = setInterval(() => {\r\n              let content = Swal.getHtmlContainer(),\r\n                min = content.querySelector(\".ew-session-counter-minute\"),\r\n                sec = content.querySelector(\".ew-session-counter-second\"),\r\n                timeleft = Math.round(Swal.getTimerLeft() / 1000);\r\n              if (min && sec) {\r\n                min.textContent = Math.floor(timeleft / 60);\r\n                sec.textContent = timeleft % 60;\r\n              } else if (sec) {\r\n                sec.textContent = timeleft;\r\n              }\r\n            }, 1000);\r\n          },\r\n          willClose: () => {\r\n            clearInterval(timerInterval);\r\n          }\r\n        }).then(result => {\r\n          if (result.value) {\r\n            // OK button pressed\r\n            keepAlive();\r\n            if (!useKeepAlive && ew.SESSION_TIMEOUT > 0) setTimer();\r\n          } else if (result.dismiss === Swal.DismissReason.timer) {\r\n            // Timeout\r\n            resetTimer();\r\n            window.location = sanitizeUrl(ew.TIMEOUT_URL + \"?expired=1\");\r\n          }\r\n        });\r\n      }\r\n    };\r\n    // Set timer\r\n    var setTimer = () => {\r\n      resetTimer(); // Reset timer first\r\n      timer = $__default.default.later(timeoutTime * 1000, null, timeout);\r\n    };\r\n    if (useKeepAlive) {\r\n      // Keep alive\r\n      var keepAliveInterval = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 ? ew.SESSION_KEEP_ALIVE_INTERVAL : ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      if (keepAliveInterval <= 0) keepAliveInterval = 60;\r\n      keepAliveTimer = $__default.default.later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\r\n    } else {\r\n      if (ew.SESSION_TIMEOUT > 0)\r\n        // Set session timeout\r\n        setTimer();\r\n    }\r\n  }\r\n\r\n  // Init export links\r\n  function initExportLinks(e) {\r\n    var _e$target3;\r\n    let $el = $__default.default((_e$target3 = e == null ? void 0 : e.target) != null ? _e$target3 : document);\r\n    $el.find(\"a.ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").on(\"click\", function (e) {\r\n      let href = this.href;\r\n      if (href && href != \"#\") fileDownload(href, getchartParams());\r\n      e.preventDefault();\r\n    });\r\n    $el.find(\"a.ew-export-link[href].ew-print, a.ew-export-link[href].ew-xml\").each(function () {\r\n      let url = new URL(this.href);\r\n      url.searchParams.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      url.searchParams.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      this.href = url.pathname + url.search; // Add token name and antiforgery token // PHP\r\n    });\r\n  }\r\n\r\n  // Init multi-select checkboxes\r\n  function initMultiSelectCheckboxes(e) {\r\n    var _e$target4;\r\n    var el = (_e$target4 = e == null ? void 0 : e.target) != null ? _e$target4 : document,\r\n      $el = $__default.default(el),\r\n      $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\r\n    var _update = function (id) {\r\n      var $els = $cbs.filter(\"[name^='\" + id + \"_']\"),\r\n        cnt = $els.length,\r\n        len = $els.filter(\":checked\").length;\r\n      $__default.default(\"input[type=checkbox]#\" + id).prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\r\n    };\r\n    $cbs.on(\"click\", e => _update(e.target.name.split(\"_\")[0]));\r\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each((i, el) => _update(el.id)); // Init\r\n  }\r\n\r\n  // Get error from response\r\n  function getError(result) {\r\n    var _result$error, _result$error2;\r\n    return result && (((_result$error = result.error) == null ? void 0 : _result$error.description) || ((_result$error2 = result.error) == null ? void 0 : _result$error2.message) || $__default.default.isString(result.error) && result.error || result.failureMessage ||\r\n    // Check this first\r\n    result.success === false && result.message || null);\r\n  }\r\n\r\n  // Download file\r\n  function fileDownload(href, data) {\r\n    let isHtml = href.includes(\"export=html\") || href.includes(getApiUrl([ew.API_EXPORT_ACTION, \"html\"])),\r\n      swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({\r\n      ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n        _fetch(href, {\r\n          method: data ? \"POST\" : \"GET\",\r\n          body: data || null\r\n        }).then(async response => {\r\n          let ct = response.headers.get(\"Content-Type\");\r\n          if (ct != null && ct.includes(\"json\")) {\r\n            var _getError;\r\n            let result = await response.json(),\r\n              error = (_getError = getError(result)) != null ? _getError : ew.language.phrase(\"FailedToExport\");\r\n            if (error) {\r\n              swal.hideLoading();\r\n              swal.update({\r\n                html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n                showConfirmButton: true\r\n              });\r\n              $document$1.trigger(\"export\", [{\r\n                type: \"fail\",\r\n                url: href\r\n              }]);\r\n            }\r\n          } else {\r\n            let data = isHtml ? await response.text() : await response.blob(),\r\n              url = URL.createObjectURL(isHtml ? new Blob([data], {\r\n                type: \"text/html\"\r\n              }) : data),\r\n              a = document.createElement(\"a\"),\r\n              cd = response.headers.get(\"Content-Disposition\"),\r\n              m = cd == null ? void 0 : cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\r\n            a.style.display = \"none\";\r\n            a.href = url;\r\n            if (m) a.download = m[3] || m[4];\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              url: href,\r\n              objectUrl: url\r\n            }]);\r\n            URL.revokeObjectURL(url);\r\n            swal.close();\r\n          }\r\n        }).catch(error => {\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            url: href\r\n          }]);\r\n        }).finally(() => {\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            url: href\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // Lazy load images\r\n  function lazyLoad(e) {\r\n    var _e$target5;\r\n    if (!ew.LAZY_LOAD) return;\r\n    var el = (_e$target5 = e == null ? void 0 : e.target) != null ? _e$target5 : document;\r\n    el.querySelectorAll(\"img.ew-lazy\").forEach((img, i) => {\r\n      if (ew.LAZY_LOAD_DELAY > 0) setTimeout(() => img.src = img.dataset.src, i * ew.LAZY_LOAD_DELAY);else img.src = img.dataset.src;\r\n    });\r\n    $document$1.trigger(\"lazyload\"); // All images loaded\r\n  }\r\n\r\n  // Update select2 dropdown position\r\n  function updateDropdownPosition() {\r\n    var select = $__default.default(\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\r\n    if (select) {\r\n      select.dropdown._positionDropdown();\r\n      select.dropdown._resizeDropdown();\r\n    }\r\n  }\r\n\r\n  // Colorboxes\r\n  function initLightboxes(e) {\r\n    var _e$target6;\r\n    if (!ew.USE_COLORBOX) return;\r\n    var el = (_e$target6 = e == null ? void 0 : e.target) != null ? _e$target6 : document;\r\n    var settings = Object.assign({}, ew.lightboxSettings, {\r\n      title: ew.language.phrase(\"LightboxTitle\"),\r\n      current: ew.language.phrase(\"LightboxCurrent\"),\r\n      previous: ew.language.phrase(\"LightboxPrevious\"),\r\n      next: ew.language.phrase(\"LightboxNext\"),\r\n      close: ew.language.phrase(\"LightboxClose\"),\r\n      xhrError: ew.language.phrase(\"LightboxXhrError\"),\r\n      imgError: ew.language.phrase(\"LightboxImgError\")\r\n    });\r\n    $__default.default(el).find(\".ew-lightbox\").each(function () {\r\n      var $this = $__default.default(this);\r\n      $this.colorbox(Object.assign({\r\n        rel: $this.data(\"rel\")\r\n      }, settings));\r\n    });\r\n  }\r\n\r\n  // PDFObjects\r\n  function initPdfObjects(e) {\r\n    var _e$target7;\r\n    if (!ew.EMBED_PDF) return;\r\n    let el = (_e$target7 = e == null ? void 0 : e.target) != null ? _e$target7 : document,\r\n      options = Object.assign({}, ew.PDFObjectOptions);\r\n    $__default.default(el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function () {\r\n      // Not already embedded\r\n      let $this = $__default.default(this),\r\n        url = $this.data(\"url\"),\r\n        html = $this.html();\r\n      if (url) PDFObject.embed(url, this, Object.assign(options, {\r\n        fallbackLink: html\r\n      }));\r\n    });\r\n  }\r\n\r\n  // Tooltips and popovers\r\n  function initTooltips(e) {\r\n    var _e$target8;\r\n    let el = (_e$target8 = e == null ? void 0 : e.target) != null ? _e$target8 : document,\r\n      $el = $__default.default(el);\r\n    $el.find(\"input[data-bs-toggle=tooltip], textarea[data-bs-toggle=tooltip], select[data-bs-toggle=tooltip]\").each(function () {\r\n      let $this = $__default.default(this);\r\n      $this.tooltip({\r\n        ...ew.tooltipOptions,\r\n        html: true,\r\n        ...$this.data()\r\n      });\r\n    });\r\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Set up tooltip links as popovers\r\n    $el.find(\".ew-tooltip\").tooltip(ew.tooltipOptions);\r\n    $el.find(\".ew-popover\").popover(ew.popoverOptions);\r\n  }\r\n\r\n  // Parse JSON\r\n  function parseJson(data) {\r\n    if ($__default.default.isString(data)) {\r\n      try {\r\n        return JSON.parse(data);\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    }\r\n    return data;\r\n  }\r\n\r\n  // Change search operator\r\n  function searchOperatorChange(el) {\r\n    let $el = $__default.default(el),\r\n      $p = $el.closest(\"[id^=r_], [id^=xs_]\"),\r\n      parm = el.id.substring(2),\r\n      $fld = $p.find(\".ew-search-field\"),\r\n      $fld2 = $p.find(\".ew-search-field2\"),\r\n      $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\r\n      hasY = $y.length,\r\n      $cond = $p.find(\".ew-search-cond\"),\r\n      hasCond = $cond.length,\r\n      // Has condition and operator 2\r\n      $and = $p.find(\".ew-search-and\"),\r\n      $opr = $p.find(\".ew-search-operator\"),\r\n      opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\r\n      $opr2 = $p.find(\".ew-search-operator2\"),\r\n      opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\r\n      isBetween = opr.includes(\"BETWEEN\"),\r\n      // Can only be operator 1\r\n      isEmptyOpr = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr),\r\n      isEmptyOpr2 = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr2),\r\n      hideOpr2 = !hasY || isBetween,\r\n      hideX = isEmptyOpr,\r\n      hideY = !isBetween && (!hasCond || isEmptyOpr2);\r\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $and.toggleClass(\"d-none\", !isBetween);\r\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\r\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\r\n  }\r\n\r\n  // Init forms\r\n  function initForms(e) {\r\n    var _e$target9;\r\n    let el = (_e$target9 = e == null ? void 0 : e.target) != null ? _e$target9 : document,\r\n      ids = ew.forms.ids();\r\n    for (let id of ids) {\r\n      if (el.matches != null && el.matches(\"#\" + id) || el.querySelector(\"#\" + id)) forms.get(id).init();\r\n    }\r\n  }\r\n\r\n  // Is function\r\n  function isFunction$2(x) {\r\n    return typeof x === \"function\";\r\n  }\r\n\r\n  /**\r\n   * Alert (OK button only)\r\n   *\r\n   * @param {string|Object} msg - Message or config\r\n   * @param {callback} [cb] - Callback function\r\n   * @param {string} [type] - CSS class (see https://getbootstrap.com/docs/5.2/utilities/colors/)\r\n   * @returns {Promise}\r\n   */\r\n  function _alert(msg, cb, type) {\r\n    let config = $__default.default.isObject(msg) ? msg : {};\r\n    msg = $__default.default.isString(msg) ? msg : \"\";\r\n    type = $__default.default.isString(cb) ? cb : type;\r\n    config = $__default.default.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: msg,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      customClass: {\r\n        htmlContainer: \"ew-swal2-html-container text-\" + (type || \"danger\")\r\n      }\r\n    }, config);\r\n    let args = {\r\n      config,\r\n      type,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"alert\", [args]);\r\n    if (args.show) return Swal.fire(args.config).then(result => isFunction$2(cb) ? cb(result.isConfirmed) : result);\r\n  }\r\n\r\n  /**\r\n   * Prompt/Confirm/Alert\r\n   *\r\n   * @param {string|Object} cfg - Message or config object\r\n   * @param {callback} [cb] - Callback function\r\n   * @returns {Promise}\r\n   */\r\n  function _prompt(cfg, cb) {\r\n    var _config, _config$inputValidato;\r\n    let config = $__default.default.isObject(cfg) ? cfg : {};\r\n    config = $__default.default.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: $__default.default.isString(cfg) ? cfg : \"\",\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      cancelButtonText: ew.language.phrase(\"CancelBtn\")\r\n    }, config); // Confirm/Alert\r\n    if (config.input)\r\n      // Prompt\r\n      (_config$inputValidato = (_config = config).inputValidator) != null ? _config$inputValidato : _config.inputValidator = value => {\r\n        if (!value) return ew.language.phrase(\"EnterValue\");\r\n      };\r\n    return Swal.fire(config).then(result => isFunction$2(cb) ? cb(result.value) : result);\r\n  }\r\n\r\n  // Toast\r\n  function toast(options) {\r\n    options = Object.assign({}, ew.toastOptions, options);\r\n    $document$1.Toasts(\"create\", options);\r\n    var position = options.position,\r\n      $container = $__default.default(\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\r\n    return $container.children().first();\r\n  }\r\n\r\n  /**\r\n   * Show toast\r\n   *\r\n   * @param {string} message - Message\r\n   * @param {string} type - CSS class: \"primary|secondary|success|info|warning|danger|light|dark\"\r\n   * @param {string} title - Title\r\n   */\r\n  function showToast(message, type, title) {\r\n    if (!message) return;\r\n    type || (type = \"danger\");\r\n    title || (title = ew.language.phrase(type));\r\n    let args = {\r\n      message,\r\n      type,\r\n      title,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"toast\", [args]);\r\n    if (!args.show) return;\r\n    ({\r\n      message,\r\n      type,\r\n      title\r\n    } = args);\r\n    return toast({\r\n      class: \"ew-toast bg-\" + type,\r\n      title,\r\n      body: message,\r\n      autohide: type == \"success\" ? ew.autoHideSuccessMessage : false,\r\n      // Autohide for success message\r\n      delay: type == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n    });\r\n  }\r\n\r\n  // Get form.ew-form or div.ew-form HTML element\r\n  function getForm(el) {\r\n    if (el instanceof Form) return el.$element[0];\r\n    var $el = $__default.default(el),\r\n      $f = $el.closest(\".ew-form\");\r\n    if (!$f[0])\r\n      // Element not inside form\r\n      $f = $el.closest(\".ew-grid, .ew-multi-column-grid\").find(\".ew-form\");\r\n    return $f[0];\r\n  }\r\n\r\n  // Check form data\r\n  function hasFormData(form) {\r\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=\" + ew.TABLE_BASIC_SEARCH + \"]\",\r\n      els = $__default.default(form).find(selector).filter(\":enabled\").get();\r\n    for (var i = 0, len = els.length; i < len; i++) {\r\n      var el = els[i];\r\n      if (/^(z|w)_/.test(el.name)) {\r\n        if (/^IS/.test($__default.default(el).val())) return true;\r\n      } else if (el.type == \"checkbox\" || el.type == \"radio\") {\r\n        if (el.checked) return true;\r\n      } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\r\n        if (!!$__default.default(el).val()) return true;\r\n      } else if ([\"text\", \"textarea\", \"password\", \"search\", \"color\", \"date\", \"datetime-local\", \"datetime\", \"email\", \"hidden\", \"month\", \"number\", \"range\", \"tel\", \"time\", \"url\", \"week\"].includes(el.type)) {\r\n        if (el.value) return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Set search type\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns false\r\n   */\r\n  function setSearchType(el) {\r\n    var val = el.dataset.searchType,\r\n      phraseId = \"Auto\";\r\n    if (val == \"=\") phraseId = \"Exact\";else if (val == \"AND\") phraseId = \"All\";else if (val == \"OR\") phraseId = \"Any\";\r\n    el.closest(\".ew-basic-search\").querySelector(\"input.ew-basic-search-type\").value = val || \"\";\r\n    el.closest(\".dropdown-menu\").querySelectorAll(\".dropdown-item\").forEach(item => item.classList.remove(\"active\"));\r\n    el.closest(\".dropdown-item\").classList.add(\"active\");\r\n    var searchType = el.closest(\".input-group\").querySelector(\"#searchtype\"),\r\n      text = ew.language.phrase(\"QuickSearch\" + phraseId + \"Short\");\r\n    searchType.innerHTML = text;\r\n    searchType.classList.toggle(\"me-2\", !!text);\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @this {Form|HTMLElement} Form or parent element\r\n   * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n  function updateOptions(obj, parentId, async, change) {\r\n    var _obj, _batch$send;\r\n    var f = this.$element ? this.$element[0] : this.form || ((_obj = obj) == null ? void 0 : _obj.form); // Get form/div element from this/obj\r\n    if (!f) return;\r\n    var frm = this.htmlForm ? this : forms.get(f.id); // Get Form object\r\n    if (!frm) return;\r\n    if (this.form && $__default.default.isUndefined(obj))\r\n      // Target unspecified => update child fields\r\n      obj = forms.get(this).getList(this).childFields.slice(); // Clone\r\n    else if ($__default.default.isString(obj)) obj = getElements(obj, f);\r\n    if (!obj || Array.isArray(obj) && obj.length == 0) return;\r\n    var self = this,\r\n      batch = new Batch();\r\n    if (Array.isArray(obj) && $__default.default.isString(obj[0])) {\r\n      // Array of id\r\n      var els = [];\r\n      for (var i = 0, len = obj.length; i < len; i++) {\r\n        var ar = obj[i].split(\" \");\r\n        if (ar.length == 1 && self.form) {\r\n          // Parent/Child fields in the same table\r\n          var m = getId(self, false).match(/^([xy]\\d*_)/);\r\n          if (m) obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\r\n        }\r\n        var el = getElements(obj[i], f),\r\n          names = [];\r\n        if (isTextbox(el) || isFilter(el))\r\n          // Search text box or filter\r\n          continue;\r\n        els.push(el);\r\n        if (ar.length == 2 && Array.isArray(el)) {\r\n          // Check if id is \"tblVar fldVar\" and multiple inputs\r\n          var $el = $__default.default(el);\r\n          $el.each(function () {\r\n            if (!names.includes(this.name)) {\r\n              names.push(this.name);\r\n              var $elf = $el.filter(\"[name='\" + this.name + \"']\"),\r\n                typ = $elf.attr(\"type\"),\r\n                elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\r\n              batch.add(_updateOptions.bind(self, elf, parentId, async, change));\r\n            }\r\n          });\r\n        } else {\r\n          batch.add(_updateOptions.bind(self, el, parentId, async, change));\r\n        }\r\n      }\r\n      obj = els;\r\n      var list = forms.get(self).getList(self);\r\n      if (Array.isArray(list == null ? void 0 : list.autoFillTargetFields) && list.autoFillTargetFields[0])\r\n        // AutoFill\r\n        batch.add(autoFill.bind(null, self));\r\n    } else {\r\n      if (isTextbox(obj) || isFilter(obj))\r\n        // Search text box or filter\r\n        return;\r\n      batch.add(_updateOptions.bind(self, obj, parentId, async, change));\r\n    }\r\n    return (_batch$send = batch.send({\r\n      url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n    })) == null ? void 0 : _batch$send.then(function () {\r\n      $document$1.trigger(\"updatedone\", [{\r\n        source: self,\r\n        target: obj\r\n      }]); // Document \"updatedone\" event fired after all the target elements are updated\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n  function _updateOptions(obj, parentId, async, change) {\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n    var id = getId(obj, false);\r\n    if (!id) return;\r\n    var fo = getForm(obj); // Get form/div element from obj\r\n    if (!fo || !fo.id) return;\r\n    var frmo = forms.get(fo.id);\r\n    if (!frmo) return;\r\n    var self = this,\r\n      args = Array.from(arguments),\r\n      ar = getOptionValues(obj),\r\n      m = id.match(/^([xy])(\\d*)_/),\r\n      prefix = m ? m[1] : \"\",\r\n      rowindex = m ? m[2] : \"\",\r\n      arp = [],\r\n      list = frmo.getList(obj),\r\n      $obj = $__default.default(obj).data(\"updating\", true);\r\n    if ($obj.data(\"hidden\"))\r\n      // Skip data-hidden field, e.g. detail key\r\n      return;\r\n    if ($__default.default.isUndefined(parentId)) {\r\n      // Parent IDs not specified, use default\r\n      parentId = list.parentFields.slice(); // Clone\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var arr = parentId[i].split(\" \");\r\n          if (arr.length == 1)\r\n            // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n    }\r\n    if (Array.isArray(parentId) && parentId.length > 0) {\r\n      if (Array.isArray(parentId[0])) {\r\n        // Array of array => data\r\n        arp = parentId;\r\n      } else if ($__default.default.isString(parentId[0])) {\r\n        // Array of string => Parent IDs\r\n        for (var i = 0, len = parentId.length; i < len; i++) arp.push(getOptionValues(parentId[i], fo));\r\n      }\r\n    }\r\n    if (!isAutoSuggest(obj))\r\n      // Do not clear Auto-Suggest\r\n      clearOptions(obj);\r\n    var addOpt = function (results) {\r\n      var name = getId(obj);\r\n      results.forEach(function (result) {\r\n        let args = {\r\n          \"data\": result,\r\n          \"parents\": arp,\r\n          \"valid\": true,\r\n          \"name\": name,\r\n          \"form\": fo\r\n        };\r\n        $document$1.trigger(\"addoption\", [args]);\r\n        if (args.valid) newOption(obj, result, fo);\r\n      });\r\n      obj.render == null ? void 0 : obj.render(); // Selection list\r\n      selectOption(obj, ar, change);\r\n      if (change) {\r\n        if (!obj.options && obj.length) $obj.first().triggerHandler(\"click\");\r\n        // else\r\n        //     $obj.first().trigger(\"change\");\r\n      }\r\n    };\r\n\r\n    if ($__default.default.isUndefined(async))\r\n      // Async not specified, use default\r\n      async = list.ajax;\r\n    var _updateSibling = function () {\r\n      // Update the y_* element\r\n      if (/(srch|search|summary|crosstab)$/.test(fo.id) && prefix == \"x\" && !rowindex) {\r\n        // Search form\r\n        args[0] = id.replace(/^x_/, \"y_\");\r\n        updateOptions.apply(self, args); // args[0] is string, use updateOptions()\r\n      }\r\n    };\r\n\r\n    if (!$__default.default.isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) {\r\n      // Non-Ajax or Options loaded\r\n      var ds = list.lookupOptions;\r\n      addOpt(ds);\r\n      _updateSibling();\r\n      $obj.first().trigger(\"updated\", [{\r\n        target: obj\r\n      }]); // Object \"updated\" event fired after the object is updated\r\n      return ds;\r\n    } else {\r\n      // Ajax\r\n      var name = getId(obj),\r\n        data = Object.assign({\r\n          page: list.page,\r\n          field: list.field,\r\n          ajax: \"updateoption\",\r\n          language: ew.LANGUAGE_ID,\r\n          name: name // Name of the target element\r\n        }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\r\n      if (isAutoSuggest(obj) && self.htmlForm)\r\n        // Auto-Suggest (init form or auto-fill)\r\n        data[\"v0\"] = ar[0] || random(); // Filter by the current value\r\n      else if (obj.options && !obj.list && !isNativeSelectOne(obj) ||\r\n      // Not <selection-list> or native <select>\r\n      isModalLookup(obj))\r\n        // Lookup\r\n        data[\"v0\"] = ar[0] ? obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0] : random(); // Filter by the current value\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++)\r\n      // Filter by parent fields\r\n      data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      obj.showLoading == null ? void 0 : obj.showLoading(); // selection-list\r\n      return $__default.default.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n        method: \"POST\",\r\n        dataType: \"json\",\r\n        data: data,\r\n        async: async,\r\n        processData: false,\r\n        success: result => {\r\n          let error = getError(result);\r\n          if (error) {\r\n            _alert(error);\r\n            return;\r\n          }\r\n          let ds = result.records || [];\r\n          addOpt(ds);\r\n          _updateSibling();\r\n          $obj.first().trigger(\"updated\", [Object.assign({}, result, {\r\n            target: obj\r\n          })]); // Object \"updated\" event fired after the object is updated\r\n          return ds;\r\n        },\r\n        error: (jqXHR, textStatus, errorThrown) => _alert(errorThrown),\r\n        complete: () => $obj.data(\"updating\", false)\r\n      });\r\n    }\r\n  }\r\n\r\n  // Get user parameters from id\r\n  function getUserParams(id, root) {\r\n    var id = id.replace(/\\[\\]$/, \"\"),\r\n      o = {};\r\n    var root = !$__default.default.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    var $els = root ? $__default.default(root).find(id) : $__default.default(id);\r\n    var val = $els.val();\r\n    if (val) {\r\n      var params = new URLSearchParams(val);\r\n      params.forEach(function (value, key) {\r\n        o[key] = value;\r\n      });\r\n    }\r\n    return o;\r\n  }\r\n\r\n  // Get query builder filter input HTML\r\n  function getQueryBuilderFilterInput() {\r\n    return function (rule, name) {\r\n      var _document$getElementB, _document$getElementB2, _span$innerHTML$repla;\r\n      let tblVar = this.status.id.replace(/_query_builder$/, \"\"),\r\n        // \"this\" is QueryBuilder\r\n        fldVar = rule.filter.id,\r\n        tmplId = \"tpx_\" + tblVar + \"_\" + fldVar,\r\n        span = (_document$getElementB = document.getElementById(tmplId)) == null ? void 0 : (_document$getElementB2 = _document$getElementB.content) == null ? void 0 : _document$getElementB2.cloneNode(true).querySelector(\".ew-search-field\"),\r\n        html = (_span$innerHTML$repla = span == null ? void 0 : span.innerHTML.replace(/\\binvalid-feedback\\b/, ew.queryBuilderErrorClass).replace(new RegExp('(data-field=\")?(\\\\b|_)x_' + fldVar + '\\\\b', \"g\"), ($0, $1, $2) => $1 ? $0 : $2 + name)) != null ? _span$innerHTML$repla : \"\"; // Keep \"data-field\" attribute\r\n      return \"<div class=\\\"d-inline-flex position-relative\\\">\" + html + \"</div>\";\r\n    };\r\n  }\r\n\r\n  // Get query builder value setter\r\n  function getQueryBuilderValueSetter() {\r\n    return function (rule, value) {\r\n      let input = rule.$el.find(\".rule-value-container\").find(\"select, selection-list, input[name^=sv_], input[data-field]\")[0],\r\n        values = Array.isArray(value) ? value : $__default.default.isValue(value) ? [value] : [];\r\n      if (input != null && input.matches(\"select, selection-list\")) {\r\n        // Selection list\r\n        let form = forms.get(input);\r\n        values.forEach(val => newOption(input, {\r\n          lf: val\r\n        }, form, true));\r\n        form.updateList(input, undefined, undefined, true); // Update immediately\r\n      } else {\r\n        ew.selectOption(input, values);\r\n      }\r\n      return null;\r\n    };\r\n  }\r\n\r\n  // Get query builder filter validation object\r\n  function getQueryBuilderFilterValidation(validators) {\r\n    return {\r\n      callback: function (value, rule) {\r\n        // value not used\r\n        let $value = rule.$el.find(\".rule-value-container\"),\r\n          errors = 0;\r\n        for (let i = 0; i < rule.operator.nb_inputs; i++) {\r\n          $value.find(\"[name='\" + rule.id + '_value_' + i + \"']\").each(function () {\r\n            let $this = $__default.default(this),\r\n              $invalid = $this.next(\".\" + ew.queryBuilderErrorClass).empty();\r\n            validators == null ? void 0 : validators.forEach == null ? void 0 : validators.forEach(validator => {\r\n              let err = validator(this);\r\n              if ($__default.default.isObject(err)) {\r\n                errors++;\r\n                $invalid.append(\"<span>\" + Object.values(err)[0] + \"</span>\");\r\n              }\r\n            });\r\n            if ($invalid.html()) $this.addClass(\"is-invalid\").one(\"click\", () => $this.removeClass(\"is-invalid\"));\r\n          });\r\n        }\r\n        return errors ? \"\" : true; // Return error as empty string (errors already set in $invalid)\r\n      }\r\n    };\r\n  }\r\n\r\n  // Apply client side template to a DIV\r\n  function applyTemplate(divId, tmplId, classId, exportType, tblVar, data, isModal) {\r\n    let args = {\r\n      data: data || {},\r\n      id: divId,\r\n      template: tmplId,\r\n      class: classId,\r\n      export: exportType,\r\n      enabled: true\r\n    };\r\n    $document$1.trigger(\"rendertemplate\", [args]);\r\n    if (args.enabled) {\r\n      var _parent$querySelector;\r\n      let parent = isModal ? document.querySelector(\"#ew-modal-dialog.show\") : document.body,\r\n        // Parent (Modal dialog or document)\r\n        template = parent == null ? void 0 : (_parent$querySelector = parent.querySelector(\"#\" + tmplId)) == null ? void 0 : _parent$querySelector.content;\r\n      if (!template) return;\r\n      template.querySelectorAll(\".ew-slot\").forEach(el => {\r\n        let id = el.name || el.id,\r\n          subtmpl = parent.querySelector(\"#\" + id); // Find in parent in case Custom Template in modal dialog\r\n        if (subtmpl != null && subtmpl.content) {\r\n          if (el.dataset.rowspan > 1) Array.prototype.slice.call(subtmpl.content.childNodes).forEach(node => node.rowSpan = el.dataset.rowspan);\r\n          el.replaceWith(subtmpl.content.cloneNode(true));\r\n        } else {\r\n          el.remove();\r\n        }\r\n      });\r\n      if ($__default.default.views) {\r\n        let textContent = template.textContent,\r\n          hasTag = textContent.includes(\"{{\") && textContent.includes(\"}}\");\r\n        if (!hasTag) {\r\n          let selector = ew.jsRenderAttributes.map(attr => \"[\" + attr + \"*='{{'][\" + attr + \"*='}}']\").join(\",\");\r\n          hasTag = template.querySelector(selector);\r\n        }\r\n        if (hasTag) {\r\n          // Includes JsRender template\r\n          let scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\r\n          scripts.forEach(item => item.remove());\r\n          let div = document.createElement(\"div\");\r\n          div.appendChild(template);\r\n          let html = div.innerHTML.replace(/{{([^}]+)}}/g, m => htmlDecode(m)),\r\n            // HTML-decode comparison operators\r\n            tmpl = $__default.default.templates(html);\r\n          parent.querySelector(\"#\" + divId).innerHTML = tmpl.render(args.data, ew.jsRenderHelpers);\r\n          scripts.forEach(item => document.body.appendChild(item)); // Add scripts\r\n        } else {\r\n          parent.querySelector(\"#\" + divId).appendChild(template);\r\n        }\r\n      } else {\r\n        parent.querySelector(\"#\" + divId).appendChild(template);\r\n      }\r\n    }\r\n    if (exportType && exportType != \"print\")\r\n      // Export custom template with charts\r\n      exportCustom(divId, exportType, tblVar); // Note: Use classId as fileName\r\n  }\r\n\r\n  // Export custom\r\n  function exportCustom(divId, exportType, tblVar) {\r\n    var _div$children$;\r\n    let div = document.getElementById(divId);\r\n    if ((_div$children$ = div.children[0]) != null && _div$children$.matches(\"div[id^=ct_]\"))\r\n      // Custom template, remove first div tag\r\n      div = div.children[0];\r\n    let data = {\r\n      customexport: exportType,\r\n      data: div.innerHTML,\r\n      [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n      [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN,\r\n      ...getchartParams()\r\n    };\r\n    if (exportType == \"email\") exportEmail(tblVar, mergeSearchParams(currentUrl.searchParams, data)); // Merge data with email form data in current URL parameters\r\n    else fileDownload(getApiUrl([ew.API_EXPORT_ACTION, exportType, tblVar]), data);\r\n  }\r\n\r\n  // Toggle group\r\n  function toggleGroup(el) {\r\n    var $el = $__default.default(el),\r\n      $tr = $el.closest(\"tr\"),\r\n      selector = \"tr\",\r\n      level;\r\n    for (var i = 1; i <= 6; i++) {\r\n      var idx = i == 1 ? \"\" : \"-\" + i;\r\n      var data = $tr.data(\"group\" + idx);\r\n      if ($__default.default.isValue(data)) {\r\n        level = i;\r\n        if (data != \"\") selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\r\n      }\r\n    }\r\n    if ($el.hasClass(\"ew-rpt-grp-hide\")) {\r\n      // Show\r\n      $__default.default(selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.removeClass(\"ew-rpt-grp-hide\");\r\n    } else {\r\n      // Hide\r\n      $__default.default(selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.addClass(\"ew-rpt-grp-hide\");\r\n    }\r\n  }\r\n\r\n  // Check if boolean value is true\r\n  function convertToBool(value) {\r\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(String(value).toLowerCase());\r\n  }\r\n\r\n  // Check if element value changed\r\n  function valueChanged(fobj, infix, fld, bool) {\r\n    let el = getElements(\"x\" + infix + \"_\" + fld, fobj),\r\n      oldEl = getElement(\"o\" + infix + \"_\" + fld, fobj),\r\n      // Hidden element\r\n      fnEl = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\r\n    if ((el == null ? void 0 : el.type) == \"hidden\" && !oldEl)\r\n      // For example, detail key\r\n      return false;\r\n    if (!oldEl && (!el || Array.isArray(el) && el.length == 0)) return false;\r\n    if (oldEl && el) {\r\n      if (bool) {\r\n        if (convertToBool(getOptionValue(oldEl)) === convertToBool(getOptionValue(el))) return false;\r\n      } else {\r\n        let oldValue = getOptionValue(oldEl),\r\n          newValue = fnEl ? getOptionValue(fnEl) : getOptionValue(el);\r\n        if (oldValue == newValue) return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Set language\r\n  function setLanguage(el) {\r\n    let val = el.value || el.dataset.language;\r\n    if (!val) return false;\r\n    let currentUrl = new URL(window.location);\r\n    currentUrl.searchParams.set(\"language\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Submit action\r\n   *\r\n   * @param {MouseEvent} e - Mouse event\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLElement} args.f - HTML form (default is the form of the source element) (for backward compatibility only)\r\n   * @param {string} args.url - URL to which the request is sent (default is current page) (for backward compatibility only)\r\n   * @param {Object} args.key - Key as object (for single record only)\r\n   * @param {string|Object} args.msg - Message or Swal config\r\n   * @param {string} args.action - Custom action name\r\n   * @param {string} args.select - \"single\"|\"s\" (single record) or \"multiple\"|\"m\" (multiple records, default)\r\n   * @param {string} args.method - \"ajax\"|\"a\" (Ajax by HTTP POST) or \"post\"|\"p\" (HTTP POST by HTML form, default)\r\n   * @param {Object} args.data - Object of user data that is sent to the server\r\n   * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\r\n   * @returns\r\n   */\r\n  function submitAction(e, args) {\r\n    var _window$msg;\r\n    let el = e.currentTarget,\r\n      f = args.f || el.form || el.closest(\"form\"),\r\n      $f = $__default.default(f),\r\n      key = args.key,\r\n      action = args.action,\r\n      url = args.url || currentPage(),\r\n      msg = args.msg,\r\n      data = args.data,\r\n      success = args.success,\r\n      isPostBack = !args.method || sameText(args.method[0], \"p\"),\r\n      isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"m\");\r\n    if ((isMultiple || isPostBack) && !f) {\r\n      _alert(ew.language.phrase(\"NoHtmlForm\"));\r\n      return false;\r\n    }\r\n    if (isMultiple && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let _success = function (result) {\r\n      showMessage(result);\r\n    };\r\n    let _append = function (name, value) {\r\n      let $input = $f.find(\"input[type=hidden][name='\" + name + \"']\");\r\n      if ($input[0])\r\n        // Hidden tag exists\r\n        $input.val(value); // Set value\r\n      else\r\n        // Hidden tag does not exist, add one\r\n        $__default.default(\"<input>\").attr({\r\n          type: \"hidden\",\r\n          name,\r\n          value\r\n        }).appendTo($f);\r\n    };\r\n    let _submit = function (value) {\r\n      if (isPostBack && f) {\r\n        // Post back by form\r\n        if (action) {\r\n          // Action\r\n          _append(\"action\", action); // Set action\r\n        }\r\n\r\n        if (!$__default.default.isUndefined(value)) _append(\"actionvalue\", value); // Set action value\r\n        if ($__default.default.isObject(data)) {\r\n          // User data\r\n          for (const [name, value] of Object.entries(data)) _append(name, value);\r\n        }\r\n        if (!isMultiple && $__default.default.isObject(key)) {\r\n          // Key\r\n          for (const [name, value] of Object.entries(key)) _append(name, value);\r\n        }\r\n        if (parseUrl(url).pathname != currentUrl.pathname)\r\n          // Do not use refresh if post to another page\r\n          $f.off(\"submit.ew\");\r\n        $f.prop({\r\n          action: url,\r\n          method: \"post\"\r\n        }).trigger(\"submit\");\r\n      } else {\r\n        // Ajax\r\n        data = new URLSearchParams(data); // User data\r\n        if (action) {\r\n          // Action\r\n          data.set(\"action\", action);\r\n          data.set(\"ajax\", action);\r\n          $f.find(\"#action\").remove(); // Remove action in form\r\n        }\r\n\r\n        if (!$__default.default.isUndefined(value)) data.set(\"actionvalue\", value); // User input value\r\n        data = mergeSearchParams(data, $f.serialize()); // Form data including key_m[]\r\n        if (!isMultiple && $__default.default.isObject(key))\r\n          // Key\r\n          data = mergeSearchParams(data, key);\r\n        if (success && $__default.default.isString(success)) success = window[success];\r\n        let settings = $__default.default.isObject(success) ? success : {};\r\n        settings.data = data.toString();\r\n        settings.method || (settings.method = \"POST\");\r\n        settings.success || (settings.success = isFunction$2(success) ? success : _success);\r\n        $__default.default.ajax(url, settings);\r\n      }\r\n    };\r\n    msg = $__default.default.isString(msg) ? (_window$msg = window[msg]) != null ? _window$msg : msg : msg; // Get config object if available\r\n    msg ? _prompt(msg).then(result => result.isDismissed || _submit(result.value)) : _submit();\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Get charts parameters as object\r\n   *\r\n   * @returns string\r\n   */\r\n  function getchartParams() {\r\n    let charts = Array.from(Object.entries(window.exportCharts)).map(_ref => {\r\n      let [id, chart] = _ref;\r\n      return {\r\n        chartEngine: \"Chart.js\",\r\n        streamType: \"base64\",\r\n        stream: chart.toBase64Image(),\r\n        fileName: id + \".png\"\r\n      };\r\n    });\r\n    return charts.length ? {\r\n      charts: JSON.stringify(charts)\r\n    } : null;\r\n  }\r\n\r\n  /**\r\n   * Export with charts, selected records and/or Custom Template (non-API)\r\n   *\r\n   * @param {MouseEvent|HTMLFormElement} args.evt - Event or HTML form\r\n   * @param {string} args.url - Form action\r\n   * @param {string} args.export - Export type\r\n   * @param {boolean} args.custom - Use Custom Template\r\n   * @param {boolean} args.exportSelected - Selected records only\r\n   * @param {HTMLFormElement} args.emailForm - email form object\r\n   * @returns false\r\n   */\r\n  async function _export(args) {\r\n    let {\r\n        evt,\r\n        url,\r\n        export: type,\r\n        custom,\r\n        exportSelected,\r\n        emailForm\r\n      } = args,\r\n      f = evt.currentTarget.form;\r\n    exportSelected && (exportSelected = f && !!f.querySelector(\"input[type=checkbox][name='key_m[]']\"));\r\n    if (exportSelected && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let $f = f ? $__default.default(f) : $__default.default('<form class=\"ew-export-form\" method=\"post\"></form>').appendTo($body),\r\n      target = $f.attr(\"target\"),\r\n      action = $f.attr(\"action\"),\r\n      postParams = [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]];\r\n\r\n    // Export data\r\n    try {\r\n      if (custom) {\r\n        var _document$querySelect;\r\n        // Use Custom Template (chart data to be retrieved later in iframe)\r\n        document.body.style.cursor = \"wait\";\r\n        let name = \"ew-export-frame\";\r\n        url = setSearchParams(url, {\r\n          export: type,\r\n          custom: 1\r\n        }, $__default.default(emailForm).serialize()); // Make sure parameters include \"export=type&custom=1\"\r\n        (_document$querySelect = document.querySelector(\"iframe[name='\" + name + \"']\")) == null ? void 0 : _document$querySelect.remove();\r\n        let $iframe = $__default.default(\"<iframe>\").attr(\"name\", name).addClass(\"d-none\").appendTo($body);\r\n        $f.attr({\r\n          action: url,\r\n          target: name\r\n        }); // Pass all data including email form data from URL to the iframe by URL parameters\r\n        postParams.forEach(_ref2 => {\r\n          let [name, value] = _ref2;\r\n          return $f.find(\"input[name=\\\"\" + name + \"\\\"]\").val(value)[0] || $__default.default(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            name,\r\n            value\r\n          }).appendTo($f);\r\n        });\r\n        $iframe.one(\"load\", () => document.body.style.cursor = \"default\").one(\"load\", () => $f.attr({\r\n          action,\r\n          target\r\n        })); // Reset\r\n        $f.trigger(\"submit\");\r\n      } else {\r\n        // No Custom Template\r\n        url = setSearchParam(url, \"export\", type); // Make sure URL parameters include \"export=type\"\r\n        if (type == \"print\") $f.attr(\"action\", url).trigger(\"submit\"); // Submit the form directly\r\n        else fileDownload(url, mergeSearchParams($f.serialize(), getchartParams()));\r\n      }\r\n    } finally {\r\n      f || $f.remove();\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Remove spaces\r\n   * @param {string} value - Value\r\n   * @returns {string}\r\n   */\r\n  function removeSpaces(value) {\r\n    return /^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\")) ? \"\" : value;\r\n  }\r\n\r\n  /**\r\n   * Check if hidden text area (HTML editor)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n  function isHiddenTextArea(el) {\r\n    var $el = $__default.default(el);\r\n    return $el.is(\":hidden\") && $el.data(\"editor\");\r\n  }\r\n\r\n  /**\r\n   * Check if modal lookup\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isModalLookup(el) {\r\n    var _el$dataset;\r\n    return el == null ? void 0 : (_el$dataset = el.dataset) == null ? void 0 : _el$dataset.modalLookup;\r\n  }\r\n\r\n  /**\r\n   * Check if filter\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isFilter(el) {\r\n    var _el$dataset2;\r\n    return el == null ? void 0 : (_el$dataset2 = el.dataset) == null ? void 0 : _el$dataset2.filter;\r\n  }\r\n\r\n  /**\r\n   * Check if hidden textbox (Auto-Suggest)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n  function isAutoSuggest(el) {\r\n    var $el = $__default.default(el);\r\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\r\n  }\r\n\r\n  /**\r\n   * Check if Select2\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isSelect2(el) {\r\n    return el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"select.select2-hidden-accessible\");\r\n  }\r\n\r\n  /**\r\n   * Check if native selection list (select-one)\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isNativeSelectOne(el) {\r\n    return (el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"select:not(.select2-hidden-accessible)\")) && el.type == \"select-one\";\r\n  }\r\n\r\n  /**\r\n   * Check if textbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isTextbox(el) {\r\n    return (el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"input:not([type=checkbox]):not([type=radio])\")) && !isAutoSuggest(el);\r\n  }\r\n\r\n  /**\r\n   * Check if boolean checkbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isBooleanCheckbox(el) {\r\n    return el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"input[type=checkbox][data-boolean]\");\r\n  }\r\n\r\n  /**\r\n   * Clear error message\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   */\r\n  function clearError(el) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    }\r\n    $__default.default(el).closest(fieldContainerSelector).find(\".invalid-feedback\").html(\"\");\r\n  }\r\n\r\n  /**\r\n   * Show error message\r\n   * @param {Form} frm Form object\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   * @param {string} msg - Error message\r\n   * @param {boolean} focus - Set focus\r\n   */\r\n  function onError(frm, el, msg, focus) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    } else if (el instanceof Field) {\r\n      // el is Field object\r\n      el = el.element;\r\n    }\r\n    $__default.default(el).closest(fieldContainerSelector).find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\r\n    if (focus) setFocus(el);\r\n    frm == null ? void 0 : frm.makeVisible(el);\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Set focus\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   * @param {Object} options - Focus options\r\n   */\r\n  function setFocus(obj, options) {\r\n    if (!obj) return;\r\n    var $obj = $__default.default(obj);\r\n    if (isHidden($obj)) return;\r\n    if (isHiddenTextArea(obj)) {\r\n      // HTML editor\r\n      return $obj.data(\"editor\").focus();\r\n    } else if (!obj.options && obj.length) {\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    } else if (isAutoSuggest(obj)) {\r\n      // Auto-Suggest\r\n      obj = obj.input;\r\n    }\r\n    obj.focus(options);\r\n  }\r\n\r\n  /**\r\n   * Set invalid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n  function setInvalid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $__default.default(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length)\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n      reset = () => $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change keydown paste\" : \"click keydown paste\"; // Use \"change\" event for Safari\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set valid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n  function setValid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $__default.default(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length)\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n      reset = () => $p.find(\".is-valid\").removeClass(\"is-valid\");\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change keydown paste\" : \"click keydown paste\"; // Use \"change\" event for Safari\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      }\r\n    }\r\n  }\r\n\r\n  // Check if object has value\r\n  function hasValue(obj) {\r\n    return getOptionValue(obj) != \"\";\r\n  }\r\n\r\n  // Check if object value is a masked password\r\n  function isMaskedPassword(obj) {\r\n    var val = $__default.default(obj).val();\r\n    return val == null ? void 0 : val.match(/^\\*+$/);\r\n  }\r\n\r\n  // Sort by field\r\n  function sort(e, dataset) {\r\n    let {\r\n      sortUrl: url,\r\n      sortType: type,\r\n      context,\r\n      ajax\r\n    } = dataset;\r\n    if (e.shiftKey && !e.ctrlKey) url = setSearchParams(url, {\r\n      cmd: \"resetsort\"\r\n    });else if (type == 2 && e.ctrlKey) url = setSearchParams(url, {\r\n      ctrl: \"1\"\r\n    });\r\n    if (convertToBool(ajax)) refresh(fetch(setLayout(url, false)), context);else window.location = sanitizeUrl(url);\r\n    return false;\r\n  }\r\n\r\n  // Open table header filter by field\r\n  function filter(e) {\r\n    let data = e.currentTarget.dataset;\r\n    $__default.default(\"select[data-select2-id='f\" + data.table + \"srch_\" + data.field + \"']\").select2(\"open\");\r\n  }\r\n\r\n  /**\r\n   * Scroll an element into view\r\n   */\r\n  function scrollIntoView(el) {\r\n    var _OverlayScrollbars;\r\n    let container = el == null ? void 0 : el.closest(\".os-host\"); // Check OverlayScrollbars\r\n    container ? (_OverlayScrollbars = OverlayScrollbars(container)) == null ? void 0 : _OverlayScrollbars.scroll(el) : el == null ? void 0 : el.scrollIntoView();\r\n  }\r\n\r\n  /**\r\n   * Inline actions\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {string} args.url - URL\r\n   * @param {string} args.ewAction - Inline/Grid action (inline/grid)\r\n   * @param {string} args.action - Inline/Grid action type (insert/cancel/update/add/edit/copy/delete)\r\n   * @returns false\r\n   */\r\n  async function inlineAction(args) {\r\n    var _args$evt;\r\n    let $el = $__default.default((_args$evt = args.evt) == null ? void 0 : _args$evt.currentTarget),\r\n      $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n    $el.tooltip(\"hide\");\r\n    if (!$grid[0] && $el.is(\".dropdown-item\")) {\r\n      let $btn = $__default.default(\"#\" + $el.closest(\".dropdown-menu\").attr(\"aria-labelledby\"));\r\n      if ($btn[0]) {\r\n        $el = $btn;\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n      }\r\n    }\r\n    if (!$el[0]) return;\r\n    let {\r\n        url,\r\n        ewAction,\r\n        action\r\n      } = args,\r\n      $f = $grid.find(\"form\"),\r\n      f = $f[0],\r\n      $record = $el.closest(\"tr[data-rowindex], div[data-rowindex]\"),\r\n      key = $record.data(\"key\"),\r\n      curindex = $record.data(\"rowindex\"),\r\n      $detached;\r\n    if (action != \"add\" && (!$grid[0] || !f))\r\n      // Allow add with no records => no grid\r\n      return;\r\n\r\n    // Fail\r\n    let _fail = function (o) {\r\n      !o.status || showToast(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Always\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Success handler for delete\r\n    let _deleted = async function (response) {\r\n      if (!(response instanceof Response))\r\n        // Inline actions only\r\n        return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n        if (result != null && result.success) {\r\n          $record.remove();\r\n          showToast(ew.language.phrase(\"DeleteSuccess\"), \"success\");\r\n        } else {\r\n          showToast(getError(result) || ew.language.phrase(\"DeleteFailed\"));\r\n        }\r\n      } else {\r\n        _alert(await response.text());\r\n      }\r\n    };\r\n\r\n    // Disable inline buttons\r\n    let _disableInlineButtons = () => $__default.default(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").addClass(\"disabled\");\r\n\r\n    // Enable inline buttons\r\n    let _enableInlineButtons = () => $__default.default(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").removeClass(\"disabled\");\r\n\r\n    // Get table\r\n    let _getTable = () => $grid.find(\".ew-grid-middle-panel .ew-table\")[0];\r\n\r\n    // Update row index\r\n    let _updateRowIndexes = tbl => {\r\n      let j = 0;\r\n      Array.from(tbl.rows).forEach(row => row.dataset.rowindex = row.dataset.rowindex === \"0\" ? \"0\" : String(j++)); // Update row index if not Inline-Add/Copy row\r\n    };\r\n\r\n    // Success handler for inline actions\r\n    let _success = async function (response) {\r\n      if (!(response instanceof Response))\r\n        // Inline actions only\r\n        return;\r\n      let text = await response.clone().text(),\r\n        $data = $__default.default(\"<div>\" + text + \"</div>\"),\r\n        $row = $data.find(\"tr[data-rowindex=0], div[data-rowindex=0]\" + (key ? \", tr[data-key='\" + key + \"'], div[data-key='\" + key + \"']\" : \"\")).filter(\"[data-rowtype=2], [data-rowtype=3]\"),\r\n        // Find Inline-Add first\r\n        inline = $row.data(\"inline\"),\r\n        rowtype = $row.data(\"rowtype\"),\r\n        rowindex = inline && rowtype == 2 /* Inline-Add */ ? 0 : inline && rowtype == 3 /* Inline-Edit */ ? 1 : $row.data(\"rowindex\"),\r\n        $els = $row.add($data.find(\"script[data-rowindex=\" + rowindex + \"]\")); // Add script for the row\r\n      if ([\"add\", \"copy\", \"edit\"].includes(action) && !$els[0])\r\n        // Edit row not found => Error\r\n        return showToast(text);\r\n      if ([\"add\", \"copy\"].includes(action)) {\r\n        // Inline-Add/Copy\r\n        if (document.querySelector(\"main.ew-no-record\") && $data.find(\"main:not(.ew-no-record)\")[0]) {\r\n          // No existing record, new Inline-Add/Copy row found\r\n          await refresh(Promise.resolve(response));\r\n        } else {\r\n          if ($row.is(\"TR\")) {\r\n            // Table\r\n            let tbl = _getTable();\r\n            if (tbl.matches(\".ew-infinite-scroll-table\")) $__default.default(tbl.tBodies).last().append($els);else $__default.default(tbl.tBodies).last().prepend($els);\r\n            _updateRowIndexes(tbl); // Update row index\r\n            setupTable(tbl, true);\r\n          } else {\r\n            $grid.find(\".ew-multi-column-row\").append($els);\r\n          }\r\n          _disableInlineButtons();\r\n        }\r\n        ew.initPage($__default.default.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=2]\")[0]);\r\n      } else if (action == \"edit\") {\r\n        // Inline-Edit\r\n        $detached = $record.replaceWith($els); // Replace current row\r\n        $grid.data(\"detached\", $detached); // Save the detached row\r\n        if ($row.is(\"TR\"))\r\n          // Table\r\n          setupTable(_getTable(), true);\r\n        _disableInlineButtons();\r\n        ew.initPage($__default.default.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=3]\")[0]);\r\n      }\r\n    };\r\n\r\n    // Submit success handler for inline actions\r\n    let _submitSuccess = async function (response) {\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n          error = getError(result);\r\n        if (error) {\r\n          showToast(error);\r\n          return;\r\n        }\r\n      }\r\n      if (response.headers.get(\"Infinite-Scroll\")) {\r\n        // Infinite scroll\r\n        let text = await response.text(),\r\n          $data = $__default.default(\"<div>\" + text + \"</div>\"),\r\n          $main = $data.find(\".main\"),\r\n          $row;\r\n        if ([\"insert\", \"update\"].includes(action)) {\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n          if (!$row[0]) return; // Affected row(s) not found\r\n          if (action == \"insert\")\r\n            // Inline-Add/Copy\r\n            $grid.find(\"tr[data-rowtype=\" + ew.ROWTYPE_ADD + \"], div[data-rowtype=\" + ew.ROWTYPE_ADD + \"]\").replaceWith($row[0]); // Replace add row\r\n          else if (action == \"update\")\r\n            // Inline-Edit/Update\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-key='\" + row.dataset.key + \"']\").replaceWith(row)); // Replace row(s) edited/updated\r\n        } else if ([\"add\", \"edit\", \"multiedit\"].includes(action)) {\r\n          // Grid-Add/Grid-Edit/Multi-Edit\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n          if ([\"edit\", \"multiedit\"].includes(action))\r\n            // Grid-Edit/Multi-Edit\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-rowtype='\" + row.dataset.key + \"']\").replaceWith(row));else if (action == \"add\")\r\n            // Grid-Add\r\n            $grid.find(\".ew-grid-middle-panel .ew-table > tbody:last\").append($row); // Append to bottom\r\n        }\r\n\r\n        let tbl = _getTable();\r\n        _updateRowIndexes(tbl); // Update row index\r\n        setupTable(tbl, true);\r\n        showMessage({\r\n          target: $data\r\n        }); // Show message, if any\r\n        ew.initPage($__default.default.Event({\r\n          type: \"load.ew\",\r\n          target: $main[0]\r\n        }));\r\n      } else {\r\n        // Use Ajax actions\r\n        await refresh(Promise.resolve(response));\r\n      }\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n      if (returnUrl && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $grid.find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    };\r\n    if (ewAction == \"inline\") {\r\n      if (action == \"cancel\") {\r\n        if (curindex == \"0\") {\r\n          // Cancel Inline-Add/Copy\r\n          $record.remove();\r\n        } else {\r\n          var _$grid$data;\r\n          // Cancel Inline-Edit\r\n          (_$grid$data = $grid.data(\"detached\")) == null ? void 0 : _$grid$data.replaceAll($record);\r\n        }\r\n        _enableInlineButtons();\r\n      } else if (f && [\"insert\", \"update\"].includes(action)) {\r\n        // Post form\r\n        let frm = forms.get(f.id);\r\n        if (await frm.canSubmit(args.evt)) {\r\n          // Validate\r\n          document.body.style.cursor = \"wait\";\r\n          let body = setSearchParams($f.serialize(), {\r\n              action\r\n            }),\r\n            // Set up action\r\n            p = _fetch(setSearchParams(url, {\r\n              rnd: random()\r\n            }), {\r\n              method: \"POST\",\r\n              body\r\n            }).catch(_fail).finally(() => {\r\n              frm.enableForm();\r\n              _always();\r\n            });\r\n          if (frm.submitWithFetch) {\r\n            let args = {\r\n                form: f,\r\n                result: p\r\n              },\r\n              evt = $__default.default.Event(\"aftersubmit\", {\r\n                originalEvent: args.evt\r\n              });\r\n            frm.trigger(evt, [args]);\r\n          } else {\r\n            p.then(_submitSuccess).finally(_enableInlineButtons);\r\n          }\r\n        }\r\n      } else if (action == \"delete\") {\r\n        // Inline-Delete\r\n        if (!key) {\r\n          // No key from the clicked row => Multi-Delete\r\n          $record = $grid.find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"tr[data-rowindex], div[data-rowindex]\"); // Update $record\r\n          if (!$record[0]) {\r\n            _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n            return false;\r\n          }\r\n        }\r\n        _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n          if (result) {\r\n            document.body.style.cursor = \"wait\";\r\n            let method = key ? \"GET\" : \"POST\",\r\n              body = deleteSearchParam($f.serialize(), \"action\"),\r\n              frm = forms.get(f.id),\r\n              p = _fetch(setSearchParams(url, {\r\n                action: \"delete\",\r\n                rnd: random()\r\n              }), {\r\n                method,\r\n                body\r\n              }).catch(_fail).finally(() => {\r\n                frm.enableForm();\r\n                _always();\r\n              });\r\n            if (frm.submitWithFetch) {\r\n              let args = {\r\n                  form: f,\r\n                  result: p\r\n                },\r\n                evt = $__default.default.Event(\"aftersubmit\", {\r\n                  originalEvent: args.evt\r\n                });\r\n              frm.trigger(evt, [args]);\r\n            } else {\r\n              p.then(_deleted);\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        document.body.style.cursor = \"wait\";\r\n        _fetch(setSearchParams(url, {\r\n          rnd: random()\r\n        })).then(_success).catch(_fail).finally(_always);\r\n      }\r\n    } else if (ewAction == \"grid\" || ewAction == \"modal\") {\r\n      // Grid-Add/Edit, Modal-Add/Copy/Edit/Update\r\n      if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n        // Grid-Edit and Multi-Edit/Update\r\n        _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n        return false;\r\n      }\r\n      ew.modalDialogShow({\r\n        ...args,\r\n        callback: _submitSuccess\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Confirm inline-delete\r\n  function confirmDelete(el) {\r\n    clickDelete(el);\r\n    _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n      if (result) {\r\n        if (el.dataset.json && el.href)\r\n          // Handle JSON response\r\n          ew.modalDialogShow({\r\n            url: setSearchParams(el.href, {\r\n              action: \"delete\"\r\n            }),\r\n            json: true,\r\n            callback: true\r\n          });else if (el.href) window.location = sanitizeUrl(setSearchParams(el.href, {\r\n          action: \"delete\"\r\n        }));else clearDelete(el);\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n\r\n  // Check if any key selected // PHP\r\n  function keySelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name='key_m[]']:checked\"));\r\n  }\r\n\r\n  // Select all keys\r\n  function selectAllKeys(cb) {\r\n    selectAll(cb);\r\n    let tbl = cb == null ? void 0 : cb.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    $__default.default(tbl.tBodies).each(function () {\r\n      $__default.default(this.rows).each(function () {\r\n        let $r = $__default.default(this);\r\n        if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) $r.toggleClass(\"table-active ew-table-selected-row\", cb.checked).triggerHandler(\"change\");\r\n      });\r\n    });\r\n  }\r\n\r\n  // Select all related checkboxes in the form\r\n  function selectAll(cb) {\r\n    if (!(cb != null && cb.form)) return;\r\n    $__default.default(cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked);\r\n  }\r\n\r\n  // Update selected checkbox\r\n  function updateSelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name^=u_]:checked,input[type=hidden][name^=u_][value='1']\"));\r\n  }\r\n\r\n  // Clear selected rows color\r\n  function clearSelected(tbl) {\r\n    let rowIndexes = $__default.default(tbl).find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"[data-rowindex]\").map((i, r) => r.dataset.rowindex).get();\r\n    $__default.default(tbl == null ? void 0 : tbl.rows).filter((i, r) => r.classList.contains(\"table-active\") && !rowIndexes.includes(r.dataset.rowindex)).removeClass(\"table-active ew-table-selected-row\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Clear all row delete status\r\n  function clearDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    let $tr = $__default.default(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().removeClass(\"table-active\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Click single delete link\r\n  function clickDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $__default.default(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().addClass(\"table-active\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Select a row\r\n  function selectKey(e) {\r\n    let chk = e.target,\r\n      tbl = chk == null ? void 0 : chk.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $__default.default(chk).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function () {\r\n      $__default.default(this).toggleClass(\"table-active ew-table-selected-row\", chk.checked).triggerHandler(\"change\");\r\n    });\r\n    e.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   * Setup table\r\n   *\r\n   * @param {number} [index=undefined] Index\r\n   * @param {HTMLTableElement} tbl HTML table element\r\n   * @param {boolean} [force=undefined] Force setup\r\n   * @returns\r\n   */\r\n  function setupTable() {\r\n    let tbl, force;\r\n    if ($__default.default.isNumber(arguments[0])) {\r\n      tbl = arguments[1];\r\n    } else if (arguments[0] instanceof HTMLTableElement) {\r\n      tbl = arguments[0];\r\n      force = arguments[1];\r\n    }\r\n    let $tbl = $__default.default(tbl),\r\n      $rows = $__default.default(tbl.rows);\r\n    if (!tbl || !tbl.rows || !force && tbl.dataset.isset || tbl.tBodies.length == 0) return;\r\n    // Set selected row color\r\n    let click = function (e) {\r\n      let $this = $__default.default(this),\r\n        tbl = this.closest(\".ew-table\"),\r\n        $target = $__default.default(e.target);\r\n      if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-btn\") || $target.is(\":input\")) return;\r\n      clearSelected(tbl); // Clear all other selected rows\r\n      $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().toggleClass(\"table-active\").triggerHandler(\"change\");\r\n    };\r\n    let n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1,\r\n      // Alternate color every n rows\r\n      rows = $rows.filter(\":not(.ew-template)\").each(function () {\r\n        $__default.default(this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\r\n      }).get();\r\n    if (rows.length >= n) {\r\n      let div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n      rows[rows.length - 1].classList.add(\"border-bottom-0\"); // Last row\r\n      rows.splice(n * -1).forEach((row, i) => Array.from(row.cells).filter(cell => cell.rowSpan == i + 1) // Cell of last row\r\n      .forEach(cell => {\r\n        cell.classList.add(\"ew-table-last-row\");\r\n        cell.classList.toggle(\"ew-table-border-bottom\", (div == null ? void 0 : div.clientHeight) > tbl.offsetHeight);\r\n      }));\r\n    }\r\n    let form = tbl.closest(\"form\"),\r\n      attach = form && $__default.default(form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\r\n    $__default.default(tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\r\n    .filter(\":not(.ew-template):not(.ew-table-preview-row)\").each(function () {\r\n      let $r = $__default.default(this);\r\n      if (attach && !$r.data(\"isset\")) $r.on(\"click\", click).data(\"isset\", true);\r\n    });\r\n    setupGrid(tbl.closest(\".ew-grid\"), force);\r\n    tbl.dataset.isset = \"true\";\r\n  }\r\n\r\n  // Setup grid\r\n  function setupGrid(grid, force) {\r\n    let $grid = $__default.default(grid);\r\n    if (!grid || !force && grid.dataset.isset) return;\r\n    let rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\r\n    if (rowcnt == 0 && !grid.querySelector(\".ew-grid-upper-panel, .ew-grid-lower-panel\")) $grid.hide();\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $__default.default(\".content\").width()) {\r\n      $grid.addClass(\"d-flex\");\r\n      $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\r\n      $grid.closest(\".ew-form\").addClass(\"w-100\");\r\n    }\r\n    grid.dataset.isset = \"true\";\r\n  }\r\n\r\n  // Add a row to grid\r\n  function addGridRow(el) {\r\n    var _bootstrap$Tooltip$ge2;\r\n    let grid = el == null ? void 0 : el.closest(\".ew-grid\"),\r\n      $grid = $__default.default(grid),\r\n      $tbl = $grid.find(\"table.ew-table\").last(),\r\n      $p = $tbl.parent(\"div\"),\r\n      $tpl = $tbl.find(\"tr.ew-template\");\r\n    if (!el || !grid || !$tbl[0] || !$tpl[0]) return false;\r\n    let $lastrow = $__default.default($tbl[0].rows).last();\r\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\r\n    let $row = $tpl.clone(true, true).removeClass(\"ew-template\"),\r\n      form = grid.querySelector(\"div.ew-form[id^=f][id$=grid]\") || grid.querySelector(\"form.ew-form[id^=f][id$=list]\") || grid.querySelector(\"form.ew-form[id^=f][id$=grid]\"),\r\n      $form = $__default.default(form),\r\n      suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n      $keycnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix),\r\n      keycnt = parseInt($keycnt.val(), 10) + 1,\r\n      name = ew.FORM_ROW_ACTION_NAME.replace(/^k_/, \"k\" + keycnt + \"_\") + suffix,\r\n      // name=\"k<n>_action\"\r\n      $els = $tpl.find(\"script:contains('$rowindex$')\").add(\"tr.ew-template + script[data-rowindex='$rowindex$']\"); // Get scripts with rowindex\r\n    $row.attr({\r\n      \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2),\r\n      \"data-rowindex\": keycnt\r\n    });\r\n    $row.children(\"td\").each(function () {\r\n      $__default.default(this).find(\"*\").each(function () {\r\n        $__default.default.each(this.attributes, function (i, attr) {\r\n          attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\r\n        });\r\n      });\r\n    });\r\n\r\n    let $btn = $row.find(\".ew-icon\").closest(\"a, button\");\r\n    (_bootstrap$Tooltip$ge2 = bootstrap.Tooltip.getInstance($btn[0])) == null ? void 0 : _bootstrap$Tooltip$ge2.dispose();\r\n    $btn.tooltip({\r\n      ...ew.tooltipOptions,\r\n      container: \"body\",\r\n      trigger: \"hover\"\r\n    });\r\n    $keycnt.val(keycnt).after($__default.default(\"<input>\").attr({\r\n      type: \"hidden\",\r\n      id: name,\r\n      name: name,\r\n      value: \"insert\"\r\n    }));\r\n    $lastrow.after($row);\r\n    $els.get().forEach(el => addScript(el.text.replace(/\\$rowindex\\$/g, keycnt)));\r\n    let frm = $form.data(\"form\");\r\n    frm == null ? void 0 : frm.initEditors();\r\n    frm == null ? void 0 : frm.initUpload();\r\n    setupTable($tbl[0], true);\r\n    $p.scrollTop($p[0].scrollHeight);\r\n    $tbl.trigger(\"rowadded\", [keycnt]);\r\n    return false;\r\n  }\r\n\r\n  // Delete a row from grid\r\n  function deleteGridRow(el, infix) {\r\n    var _bootstrap$Tooltip$ge3;\r\n    (_bootstrap$Tooltip$ge3 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge3.dispose();\r\n    let grid = el.closest(\".ew-grid, .ew-multi-column-grid\"),\r\n      row = el.closest(\"tr, div[data-rowindex]\"),\r\n      tbl = row == null ? void 0 : row.closest(\".ew-table\"),\r\n      rowidx = parseInt(row == null ? void 0 : row.dataset.rowindex, 10),\r\n      form = (grid == null ? void 0 : grid.querySelector(\"div.ew-form[id^=f][id$=grid]\")) || (grid == null ? void 0 : grid.querySelector(\"form.ew-form[id^=f][id$=list], form.ew-form[id^=f][id$=grid]\")),\r\n      $form = $__default.default(form),\r\n      frm = $form.data(\"form\");\r\n    if (!el || !grid || !row || !tbl || !form || !frm) return false;\r\n    let suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n      keycnt = \"#\" + ew.FORM_KEY_COUNT_NAME + suffix;\r\n    let _delete = function () {\r\n      row.remove();\r\n      if (grid.classList.contains(\".ew-grid\")) setupTable(tbl, true);\r\n      if (rowidx > 0) {\r\n        let $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\r\n        if ($keyact[0]) {\r\n          $keyact.val($keyact.val() == \"insert\" ? \"insertdelete\" : \"delete\");\r\n        } else {\r\n          $form.find(keycnt).after($__default.default(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            id: \"k\" + rowidx + \"_action\" + suffix,\r\n            name: \"k\" + rowidx + \"_action\" + suffix,\r\n            value: \"delete\"\r\n          }));\r\n        }\r\n      }\r\n      $__default.default(tbl).trigger(\"rowdeleted\", [rowidx]);\r\n    };\r\n    if (isFunction$2(frm.emptyRow) && frm.emptyRow(infix)) {\r\n      // Empty row\r\n      _delete();\r\n    } else {\r\n      // Confirm\r\n      _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n        if (result) _delete();\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // HTML encode text\r\n  function htmlEncode(text) {\r\n    return String(text).replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n  }\r\n\r\n  // HTML decode text\r\n  function htmlDecode(text) {\r\n    return String(text).replace(/&amp;/g, '&').replace(/&quot;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>');\r\n  }\r\n\r\n  // Get form element(s) as single element or array of radio/checkbox\r\n  function getElements(el, root) {\r\n    root = !$__default.default.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    let $root = root ? $__default.default(root) : $document$1,\r\n      selectors = [],\r\n      getFieldSelector = field => \"[data-field='\" + field + \"']:not(.ew-custom-option):not([name^=y_]):not([data-old])\";\r\n    if (el instanceof HTMLElement && el.dataset.table && el.dataset.field) {\r\n      // HTML element (e.g. radio/checkbox)\r\n      if (isBooleanCheckbox(el)) return el;\r\n      selectors = [\"[data-table='\" + el.dataset.table + \"']\" + getFieldSelector(el.dataset.field)];\r\n    } else if ($__default.default.isString(el)) {\r\n      let [s1, s2] = el.split(\" \"); // Check if \"<table> <name>\"\r\n      selectors = s2 ? [\"[data-table='\" + s1 + \"']\" + getFieldSelector(getId(s2))] // \"<table> <name>\", remove []\r\n      : [\"[name='\" + el + \"']:not(.ew-custom-option):not([data-old])\", getFieldSelector(getId(el))]; // \"<name>\" only\r\n    }\r\n\r\n    let selector = [\"input\", \"select\", \"textarea\", \"button\", \"selection-list\"].flatMap(tag => selectors.map(sel => tag + sel)).join(),\r\n      $els = $root.find(selector);\r\n    if ($root.is(\"form.ew-form\") && $root.find(\"div.ew-form\")[0])\r\n      // Master/Detail form\r\n      $els = $els.not(\"div.ew-form *\"); // Remove elements of detail tables\r\n    if ($els.length == 1 && ($els.is(\":not([type=checkbox]):not([type=radio])\") || isBooleanCheckbox($els[0])) || $els.length == 2 && $els.eq(0).is(\"selection-list\") && $els.eq(1).is(\"input[type=hidden]\"))\r\n      // Polyfill for the ElementInternals\r\n      return $els[0];\r\n    return $els[0] ? $els.get() : null;\r\n  }\r\n\r\n  // Get first element by id/name (not necessarily form element)\r\n  function getElement(name, root) {\r\n    root = !$__default.default.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    let selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\r\n    return root ? $__default.default(root).find(selector)[0] : $__default.default(selector).first()[0];\r\n  }\r\n\r\n  // Get ancestor by function\r\n  function getAncestorBy(node, fn) {\r\n    while (node = node.parentNode) {\r\n      var _node;\r\n      if (((_node = node) == null ? void 0 : _node.nodeType) == 1 && (!fn || fn(node))) return node;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // Check if an element is hidden\r\n  function isHidden(el) {\r\n    var $el = $__default.default(el);\r\n    return $el.css(\"display\") == \"none\" && !$el.is(\"selection-list\") && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) || getAncestorBy(el, node => node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\")) != null;\r\n  }\r\n\r\n  // Check if same text\r\n  function sameText(o1, o2) {\r\n    return String(o1).toLowerCase() == String(o2).toLowerCase();\r\n  }\r\n\r\n  // Check if same string\r\n  function sameString(o1, o2) {\r\n    return String(o1) == String(o2);\r\n  }\r\n\r\n  // Convert to header case\r\n  function headerCase(str) {\r\n    return !str ? \"\" : String(str).replace(/^[^A-Za-z0-9]*|[^A-Za-z0-9]*$/g, \"\").replace(/([a-z])([A-Z])/g, (m, a, b) => a + \"_\" + b.toLowerCase()).replace(/[^A-Za-z0-9]+|_+/g, \"-\").toLowerCase().replace(/(-?)(\\w+)(-?)/g, (m, a, b, c) => a + b.charAt(0).toUpperCase() + b.slice(1) + c);\r\n  }\r\n\r\n  // Check if same path\r\n  function samePath(p1, p2) {\r\n    p1 = p1 instanceof URL ? p1.pathname : parseUrl(p1).pathname;\r\n    p2 = p2 instanceof URL ? p2.pathname : parseUrl(p2).pathname;\r\n    if (p1 != p2 && p1.startsWith(ew.PATH_BASE) && p2.startsWith(ew.PATH_BASE)) {\r\n      p1 = p1.substring(ew.PATH_BASE.length);\r\n      p2 = p2.substring(ew.PATH_BASE.length);\r\n      let ar1 = p1.split(\"/\"),\r\n        ar2 = p2.split(\"/\");\r\n      if (ar1[0] == ar2[0] && ar1[0].match(/(list|view|edit)$/i) ||\r\n      // *list == *list\r\n      ar1[0] == ar2[0] && ar1[1] == ar2[1] && [ew.LIST_ACTION, ew.VIEW_ACTION, ew.EDIT_ACTION].includes(ar1[1]))\r\n        // xxx/list == xxx/list\r\n        return true;\r\n    }\r\n    return p1 == p2;\r\n  }\r\n\r\n  // Get element value as array for select-multiple field or else as string\r\n  function getValue(el, form) {\r\n    let obj = el;\r\n    if ($__default.default.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return undefined;\r\n    if (obj.options) {\r\n      // Selection list\r\n      return obj.list ? obj.type == \"select-multiple\" ? obj.values : obj.value : $__default.default(obj).val();\r\n    } else if (Array.isArray(obj)) {\r\n      // Radio/Checkbox list or element not found\r\n      return obj.length ? $__default.default(obj).filter(\":checked\").map((i, el) => el.value).get() : undefined;\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      // Single checkbox\r\n      return obj.checked ? obj.value : undefined;\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default.default(obj).data(\"editor\").save();\r\n      return obj.value;\r\n    } else {\r\n      // text/hidden\r\n      return obj.value;\r\n    }\r\n  }\r\n\r\n  // Get existing selected values as an array\r\n  function getOptionValues(el, form) {\r\n    let obj = el;\r\n    if ($__default.default.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return [];\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        return obj.values;\r\n      } else if (isSelect2(obj)) {\r\n        let val = $__default.default(obj).val();\r\n        return Array.isArray(val) ? val : $__default.default.isValue(val) ? [val] : [];\r\n      } else {\r\n        return Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.value);\r\n      }\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $__default.default(obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default.default(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      // text/hidden\r\n      return [obj.value];\r\n    }\r\n  }\r\n\r\n  // Get existing selected values as string\r\n  function getOptionValue(el, form) {\r\n    return getOptionValues(el, form).join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n  }\r\n\r\n  // Get existing text of selected values as an array\r\n  function getOptionTexts(el, form) {\r\n    let obj = el;\r\n    if ($__default.default.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return [];\r\n    if (isAutoSuggest(obj)) {\r\n      // AutoSuggest (before obj.options)\r\n      return [obj.input.value];\r\n    } else if (obj.options) {\r\n      // Selection list\r\n      return isSelect2(obj) ? $__default.default(obj).find(\":selected\").map((i, el) => el.innerHTML).get() : Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.text);\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $__default.default(obj).filter(\":checked\").map(function () {\r\n        return $__default.default(this).parent().text();\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default.default(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      return [obj.value];\r\n    }\r\n  }\r\n\r\n  // Clear existing options\r\n  function clearOptions(obj) {\r\n    if (obj.options) {\r\n      // Selection list\r\n      var lo = obj.type == \"select-multiple\" ||\r\n      // multiple\r\n      obj.hasAttribute(\"data-dropdown\") ||\r\n      // dropdown\r\n      obj.length > 0 && obj.options[0].value != \"\" // non-empty first element\r\n      ? 0 : 1;\r\n      if (obj.list) {\r\n        obj.removeAll();\r\n        obj.render();\r\n      } else {\r\n        for (var i = obj.length - 1; i >= lo; i--) obj.remove(i);\r\n      }\r\n      if (isAutoSuggest(obj)) {\r\n        obj.input.value = \"\";\r\n        obj.value = \"\";\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the name or id of an element\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {boolean} [remove=true] - Remove square brackets\r\n   * @returns\r\n   */\r\n  function getId(el, remove) {\r\n    var id = $__default.default.isString(el) ? el : $__default.default(el).attr(\"name\") || $__default.default(el).attr(\"id\"); // Use name first (id may have suffix)\r\n    return remove !== false ? id.replace(/\\[\\]$/, \"\") : id;\r\n  }\r\n\r\n  // Get display value separator\r\n  function valueSeparator(index, obj) {\r\n    var sep = $__default.default(obj).data(\"value-separator\");\r\n    return Array.isArray(sep) ? sep[index - 1] : sep || \", \";\r\n  }\r\n\r\n  /**\r\n   * Get display value\r\n   *\r\n   * @param {Object} opt - Option being displayed\r\n   * @param {HTMLElment} obj - HTML element\r\n   * @returns {string} Display value\r\n   */\r\n  function displayValue(opt, obj) {\r\n    return [opt.df, opt.df2, opt.df3, opt.df4].reduce((text, value, i) => {\r\n      let sep = i > 0 ? valueSeparator(i - 1, obj) : \"\";\r\n      return !$__default.default.isUndefined(sep) && $__default.default.isValue(value) && value != \"\" ? text + sep + value : text;\r\n    }, \"\");\r\n  }\r\n\r\n  /**\r\n   * Get HTML for a single option\r\n   *\r\n   * @param {*} val - Value of the option\r\n   * @returns {string} HTML\r\n   */\r\n  function optionHtml(val) {\r\n    return ew.OPTION_HTML_TEMPLATE.replace(/\\{value\\}/g, val);\r\n  }\r\n\r\n  /**\r\n   * Get HTML for diplaying all options\r\n   *\r\n   * @param {string[]} options - Array of all options (HTML)\r\n   * @param {number} max - Maximum number of options to show\r\n   * @returns {string} HTML\r\n   */\r\n  function optionsHtml(options, max) {\r\n    if (options.length > (max || ew.MAX_OPTION_COUNT))\r\n      // More than max option count\r\n      return ew.language.phrase(\"CountSelected\").replace(\"%s\", options.length);else if (options.length)\r\n      // Some options\r\n      return options.reduce((previous, current) => previous + optionHtml(current), \"\");\r\n    return ew.language.phrase(\"PleaseSelect\"); // No options\r\n  }\r\n\r\n  /**\r\n   * Create new option\r\n   *\r\n   * @param {(HTMLElement|array)} obj - Selection list\r\n   * @param {Object} data - Object for the new option\r\n   * @param {form} f - form object of obj\r\n   * @param {bool} selected - New option is selected\r\n   * @returns\r\n   */\r\n  function newOption(obj, data, f, selected) {\r\n    let frm = forms.get(f.id),\r\n      id = getId(obj),\r\n      list = frm.getList(obj),\r\n      group = data.gf,\r\n      value = data.lf,\r\n      template = frm.getOptionTemplate(list),\r\n      text = template != null && template.render && !isAutoSuggest(obj) ? template.render(data, ew.jsRenderHelpers) : displayValue(data, obj) || value;\r\n    if (obj.options) {\r\n      // Selection list\r\n      let option;\r\n      if (obj.list) {\r\n        option = new ew.SelectionListOption(text, value, !!selected);\r\n      } else {\r\n        option = document.createElement(\"option\");\r\n        option.value = value;\r\n        option.innerHTML = text;\r\n        option.selected = !!selected;\r\n      }\r\n      let args = {\r\n        \"name\": id,\r\n        \"form\": f.$element,\r\n        data,\r\n        group,\r\n        option\r\n      };\r\n      $document$1.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\r\n      if (obj.list) {\r\n        obj.addOption(args.option);\r\n      } else {\r\n        if (args.group && !isSelect2(obj)) {\r\n          var _obj$querySelector;\r\n          let optGroup = Array.from((_obj$querySelector = obj.querySelector(\":scope > optgroup\")) != null ? _obj$querySelector : []).find(g => g.label == args.group);\r\n          if (!optGroup) {\r\n            optGroup = document.createElement(\"optgroup\");\r\n            optGroup.label = args.group;\r\n            obj.add(optGroup);\r\n          }\r\n          optGroup.appendChild(args.option);\r\n        } else {\r\n          obj.add(args.option);\r\n        }\r\n      }\r\n      return args.option.text;\r\n    }\r\n    return text;\r\n  }\r\n\r\n  // Select combobox option\r\n  function selectOption(obj, values, change) {\r\n    var _obj$dataset, _forms$get$getList, _forms$get$getList$pa;\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n    if (!obj || !values) return;\r\n    let $obj = $__default.default(obj);\r\n    values = Array.isArray(values) ? values : [values];\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        obj.value = values;\r\n      } else {\r\n        var _obj$options$;\r\n        $obj.val(values);\r\n        if (change && isSelect2(obj)) $obj.triggerHandler(\"change\");\r\n        if (obj.type == \"select-one\" && obj.selectedIndex == -1 && !((_obj$options$ = obj.options[0]) != null && _obj$options$.value)) obj.selectedIndex = 0; // Make sure an option is selected\r\n      }\r\n\r\n      if (isAutoSuggest(obj) && values.length == 1) {\r\n        let opts = obj.options || [];\r\n        for (let opt of opts) {\r\n          if (opt.value == values[0]) {\r\n            obj.value = opt.value;\r\n            obj.input.value = opt.text;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      obj.checked = convertToBool(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n    } else if (obj.type && obj.type != \"file\") {\r\n      $obj.val(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n      if (isHiddenTextArea($obj)) $obj.data(\"editor\").set();\r\n    }\r\n    // Auto-select if only one option\r\n    if (((_obj$dataset = obj.dataset) == null ? void 0 : _obj$dataset.autoselect) === \"false\")\r\n      // data-autoselect=\"false\"\r\n      return;\r\n    let form = getForm(obj),\r\n      autoSelect = form && !(form.id.endsWith(\"search\") || form.id.endsWith(\"srch\") || ((_forms$get$getList = forms.get(form.id).getList(obj)) == null ? void 0 : (_forms$get$getList$pa = _forms$get$getList.parentFields) == null ? void 0 : _forms$get$getList$pa.length) === 0); // Not search forms and has parent fields\r\n    if (autoSelect && obj.options) {\r\n      // Selection List\r\n      if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\r\n        obj.options[1].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      } else if (obj.options.length == 1 && !obj.options[0].selected) {\r\n        obj.options[0].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      }\r\n      if (isAutoSuggest(obj)) {\r\n        let opts = obj.options || [];\r\n        if (opts.length == 1) {\r\n          obj.value = opts[0].value;\r\n          obj.input.value = opts[0].text;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Fetch API\r\n  function _fetch(url, init) {\r\n    var _init, _init$headers, _init$headers$get;\r\n    (_init = init) != null ? _init : init = {};\r\n    init.headers = new Headers(init.headers || {});\r\n    let isApi = url.startsWith(getApiUrl()); // Is API request\r\n    if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION)\r\n      // Do NOT set JWT authorization header if Windows Authentication\r\n      init.headers.set(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n    if (isApi || (_init$headers = init.headers) != null && (_init$headers$get = _init$headers.get(\"Content-Type\")) != null && _init$headers$get.includes(\"application/json\")) {\r\n      // Add token in headers if sending to API or posting JSON data // PHP\r\n      init.headers.set(headerCase(ew.TOKEN_NAME_KEY), ew.TOKEN_NAME); // Send token name in header // PHP\r\n      init.headers.set(headerCase(ew.ANTIFORGERY_TOKEN_KEY), ew.ANTIFORGERY_TOKEN); // Send antiforgery token in header // PHP\r\n    }\r\n\r\n    if (!init.method || sameText(init.method, \"GET\")) {\r\n      // GET\r\n      url = setSearchParams(url, init.body);\r\n      delete init.body;\r\n    } else {\r\n      // POST\r\n      init.body = mergeSearchParams(init.body, {\r\n        [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n        [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n      }); // Add token name and antiforgery token // PHP\r\n    }\r\n\r\n    let args = {\r\n      url,\r\n      init\r\n    };\r\n    $document$1.trigger(\"fetch\", [args]);\r\n    return fetch(args.url, args.init);\r\n  }\r\n\r\n  // Ajax send\r\n  $document$1.ajaxSend(function (event, jqxhr, settings) {\r\n    let url = settings.url,\r\n      isApi = url.startsWith(getApiUrl()),\r\n      // Is API request\r\n      allowed = isApi || url.startsWith(ew.PATH_BASE) || url.startsWith(currentPage());\r\n    if (!allowed && url.match(/^http/i)) {\r\n      let objUrl = new URL(url);\r\n      allowed = objUrl.hostname == currentUrl.hostname; // Same host name\r\n    }\r\n\r\n    if (allowed) {\r\n      if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION)\r\n        // Do NOT set JWT authorization header if Windows Authentication\r\n        jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN); // Note: settings.headers won't work\r\n      if (isApi || $__default.default.isString(settings.contentType) && settings.contentType.includes(\"application/json\")) {\r\n        // Add token and antiforgery token in headers if sending to API or posting JSON data // PHP\r\n        jqxhr.setRequestHeader(headerCase(ew.TOKEN_NAME_KEY), ew.TOKEN_NAME);\r\n        jqxhr.setRequestHeader(headerCase(ew.ANTIFORGERY_TOKEN_KEY), ew.ANTIFORGERY_TOKEN);\r\n      } else if (sameText(settings.type, \"POST\")) {\r\n        // POST\r\n        let params = mergeSearchParams(new URLSearchParams(settings.data), {\r\n          [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n          [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n        }); // Add token name and antiforgery token // PHP\r\n        settings.data = params.toString();\r\n      }\r\n    }\r\n  });\r\n\r\n  // Ajax start\r\n  $document$1.ajaxStart(function () {\r\n    $document$1.data(\"_ajax\", true);\r\n    $__default.default(\"form.ew-form\").addClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.disableForm();\r\n      }\r\n    });\r\n  });\r\n\r\n  // Ajax stop (internal)\r\n  function _ajaxStop() {\r\n    $__default.default(\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) {\r\n          frm.enableForm();\r\n        }\r\n      }\r\n    });\r\n    $document$1.data(\"_ajax\", false);\r\n  }\r\n\r\n  // Ajax stop/error\r\n  $document$1.ajaxStop(_ajaxStop).ajaxError(_ajaxStop);\r\n\r\n  // Execute JavaScript in HTML loaded by Ajax\r\n  function executeScript(html, id, modal) {\r\n    let pattern = modal ? /<(head)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig : /<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig,\r\n      // If modal, scripts in template tags not executed by browser, execute manually\r\n      matches = html.replaceAll(pattern, \"\").matchAll(/<script[^>]*>[\\s\\S]*?<\\/script\\s*>/ig); // Do not execute scripts in template tags, use non-greedy [\\s\\S]*?\r\n    Array.from(document.createRange().createContextualFragment(Array.from(matches).map(m => m[0]).filter(s => !s.includes(\"$rowindex$\")).join(\"\")).querySelectorAll(\"script:not([type]), script[type='text/javascript']\")).sort((s1, s2) => s2.classList.contains(\"ew-apply-template\") ? 1 : s1.classList.contains(\"ew-apply-template\") ? -1 : 0) // Execute custom template first\r\n    .forEach((s, i) => addScript(s, \"scr_\" + id + \"_\" + i));\r\n  }\r\n\r\n  // Strip JavaScript in HTML loaded by Ajax\r\n  function stripScript(html) {\r\n    let matches = html.replaceAll(/<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig); // Do not strip scripts in template tags, use non-greedy [\\s\\S]*?\r\n    return Array.from(matches).filter(m => document.createRange().createContextualFragment(m[0]).querySelector(\"script:not([type]), script[type='text/javascript']\")).reduce((html, m) => html.replace(m[0], \"\"), html);\r\n  }\r\n\r\n  // Add SCRIPT tag\r\n  function addScript(text, id) {\r\n    let scr = text instanceof HTMLScriptElement ? text : document.createElement(\"SCRIPT\");\r\n    if ($__default.default.isString(text)) scr.text = text;\r\n    if (id) scr.id = id;\r\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\r\n  }\r\n\r\n  // Remove JavaScript added by Ajax\r\n  function removeScript(id) {\r\n    if (id) $__default.default(\"script[id^='scr_\" + id + \"_']\").remove();\r\n  }\r\n\r\n  /**\r\n   * Clean HTML loaded by Ajax for modal dialog\r\n   *\r\n   * @param {string} html - HTML string\r\n   * @param {bool} keepScripts - Keep script tags or not\r\n   * @returns HTML string\r\n   */\r\n  function getContent(html, keepScripts) {\r\n    var _m$;\r\n    html = html.trim().replace(/<head>[\\s\\S]*<\\/head>/, \"\");\r\n    let body = keepScripts ? html : stripScript(html),\r\n      m = body.match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\r\n    body = (_m$ = m == null ? void 0 : m[0]) != null ? _m$ : body;\r\n    let $content = $__default.default(body).find(\"section.content\");\r\n    return $content[0] ? $content.html() : body;\r\n  }\r\n\r\n  // Get all options of Selection list or Radio/Checkbox list as array\r\n  function getOptions(obj) {\r\n    return obj != null && obj.options ? Array.prototype.map.call(obj.options, opt => [opt.value, opt.text]) : [];\r\n  }\r\n\r\n  /**\r\n   * Show dialog for enabling two factor authentication\r\n   */\r\n  function enable2FA() {\r\n    document.body.style.cursor = \"wait\";\r\n    if (sameText(ew.TWO_FACTOR_AUTHENTICATION_TYPE, \"google\")) {\r\n      // Show QR Code and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]);\r\n      $__default.default.get(url, result => {\r\n        var _result$error4;\r\n        if (result != null && result.url) {\r\n          _prompt({\r\n            imageUrl: result.url,\r\n            html: ew.language.phrase(\"Scan2FAQrCode\"),\r\n            input: \"text\",\r\n            confirmButtonText: ew.language.phrase(\"Verify\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            willOpen: () => {\r\n              Swal.showLoading(Swal.getConfirmButton());\r\n              Swal.disableInput();\r\n              Swal.getImage().onload = () => {\r\n                Swal.enableInput();\r\n                Swal.hideLoading();\r\n                Swal.getInput().focus();\r\n              };\r\n            },\r\n            preConfirm: value => {\r\n              return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) Swal.showValidationMessage(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error3;\r\n            if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n              $__default.default(\"#enable-2fa\").addClass(\"d-none\");\r\n              $__default.default(\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error4 = result.error) != null && _result$error4.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    } else {\r\n      // Send OTP and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]);\r\n      let html = sameText(ew.TWO_FACTOR_AUTHENTICATION_TYPE, \"email\") ? ew.language.phrase(\"EnterOTPEmailAddress\") : ew.language.phrase(\"EnterOTPMobileNumber\");\r\n      $__default.default.get(url, result => {\r\n        var _result$error7;\r\n        if (result.success) {\r\n          _prompt({\r\n            html: html,\r\n            input: \"text\",\r\n            inputValue: result.account,\r\n            confirmButtonText: ew.language.phrase(\"SendOTP\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            preConfirm: value => {\r\n              return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) Swal.showValidationMessage(ew.language.phrase(\"SendOTPFailed\"));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error5;\r\n            if (result != null && (_result$error5 = result.error) != null && _result$error5.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              // Verify OTP\r\n              _prompt({\r\n                html: ew.language.phrase(\"EnterSecurityCode\"),\r\n                input: \"text\",\r\n                confirmButtonText: ew.language.phrase(\"Verify\"),\r\n                showLoaderOnConfirm: true,\r\n                allowEscapeKey: false,\r\n                allowOutsideClick: () => !Swal.isLoading(),\r\n                preConfirm: value => {\r\n                  return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n                    if ((result == null ? void 0 : result.success) !== true) Swal.showValidationMessage(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                    return result;\r\n                  }).catch(error => Swal.showValidationMessage(error));\r\n                }\r\n              }, result => {\r\n                var _result$error6;\r\n                if (result != null && (_result$error6 = result.error) != null && _result$error6.description) {\r\n                  showToast(result.error.description);\r\n                } else if (result != null && result.success) {\r\n                  showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n                  $__default.default(\"#enable-2fa\").addClass(\"d-none\");\r\n                  $__default.default(\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n                }\r\n              }).catch(err => showToast(err == null ? void 0 : err.message));\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error7 = result.error) != null && _result$error7.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Show dialog for disabling two factor authentication\r\n   */\r\n  function disable2FA() {\r\n    _prompt({\r\n      html: ew.language.phrase(\"Disable2FAConfirm\"),\r\n      preConfirm: value => {\r\n        if (value) return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_RESET])).then(result => {\r\n          var _result$error8;\r\n          if (result != null && (_result$error8 = result.error) != null && _result$error8.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"2FAResetFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error9;\r\n      if (result != null && (_result$error9 = result.error) != null && _result$error9.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"2FADisabled\"), \"success\");\r\n        $__default.default(\"#enable-2fa\").removeClass(\"d-none\");\r\n        $__default.default(\"#disable-2fa, #backup-codes\").addClass(\"d-none\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n\r\n  /**\r\n   * Show dialog for sending one time password\r\n   */\r\n  function sendOTP(account) {\r\n    _prompt({\r\n      html: ew.language.phrase(\"SendOTPConfirm\"),\r\n      preConfirm: value => {\r\n        let url = account ? getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, account]) : getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP]);\r\n        if (value) return $__default.default.get(url).then(result => {\r\n          var _result$error10;\r\n          if (result != null && (_result$error10 = result.error) != null && _result$error10.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"SendOTPFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error11;\r\n      if (result != null && (_result$error11 = result.error) != null && _result$error11.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"SendOTPSuccess\"), \"success\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n\r\n  /**\r\n   * Show backup codes for two factor authentication\r\n   */\r\n  function showBackupCodes() {\r\n    let html = \"<p>\" + ew.language.phrase(\"BackupCodesMsg\") + \"</p>\";\r\n    return _alert({\r\n      title: ew.language.phrase(\"BackupCodes\"),\r\n      html: html,\r\n      showDenyButton: true,\r\n      showLoaderOnDeny: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"CopyToClipboard\"),\r\n      denyButtonText: ew.language.phrase(\"GetNewCodes\"),\r\n      customClass: {\r\n        denyButton: \"btn btn-primary ew-swal2-deny-button\"\r\n      },\r\n      willOpen: () => {\r\n        Swal.showLoading();\r\n        Swal.disableButtons();\r\n        $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.enableButtons();\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n      },\r\n      preConfirm: () => {\r\n        let codes = copyToClipboard(Swal.getHtmlContainer().querySelector(\"textarea\"));\r\n        if (codes) showToast(ew.language.phrase(\"CopiedToClipboard\"), \"success\");\r\n        return false; // Keep the alert open\r\n      },\r\n\r\n      preDeny: async () => {\r\n        Swal.showLoading(Swal.getDenyButton());\r\n        await $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_NEW_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n        return false; // Keep the alert open\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Show Add Option dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLElement} args.lnk - Add option anchor element\r\n   * @param {string} args.el - Form element name\r\n   * @param {string} args.url - URL of the Add form\r\n   * @returns\r\n   */\r\n  function addOptionDialogShow(args) {\r\n    var _args$evt2;\r\n    args.lnk = args.lnk || ((_args$evt2 = args.evt) == null ? void 0 : _args$evt2.currentTarget);\r\n\r\n    // Hide dialog\r\n    var _hide = function () {\r\n      removeScript($dlg.data(\"args\").el);\r\n      var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n      if (frm) frm.destroyEditor();\r\n      $dlg.find(\".modal-body\").html(\"\");\r\n      $dlg.find(\".modal-footer .btn-primary\").off();\r\n      $dlg.data(\"showing\", false);\r\n    };\r\n    var $dlg = ew.addOptionDialog || $__default.default(\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-add-opt-dialog not found.\");\r\n      return;\r\n    }\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true);\r\n\r\n    // Submission success\r\n    var _submitSuccess = function (data) {\r\n      var _results;\r\n      var results = data,\r\n        args = $dlg.data(\"args\"),\r\n        frm = forms.get(args.lnk),\r\n        // form object\r\n        objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(),\r\n        // Get object name from form\r\n        el = args.el,\r\n        // HTML element name\r\n        re = /^x(\\d+)_/,\r\n        m = el.match(re),\r\n        // Check row index\r\n        prefix = m ? m[0] : \"x_\",\r\n        index = m ? m[1] : -1,\r\n        name = el.replace(re, \"x_\"),\r\n        list = frm.getList(el);\r\n      if ($__default.default.isString(data)) results = parseJson(data);\r\n      if ((_results = results) != null && _results.success && results[objName]) {\r\n        // Success\r\n        $dlg.modal(\"hide\");\r\n        var result = results[objName],\r\n          form = frm.$element[0],\r\n          // HTML form or DIV\r\n          obj = getElements(el, form);\r\n        if (obj) {\r\n          var lf = list.linkField,\r\n            dfs = list.displayFields.slice(),\r\n            // Clone\r\n            ffs = list.filterFields.slice(),\r\n            // Clone\r\n            pfs = list.parentFields.slice(); // Clone\r\n          pfs.forEach((pf, i) => {\r\n            if (pf.split(\" \").length == 1)\r\n              // Parent field in the same table, add row index\r\n              pfs[i] = pfs[i].replace(/^x_/, prefix);\r\n          });\r\n          var lfv = lf != \"\" ? result[lf] : \"\",\r\n            row = {\r\n              lf: lfv\r\n            };\r\n          dfs.forEach((df, i) => {\r\n            if (df in result) row[\"df\" + (i > 0 ? i + 1 : \"\")] = result[df];\r\n          });\r\n          ffs.forEach((ff, i) => {\r\n            if (ff in result) row[\"ff\" + (i > 0 ? i + 1 : \"\")] = result[ff];\r\n          });\r\n          if (lfv && dfs.length > 0 && row[\"df\"]) {\r\n            if (list.ajax === null)\r\n              // Non-Ajax\r\n              list.lookupOptions.push(row);\r\n            var arp = pfs.map(pf => getOptionValues(pf, form)),\r\n              // Get the parent field values\r\n              args = {\r\n                \"data\": row,\r\n                \"parents\": arp,\r\n                \"valid\": true,\r\n                \"name\": getId(obj),\r\n                \"form\": form\r\n              };\r\n            $document$1.trigger(\"addoption\", [args]);\r\n            if (args.valid) {\r\n              // Add the new option\r\n              var ar = getOptions(obj),\r\n                txt = newOption(obj, row, form);\r\n              if (obj.options) {\r\n                obj.options[obj.options.length - 1].selected = true;\r\n                if (obj.list) {\r\n                  // Radio/Checkbox list\r\n                  $__default.default(obj.target).find(\"input\").last().trigger(\"focus\");\r\n                }\r\n                if (isAutoSuggest(obj)) {\r\n                  $__default.default(obj).val(lfv).trigger(\"change\");\r\n                  $__default.default(obj.input).val(txt).trigger(\"focus\");\r\n                } else {\r\n                  $__default.default(obj).trigger(\"change\").trigger(\"focus\");\r\n                }\r\n              }\r\n              var $form = $__default.default(form),\r\n                suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n                cnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix).val();\r\n              if (cnt > 0) {\r\n                // Grid-Add/Edit, update other rows\r\n                for (var i = 1; i <= cnt; i++) {\r\n                  if (i == index) continue;\r\n                  var obj2 = getElements(name.replace(/^x/, \"x\" + i), form),\r\n                    ar2 = getOptions(obj2);\r\n                  if (JSON.stringify(ar) != JSON.stringify(ar2))\r\n                    // Not same options\r\n                    continue;\r\n                  newOption(obj2, row, form);\r\n                  obj2.render == null ? void 0 : obj2.render(); // Selection list\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        var _results2;\r\n        // Failure\r\n        if ((_results2 = results) != null && _results2.error) {\r\n          let error = getError(results);\r\n          if (error) _alert(error);\r\n        } else {\r\n          var msg,\r\n            $div = $__default.default(\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\r\n          if ($div[0]) {\r\n            msg = $div.html();\r\n          } else {\r\n            var _results3;\r\n            msg = ((_results3 = results) == null ? void 0 : _results3.failureMessage) || data;\r\n            if (!msg || String(msg).trim() == \"\") msg = ew.language.phrase(\"InsertFailed\");\r\n          }\r\n          _alert(msg);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Fail\r\n    var _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Submit\r\n    var _submit = async function (e) {\r\n      let $dlg = ew.addOptionDialog,\r\n        form = $dlg.find(\".modal-body form\")[0],\r\n        frm = forms.get(form.id),\r\n        btn = e == null ? void 0 : e.target,\r\n        $btn = $__default.default(btn);\r\n      if (await frm.canSubmit(e)) {\r\n        $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n        document.body.style.cursor = \"wait\";\r\n        $__default.default.post(getApiUrl([ew.API_ADD_ACTION, form.elements[ew.API_OBJECT_NAME].value]), $__default.default(form).serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n          $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n          document.body.style.cursor = \"default\";\r\n        });\r\n      }\r\n      return false;\r\n    };\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    // Get form HTML\r\n    var success = function (data) {\r\n      var frm = forms.get(args.lnk),\r\n        prefix = \"x_\",\r\n        m = args.el.match(/^(x\\d+_)/);\r\n      if (m)\r\n        // Contains row index\r\n        prefix = m[1];\r\n      var list = frm.getList(args.el),\r\n        pfs = list.parentFields.slice() // Clone\r\n        .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, prefix) : pf),\r\n        // Parent field in the same table, add row index\r\n        form = frm.htmlForm,\r\n        ar = pfs.map(pf => getOptionValues(pf, form)),\r\n        ar2 = pfs.map(pf => getOptionTexts(pf, form)),\r\n        ffs = list.filterFieldVars.slice(); // Clone\r\n      $dlg.find(\".modal-title\").html($__default.default(args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\r\n      $dlg.find(\".modal-body\").html(stripScript(data));\r\n      var form = $dlg.find(\".modal-body form\")[0];\r\n      if (form) {\r\n        // Set the filter field value\r\n        $__default.default(form).on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") return _submit();\r\n        });\r\n        // $document.one(\"updatedone\", () => {\r\n        //     ar.forEach((v, i) => {\r\n        //         let obj = getElements(ffs[i], form);\r\n        //         if (obj) {\r\n        //             if (obj.options || obj.length) { // Selection list\r\n        //                 $(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n        //             } else {\r\n        //                 selectOption(obj, v);\r\n        //             }\r\n        //         }\r\n        //     });\r\n        // });\r\n      }\r\n\r\n      ew.addOptionDialog = $dlg.modal(\"show\");\r\n      $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n      if (form) {\r\n        // Set the filter field value\r\n        ar.forEach((v, i) => {\r\n          var obj = getElements(ffs[i], form);\r\n          if (obj && v[0]) {\r\n            if (isAutoSuggest(obj)) {\r\n              // AutoSuggest\r\n              obj.value = v[0];\r\n              obj.input.value = ar2[i][0];\r\n              obj.add(v[0], ar2[i][0], true);\r\n            } else if (obj.options || obj.length) {\r\n              // Selection list\r\n              newOption(obj, {\r\n                lf: v[0]\r\n              }, frm, true);\r\n              // $(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n            } else {\r\n              // Text\r\n              obj.value = v[0];\r\n            }\r\n          }\r\n        });\r\n      }\r\n      executeScript(data, args.el, true);\r\n      $dlg.trigger(\"load.ew\"); // Trigger load event\r\n    };\r\n\r\n    $__default.default.get(args.url, success).fail(_fail);\r\n    return false;\r\n  }\r\n\r\n  // Hide Modal dialog\r\n  function modalDialogHide() {\r\n    let $dlg = $__default.default(this),\r\n      args = $dlg.data(\"args\"),\r\n      frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n    removeScript(\"modal_dialog\");\r\n    frm == null ? void 0 : frm.destroyEditor();\r\n    $dlg.find(\".modal-footer .btn-primary\").off();\r\n    $dlg.find(\".modal-dialog\").removeClass((i, className) => {\r\n      let m = className.match(/table\\-\\w+/);\r\n      return m ? m[0] : \"\";\r\n    });\r\n    $dlg.data({\r\n      showing: false,\r\n      url: null\r\n    });\r\n    if (args != null && args.reload) window.location.reload();\r\n  }\r\n\r\n  /**\r\n   * Show modal dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @param {string} args.url - URL of content\r\n   * @param {string} args.html - HTML content\r\n   * @param {string|null} args.btn - Button phrase ID\r\n   * @param {boolean} args.footer - Show footer (default true)\r\n   * @param {string} args.caption - Caption in dialog header\r\n   * @param {boolean} args.reload - Reload page after hiding dialog or not\r\n   * @param {string} args.size - Class name of modal dialog 'modal-sm'|'modal-md'|modal-lg'|'modal-xl' (default)\r\n   * @param {Function} args.callback - Callback function (success function after submitting the form)\r\n   * @returns false\r\n   */\r\n  function modalDialogShow(args) {\r\n    var _args$evt3, _bootstrap$Tooltip$ge4, _args$evt4, _args$evt4$currentTar, _args$evt5, _args$evt5$currentTar, _$dlg$data, _$dlg$data2;\r\n    args.lnk || (args.lnk = (_args$evt3 = args.evt) == null ? void 0 : _args$evt3.currentTarget);\r\n    (_bootstrap$Tooltip$ge4 = bootstrap.Tooltip.getInstance(args.lnk)) == null ? void 0 : _bootstrap$Tooltip$ge4.hide();\r\n    let {\r\n        ewAction,\r\n        action\r\n      } = args,\r\n      f = args.f || ((_args$evt4 = args.evt) == null ? void 0 : (_args$evt4$currentTar = _args$evt4.currentTarget) == null ? void 0 : _args$evt4$currentTar.form);\r\n    if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n      // Grid-Edit and Multi-Edit/Update\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let url = args.url || ((_args$evt5 = args.evt) == null ? void 0 : (_args$evt5$currentTar = _args$evt5.currentTarget) == null ? void 0 : _args$evt5$currentTar.dataset.url),\r\n      $dlg = ew.modalDialog || $__default.default(\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\r\n\r\n    if ($dlg.data(\"showing\") && url && $dlg.data(\"url\") == url) return false;\r\n    $dlg.data({\r\n      showing: true,\r\n      url: url\r\n    });\r\n    args.reload = false;\r\n\r\n    // Size\r\n    $dlg.find(\".modal-dialog\").removeClass(\"modal-sm modal-md modal-lg modal-xl\").addClass(args.size || \"modal-xl\");\r\n\r\n    // Caption\r\n    let _caption = function () {\r\n      let args = $dlg.data(\"args\"),\r\n        $lnk = $__default.default(args.lnk);\r\n      return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\r\n    };\r\n\r\n    // Button text\r\n    let _button = function () {\r\n      let args = $dlg.data(\"args\");\r\n      if (args.btn === null) return \"\";else if (args.btn && args.btn != \"\") return ew.language.phrase(args.btn);\r\n      return _caption();\r\n    };\r\n\r\n    // Fail\r\n    let _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      if (o.status) _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Always\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Check if current page\r\n    let _current = function (url) {\r\n      let a = document.createElement(\"a\");\r\n      a.href = url;\r\n      return window.location.pathname.endsWith(a.pathname);\r\n    };\r\n\r\n    // Close hidden dialog\r\n    let _hide = function () {\r\n      if ($dlg.data(\"showing\") && !$dlg.hasClass(\"show\")) $dlg.trigger(\"hidden.bs.modal\"); // Call modalDialogHide()\r\n    };\r\n\r\n    /**\r\n     * Handle result\r\n     *\r\n     * @param {Object} result - Result object\r\n     * @param {string|Object} result.error - Error message or object\r\n     * @param {string} result.error.message - Error message\r\n     * @param {string} result.error.description - Error message\r\n     * @param {string} result.failureMessage - Failure message\r\n     * @param {string} result.successMessage - Success message\r\n     * @param {string} result.warningMessage - Warning message\r\n     * @param {string} result.message - Message\r\n     * @param {string} result.url - Redirection URL\r\n     * @param {string} result.modal - Redirect to result.url in current modal dialog\r\n     * @param {boolean} result.view - result.url is View page => No primary button\r\n     * @param {string} result.caption - Caption of modal dialog for result.url\r\n     * @param {boolean} result.reload - Reload current page\r\n     * @param {boolean} result.success - Result => Call callback if function\r\n     */\r\n    let handleResult = function (result) {\r\n      let error = getError(result);\r\n      if (error) {\r\n        _alert(error);\r\n        _hide();\r\n      } else if ($__default.default.isString(result.warningMessage)) {\r\n        _alert(result.warningMessage, cb, \"warning\");\r\n        _hide();\r\n      } else if ($__default.default.isString(result.message)) {\r\n        _alert(result.message, cb, \"body\");\r\n        _hide();\r\n      } else if ($__default.default.isString(result.successMessage)) {\r\n        _alert(result.successMessage, cb, \"success\");\r\n        _hide();\r\n      } else if (result.reload) {\r\n        $dlg.modal(\"hide\");\r\n        window.location.reload();\r\n      } else if ($__default.default.isBoolean(result.success) && isFunction$2(args == null ? void 0 : args.callback)) {\r\n        // If success or failure and callback is function, call the callback\r\n        $dlg.modal(\"hide\");\r\n        args.callback(result);\r\n      } else if (result.url) {\r\n        let url = result.url;\r\n        if (result.modal) {\r\n          if (_current(url)) {\r\n            // Return to current page\r\n            if (!result.error) {\r\n              $dlg.modal(\"hide\");\r\n              refresh(fetch(url));\r\n            }\r\n          } else {\r\n            // Return to other page\r\n            let args = $dlg.data(\"args\");\r\n            args.reload = true;\r\n            args.url = url;\r\n            if (result.caption) args.caption = result.caption;\r\n            args.btn = result.view ? null : \"\";\r\n            $dlg.data({\r\n              args,\r\n              url\r\n            });\r\n            url = setSearchParams(url, {\r\n              modal: \"1\",\r\n              rnd: random()\r\n            });\r\n            document.body.style.cursor = \"wait\";\r\n            $__default.default.get(url).done(success).fail(_fail).always(_always);\r\n          }\r\n        } else {\r\n          $dlg.modal(\"hide\");\r\n          window.location = sanitizeUrl(url);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Create buttons\r\n    let _createButtons = function () {\r\n      let $footer = $dlg.find(\".modal-footer\").empty(),\r\n        // Empty the footer\r\n        $btn = $dlg.find(\".card-body button[type=submit]\").first().addClass(\"ew-submit\").on(\"click\", _submit); // Find submit button found in card body\r\n      if (!$btn[0]) {\r\n        // No submit button found in card body\r\n        $dlg.find(\".modal-body .ew-modal-buttons\").contents().clone().find(\"button\").each(function () {\r\n          // Find buttons in <template>\r\n          if (this.type == \"submit\") {\r\n            this.type = \"button\"; // Convert to normal button\r\n            this.classList.add(\"ew-submit\");\r\n            if (this.id == \"btn-cancel\") this.classList.add(\"ew-cancel\"); // Cancel button with type=\"submit\"\r\n            let $this = $__default.default(this);\r\n            $this.on(\"click\", function (e) {\r\n              if (this.dataset.ewAction == \"set-action\")\r\n                // Set value first\r\n                this.form.elements[\"action\"].value = this.dataset.value;\r\n              $this.data(\"ajax\") === false ? $__default.default(this.form).trigger(\"submit\") : _submit(e);\r\n            });\r\n          } else if (this.id == \"btn-cancel\") {\r\n            if (this.dataset.href) {\r\n              if (samePath(this.dataset.href, currentUrl.pathname)) this.setAttribute(\"data-bs-dismiss\", \"modal\");else $__default.default(this).on(\"click\", () => redirect(this.dataset.href));\r\n            } else {\r\n              this.setAttribute(\"data-bs-dismiss\", \"modal\");\r\n            }\r\n          }\r\n          $footer[0].appendChild(this);\r\n        }); // Clone buttons and append to footer\r\n        if (!$dlg.find(\".card-body button[type=submit], .modal-footer .btn\")[0]) {\r\n          // No buttons found\r\n          let btn = _button();\r\n          if (btn) {\r\n            $__default.default('<button type=\"button\" class=\"btn btn-primary ew-btn\">' + btn + '</button>').on(\"click\", _submit).appendTo($footer);\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CancelBtn\") + '</button>');\r\n          } else {\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CloseBtn\") + '</button>');\r\n          }\r\n        }\r\n        $footer.find(\"button\").on(\"mousedown\", e => e.preventDefault()); // Do not focus button by mouse down\r\n        $footer.find(\".btn-primary\").focus();\r\n      }\r\n    };\r\n\r\n    // Check return URL\r\n    let _return = response => {\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n      if (returnUrl && args.table && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $__default.default(\".ew-grid.\" + args.table).find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    };\r\n\r\n    // Submit success\r\n    let _submitSuccess = async function (response) {\r\n      let args = $dlg.data(\"args\"); // Get arguments first or it will be removed by modalDialogHide()\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n        if (isFunction$2(args == null ? void 0 : args.callback)) {\r\n          // If callback is function, call the callback function then return\r\n          let error = getError(result);\r\n          if (error) showToast(error);else $dlg.modal(\"hide\");\r\n          args.callback(result);\r\n          return;\r\n        }\r\n        handleResult(result);\r\n      } else {\r\n        let data = await response.clone().text(),\r\n          body = getContent(data).trim(); // Make sure no leading/trailing space\r\n        if (body.startsWith(\"<\") && body.endsWith(\">\")) {\r\n          // HTML\r\n          if (args.ajax && args.action == \"add\" && document.querySelector(\"main.ew-no-record\") && $__default.default(body).find(\"main:not(.ew-no-record)\")[0]) {\r\n            // No existing record, new record added\r\n            $dlg.modal(\"hide\");\r\n            await refresh(Promise.resolve(response));\r\n            _return(response);\r\n            return;\r\n          }\r\n          $dlg.find(\".modal-body\").html(body);\r\n          $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n          // If callback is function and no modal buttons, call the callback function then return\r\n          if (!$dlg.find(\".modal-body .ew-modal-buttons\").length && isFunction$2(args == null ? void 0 : args.callback)) {\r\n            $dlg.modal(\"hide\");\r\n            args.callback(response);\r\n            return;\r\n          }\r\n          _createButtons();\r\n          executeScript(data, \"modal_dialog\", true);\r\n          $dlg.trigger(\"load.ew\"); // Trigger load event\r\n        } else if (data) {\r\n          $dlg.modal(\"hide\");\r\n          _alert(data);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Submit\r\n    let _submit = async function (e) {\r\n      let form = $dlg.find(\".modal-body form\")[0],\r\n        $form = $__default.default(form),\r\n        frm = forms.get(form.id),\r\n        btn = e == null ? void 0 : e.target;\r\n      if (btn.classList.contains(\"disabled\")) return false;\r\n      if (btn.classList.contains(\"ew-cancel\")) {\r\n        // Cancel button with type=\"submit\"\r\n        $__default.default.post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\r\n      } else if (await frm.canSubmit(e)) {\r\n        document.body.style.cursor = \"wait\";\r\n        let p = _fetch($form.attr(\"action\"), {\r\n          method: \"POST\",\r\n          body: $form.serialize()\r\n        }).catch(_fail).finally(() => {\r\n          frm.enableForm();\r\n          _always();\r\n        });\r\n        if (frm.submitWithFetch) {\r\n          p.then(async response => {\r\n            var _resp$headers$get;\r\n            // Check error before refresh\r\n            let resp = response.clone(),\r\n              isJson = (_resp$headers$get = resp.headers.get(\"Content-Type\")) == null ? void 0 : _resp$headers$get.includes(\"json\"),\r\n              result = isJson ? await resp.json() : null,\r\n              hasErrors = (result == null ? void 0 : result.validation) || getError(result);\r\n            if (!isJson || !hasErrors)\r\n              // HTML or JSON without error => close dialog\r\n              $dlg.modal(\"hide\");\r\n            let args = {\r\n                form,\r\n                result: Promise.resolve(response),\r\n                context: hasErrors ? \"#ew-modal-dialog.show .modal-body\" : null\r\n              },\r\n              evt = $__default.default.Event(\"aftersubmit\", {\r\n                originalEvent: e\r\n              });\r\n            frm.trigger(evt, [args]);\r\n          });\r\n        } else {\r\n          p.then(_submitSuccess);\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    let success = function (data) {\r\n      let result = parseJson(data);\r\n      if ($__default.default.isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        let args = $dlg.data(\"args\"),\r\n          $lnk = $__default.default(args.lnk),\r\n          body = getContent(data);\r\n        $dlg.find(\".modal-title\").html(_caption());\r\n        $dlg.find(\".modal-body\").html(body);\r\n        $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n        _createButtons();\r\n        $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n        let lnkData = $lnk.data() || {};\r\n        if (lnkData.table) $dlg.find(\".modal-dialog\").addClass(\"table-\" + lnkData.table);\r\n        $dlg.find(\".modal-body form\").on(\"keydown\", e => {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") {\r\n            $dlg.find(\".modal-footer .btn.btn-primary\").trigger(\"click\");\r\n            return false;\r\n          }\r\n        });\r\n        if (lnkData.ajax && lnkData.table && lnkData.action == \"view\") {\r\n          // Modal View page and use Ajax actions\r\n          [\".ew-add\", \".ew-copy\", \".ew-edit\", \".ew-delete\"].forEach(className => {\r\n            let $dlglnk = $dlg.find(\".modal-body \" + className + \"[data-ew-action=modal]\"),\r\n              // Link inside modal dialog\r\n              $lnk = $__default.default(\"[data-ew-action=modal][data-table='\" + lnkData.table + \"'][data-url='\" + $dlglnk.data(\"url\") + \"']\").not(\".modal-body *\").first(); // Link outside modal dialog\r\n            $lnk[0] ? $dlglnk.on(\"click\", e => {\r\n              e.preventDefault();\r\n              e.stopImmediatePropagation();\r\n              $lnk.trigger(\"click\"); // Click the link outside\r\n            }) : $dlglnk.addClass(\"d-none\"); // Hide the link\r\n          });\r\n        }\r\n\r\n        ew.modalDialog = $dlg.modal(\"show\");\r\n        executeScript(data, \"modal_dialog\", true);\r\n        // Fix for CKEditor\r\n        let modal = bootstrap.Modal.getInstance($dlg[0]);\r\n        if (!modal._focustrap.__handleFocusin) {\r\n          modal._focustrap.__handleFocusin = modal._focustrap._handleFocusin;\r\n          modal._focustrap._handleFocusin = function (e) {\r\n            var _e$target10;\r\n            // Use function for \"this\"\r\n            if ((_e$target10 = e.target) != null && _e$target10.matches(\"[class^=cke_dialog_]\"))\r\n              // Element from CKEditor dialog\r\n              return; // Do not focus the modal\r\n            this.__handleFocusin(e);\r\n          };\r\n        }\r\n        $dlg.trigger(\"load.ew\"); // Trigger load event\r\n      }\r\n    };\r\n\r\n    let show = function (html) {\r\n      let args = $dlg.data(\"args\");\r\n      $dlg.find(\".modal-title\").html(_caption());\r\n      $dlg.find(\".modal-body\").html(html);\r\n      _createButtons();\r\n      $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n      ew.modalDialog = $dlg.modal(\"show\");\r\n    };\r\n\r\n    // Restore previous callback\r\n    if (args.callback === true && (_$dlg$data = $dlg.data(\"args\")) != null && _$dlg$data.callback) args.callback = $dlg.data(\"args\").callback;\r\n    if (url && (_$dlg$data2 = $dlg.data(\"args\")) != null && _$dlg$data2.reload) {\r\n      // About to load URL but previous result required reload\r\n      args.reload = true; // Carry the reload state to current args\r\n      $dlg.data(\"args\").reload = false; // Remove reload so \"hidden\" event will not reload\r\n    }\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n    if (url) {\r\n      document.body.style.cursor = \"wait\";\r\n      let params = ew.getSearchParams(url);\r\n      params.set(\"rnd\", random());\r\n      if (params.get(\"action\") != \"delete\") params.set(\"modal\", \"1\");\r\n      $__default.default.ajax({\r\n        url: setSearchParams(url, params),\r\n        method: f ? \"POST\" : \"GET\",\r\n        data: f ? $__default.default(f).serialize() : \"\",\r\n        headers: args.json ? {\r\n          Accept: \"application/json, */*; q=0.01\"\r\n        } : {} // JSON response\r\n      }).done(success).fail(_fail).always(_always);\r\n    } else if (args.html) {\r\n      show(args.html);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Show dialog for import\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @returns\r\n   */\r\n  function importDialogShow(args) {\r\n    var _args$evt6, _bootstrap$Tooltip$ge5;\r\n    args.lnk = args.lnk || ((_args$evt6 = args.evt) == null ? void 0 : _args$evt6.currentTarget);\r\n    (_bootstrap$Tooltip$ge5 = bootstrap.Tooltip.getInstance(args.lnk)) == null ? void 0 : _bootstrap$Tooltip$ge5.hide();\r\n    let $dlg = ew.importDialog || $__default.default(\"#ew-import-dialog\");\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-import-dialog not found.\");\r\n      return false;\r\n    }\r\n    let $input = $dlg.find(\"#importfiles\"),\r\n      $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n      $bd = $dlg.find(\".modal-body\"),\r\n      $data = $bd.find(\":input[id!=importfiles]\"),\r\n      $message = $bd.find(\".message\"),\r\n      $progress = $bd.find(\".progress\"),\r\n      table,\r\n      sse;\r\n\r\n    // Add row to table\r\n    let addRow = function (result) {\r\n      let {\r\n          row,\r\n          success,\r\n          error,\r\n          count\r\n        } = result,\r\n        callback = () => {\r\n          table.addRow(row).then(r => r.getElement().classList.toggle(\"text-danger\", error));\r\n          if (error) console.log(ew.language.phrase(\"ImportRowError\").replace(\"%i\", count + \" \" + JSON.stringify(row)).replace(\"%e\", error));\r\n        };\r\n      row = {\r\n        \"_index\": count,\r\n        \"_success\": success,\r\n        \"_error\": error,\r\n        ...row\r\n      };\r\n      if (!table) {\r\n        table = new Tabulator(\"#ew-import-dialog .result\", $__default.default.extend({\r\n          data: [row],\r\n          index: \"_index\",\r\n          autoColumns: true,\r\n          autoColumnsDefinitions: definitions => {\r\n            definitions.forEach(column => {\r\n              column.headerSort = false;\r\n              column.resizable = false;\r\n              if ([\"_index\", \"_error\"].includes(column.field)) {\r\n                column.visible = false;\r\n              } else if (column.field == \"_success\") {\r\n                column.title = \"#\";\r\n                column.headerSort = true;\r\n                column.headerSortTristate = true;\r\n                column.formatter = cell => {\r\n                  cell.getElement().style.textOverflow = \"clip\";\r\n                  let row = cell.getRow(),\r\n                    data = row.getData();\r\n                  if (data._error) new bootstrap.Tooltip(row.getElement(), {\r\n                    placement: \"bottom\",\r\n                    title: data._error,\r\n                    container: \"#ew-import-dialog .result\"\r\n                  });\r\n                  return (data._success ? '<i class=\"fa-solid fa-check text-success\"></i>' : '<i class=\"fa-solid fa-xmark text-danger\"></i>') + \" #\" + data._index;\r\n                };\r\n              }\r\n            });\r\n            return definitions;\r\n          }\r\n        }, ew.importTabulatorOptions));\r\n        table.on(\"tableBuilt\", () => table.element.querySelector(\".tabulator-row\").classList.toggle(\"text-danger\", error));\r\n      } else {\r\n        table.initialized ? callback() : table.on(\"tableBuilt\", callback);\r\n      }\r\n    };\r\n\r\n    // Enable buttons\r\n    let enableButtons = enabled => $dlg.find(\".modal-footer .btn\").prop(\"disabled\", !enabled);\r\n\r\n    // Show message\r\n    let showMessage = function (msg, classname) {\r\n      let $msg = $__default.default(\"<div>\" + msg + \"</div>\");\r\n      if (classname) $msg.addClass(classname);\r\n      $message.removeClass(\"d-none\").html($msg);\r\n      if (classname == \"text-danger\") enableButtons(true);\r\n    };\r\n\r\n    // Hide message\r\n    let hideMessage = () => $message.addClass(\"d-none\").html(\"\");\r\n\r\n    // Show progress\r\n    let showProgress = (pc, classname) => $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"bg-success bg-info\").addClass(classname || \"bg-success\").attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\");\r\n\r\n    // Hide progress\r\n    let hideProgress = () => $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\");\r\n\r\n    // Upload progress\r\n    let uploadProgress = function (data) {\r\n      const pc = parseInt(100 * data.loaded / data.total, 10);\r\n      showProgress(pc, \"bg-primary\");\r\n      if (pc === 100) showMessage(ew.language.phrase(\"ImportUploadComplete\"), \"text-primary\");else showMessage(ew.language.phrase(\"ImportUploadProgress\").replace(\"%p\", pc), \"text-primary\");\r\n    };\r\n\r\n    // Update import progress\r\n    let updateProgress = function (e) {\r\n      const result = parseJson(e.data) || {};\r\n      try {\r\n        let tcnt = result.totalCount || 0,\r\n          cnt = result.count || 0,\r\n          scnt = result.successCount || 0,\r\n          fcnt = result.failCount || 0,\r\n          filename = result.file;\r\n        if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) {\r\n          // Show progress\r\n          if (result.row) addRow(result);\r\n          let pc = parseInt(100 * cnt / tcnt, 10);\r\n          showProgress(pc);\r\n          showMessage(ew.language.phrase(\"ImportResult\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", filename).replace(\"%s\", scnt).replace(\"%e\", fcnt), fcnt > 0 ? \"text-danger\" : \"text-primary\");\r\n        }\r\n      } catch (e) {}\r\n    };\r\n\r\n    // Import complete\r\n    let importComplete = function (e) {\r\n      var _sse;\r\n      let msg = [],\r\n        result = parseJson(e.data) || {},\r\n        fileResults = result.files;\r\n      showProgress(100);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n      if (Array.isArray(fileResults)) {\r\n        fileResults.forEach(fileResult => {\r\n          let tcnt = fileResult.totalCount || 0,\r\n            cnt = fileResult.count || 0,\r\n            scnt = fileResult.successCount || 0,\r\n            fcnt = fileResult.failCount || 0;\r\n          msg.push(ew.language.phrase(\"ImportResult\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file).replace(\"%s\", scnt).replace(\"%e\", fcnt));\r\n        });\r\n      }\r\n      if (result.success) {\r\n        if (result.rollbacked) msg.push(ew.language.phrase(\"ImportSave\"));\r\n        showMessage(msg.join(\"<br>\"), \"text-success\");\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\r\n      } else {\r\n        if (ew.IMPORT_MAX_FAILURES > 0 && result.failCount >= ew.IMPORT_MAX_FAILURES) msg.push(ew.language.phrase(\"ImportMaxFailuresExceeded\").replace(\"%s\", ew.IMPORT_MAX_FAILURES));\r\n        showMessage(msg.join(\"<br>\"), \"text-danger\"); // Show error message\r\n      }\r\n      // hideProgress();\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").prop(\"disabled\", false); // Enable the close button\r\n      let $btn = $dlg.find(\".modal-footer .ew-import-btn\").toggleClass(\"d-none\", !result.rollbacked || !result.success); // Show/Hide the import button\r\n      if (result.rollbacked) $btn.off(\"click\").one(\"click\", saveImport);\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse = sse) == null ? void 0 : _sse.close();\r\n    };\r\n\r\n    // Import fail\r\n    let importFail = function (e) {\r\n      var _sse2;\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n      let result = parseJson(e.data) || {};\r\n      if (result.error) showMessage(result.error, \"text-danger\");\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse2 = sse) == null ? void 0 : _sse2.close();\r\n    };\r\n\r\n    // Import file\r\n    let importFiles = function (filetoken) {\r\n      var _table;\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table = table) == null ? void 0 : _table.clearData();\r\n      $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      params.set(\"rollback\", \"1\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    };\r\n\r\n    // Save import\r\n    let saveImport = function (e) {\r\n      var _table2;\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table2 = table) == null ? void 0 : _table2.clearData();\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, $input.data(ew.API_FILE_TOKEN_NAME));\r\n      params.set(\"rollback\", \"0\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    };\r\n    let options = ew.importUploadOptions;\r\n    if (!options.acceptFileTypes) options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXTENSIONS.replace(/,/g, '|') + ')$', 'i');\r\n    if (!$input.data(\"blueimpFileupload\")) {\r\n      $input.fileupload(Object.assign({\r\n        url: getApiUrl(ew.API_UPLOAD_ACTION),\r\n        dataType: \"json\",\r\n        autoUpload: true,\r\n        singleFileUploads: false,\r\n        dropZone: $dropzone,\r\n        messages: {\r\n          acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n          maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n          maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n          minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n        },\r\n        beforeSend: function (jqxhr, settings) {\r\n          settings.data.set(\"session\", ew.SESSION_ID);\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n          if (ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION)\r\n            // Do NOT set JWT authorization header if Windows Authentication\r\n            jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n        },\r\n        done: function (e, data) {\r\n          var _data$result, _data$result$files;\r\n          if (Array.isArray(data == null ? void 0 : (_data$result = data.result) == null ? void 0 : (_data$result$files = _data$result.files) == null ? void 0 : _data$result$files.importfiles)) {\r\n            let ok = true;\r\n            data.result.files.importfiles.forEach(function (file, index) {\r\n              if (file.error) {\r\n                showMessage(ew.language.phrase(\"ImportUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n                ok = false;\r\n              }\r\n            }); // Show upload errors for each file\r\n            if (ok) importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\r\n          }\r\n        },\r\n\r\n        change: function (e, data) {\r\n          hideMessage();\r\n        },\r\n        processfail: function (e, data) {\r\n          data.files.forEach(function (file, index) {\r\n            if (file.error) showMessage(ew.language.phrase(\"ImportUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n          }); // Show process errors for each file\r\n        },\r\n\r\n        fail: function (e, data) {\r\n          showMessage(ew.language.phrase(\"ImportServerError\").replace(\"%s\", data.textStatus).replace(\"%t\", data.errorThrown), \"text-danger\");\r\n        },\r\n        progressall: function (e, data) {\r\n          uploadProgress(data);\r\n        }\r\n      }, options));\r\n    }\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function () {\r\n      let $this = $__default.default(this);\r\n      if ($this.data(\"imported\")) {\r\n        $this.data(\"imported\", false);\r\n        window.location.reload();\r\n      }\r\n    });\r\n    hideMessage();\r\n    ew.importDialog = $dlg.on(\"show.bs.modal\", function () {\r\n      var _this$querySelector, _table3, _table4;\r\n      hideProgress();\r\n      (_this$querySelector = this.querySelector(\".modal-footer .ew-import-btn\")) == null ? void 0 : _this$querySelector.classList.add(\"d-none\");\r\n      (_table3 = table) == null ? void 0 : _table3.element.removeAttribute(\"style\");\r\n      (_table4 = table) == null ? void 0 : _table4.destroy();\r\n      table = null;\r\n    }).modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  // Auto-fill\r\n  function autoFill(el) {\r\n    let f = forms.get(el).$element[0];\r\n    if (!f) return;\r\n    let ar = getOptionValues(el),\r\n      id = getId(el),\r\n      m = id.match(/^([xy])(\\d*)_/),\r\n      rowindex = m ? m[2] : \"\",\r\n      list = forms.get(el).getList(id),\r\n      dest_array = list.autoFillTargetFields;\r\n    let success = function (data) {\r\n      let results = data == null ? void 0 : data.records,\r\n        result = Array.isArray(results) && results.length > 0 ? results[0] : [];\r\n      for (let j = 0; j < dest_array.length; j++) {\r\n        let destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\r\n        if (destEl) {\r\n          let val = $__default.default.isValue(result[\"af\" + j]) ? String(result[\"af\" + j]) : \"\",\r\n            args = {\r\n              results,\r\n              result,\r\n              data: val,\r\n              form: f,\r\n              name: id,\r\n              target: dest_array[j],\r\n              cancel: false,\r\n              trigger: true\r\n            };\r\n          $__default.default(el).trigger(\"autofill\", [args]); // Fire event\r\n          if (args.cancel) continue;\r\n          val = args.data; // Process the value\r\n          if (destEl.options) {\r\n            // Selection list\r\n            selectOption(destEl, val.split(\",\"));\r\n            if (isAutoSuggest(destEl)) {\r\n              // Auto-Suggest\r\n              destEl.input.value = val;\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            }\r\n          } else if (isHiddenTextArea(destEl)) {\r\n            // HTML editor\r\n            destEl.value = val;\r\n            $__default.default(destEl).data(\"editor\").set();\r\n          } else if (destEl.type == \"checkbox\") {\r\n            // Boolean checkbox\r\n            destEl.checked = convertToBool(val);\r\n          } else {\r\n            destEl.value = val;\r\n          }\r\n          if (args.trigger) $__default.default(destEl).trigger(\"change\");\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n    if (ar.length > 0 && ar[0] != \"\") {\r\n      let data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"autofill\",\r\n        v0: ar[0],\r\n        language: ew.LANGUAGE_ID\r\n      }, getUserParams('#p_' + id, f));\r\n      // Add parent field values\r\n      let parentId = list.parentFields.slice(); // Clone\r\n      if (rowindex != \"\") {\r\n        for (let i = 0, len = parentId.length; i < len; i++) {\r\n          let ar = parentId[i].split(\" \");\r\n          if (ar.length == 1)\r\n            // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n      let arp = parentId.map(pid => getOptionValue(pid, f)); // Get parent field values\r\n      arp.forEach((p, i) => data[\"v\" + (i + 1)] = p); // Filter by parent fields\r\n      return $__default.default.post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\r\n    }\r\n    return success();\r\n  }\r\n\r\n  // Set up tooltip links as popovers\r\n  function tooltip(i, el) {\r\n    var $this = $__default.default(el),\r\n      $tt = $__default.default(\"#\" + $this.data(\"tooltip-id\")),\r\n      trig = $this.data(\"trigger\") || \"hover\",\r\n      dir = $this.data(\"placement\") || \"auto\";\r\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0]) return;\r\n    if (!bootstrap.Popover.getInstance(el)) {\r\n      $this.popover({\r\n        ...ew.popoverOptions,\r\n        placement: dir,\r\n        trigger: trig,\r\n        delay: 100,\r\n        container: document.getElementById(\"ew-tooltip\"),\r\n        content: $tt.html()\r\n      }).on(\"show.bs.popover\", function () {\r\n        var wd = $this.data(\"tooltip-width\");\r\n        if (wd)\r\n          // Set width before show\r\n          $__default.default(bootstrap.Popover.getInstance(this)._getTipElement()).css(\"max-width\", parseInt(wd, 10) + \"px\");\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init search filters\r\n   */\r\n  function initSearchFilters(e) {\r\n    var _e$target11;\r\n    let el = (_e$target11 = e == null ? void 0 : e.target) != null ? _e$target11 : document,\r\n      btn = el == null ? void 0 : el.querySelector(\".ew-filter-option\");\r\n    if (ew.CLIENT_SEARCH_FILTER || ew.SERVER_SEARCH_FILTER && ew.IS_LOGGEDIN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\r\n      $__default.default(btn).removeClass(\"d-none\").find(\".ew-btn-dropdown\").on(\"show.bs.dropdown\", function (e) {\r\n        var _frm$filterList$filte, _frm$filterList;\r\n        let formId = $__default.default(this).find(\".ew-save-filter[data-form], .ew-delete-filter[data-form]\").data(\"form\"),\r\n          frm = ew.forms.get(formId),\r\n          filters = ew.CLIENT_SEARCH_FILTER ? ew.parseJson(localStorage.getItem(ew.PROJECT_NAME + \"_\" + frm.id + \"_filters\") || \"[]\") || [] : (_frm$filterList$filte = frm == null ? void 0 : (_frm$filterList = frm.filterList) == null ? void 0 : _frm$filterList.filters) != null ? _frm$filterList$filte : [];\r\n        frm.setupFilters(e, filters.filter(val => Array.isArray(val) && val.length == 2));\r\n      });\r\n    } else {\r\n      btn == null ? void 0 : btn.classList.add(\"d-none\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show dialog for email sending\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {Object} args.key - Key as object\r\n   * @param {boolean} args.exportSelected - Exported selected only\r\n   * @param {string} args.url - URL of content (for Custom Template)\r\n   * @param {string} args.exportId - Export ID (for Custom Template)\r\n   * @returns false\r\n   */\r\n  function emailDialogShow(args) {\r\n    let $dlg = ew.emailDialog || $__default.default(\"#ew-email-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $__default.default(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-email-dialog not found.\");\r\n      return false;\r\n    }\r\n    let form = args.evt.currentTarget.form;\r\n    if (args.exportSelected && !keySelected(form)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let $f = $dlg.find(\".modal-body form\"),\r\n      frm = $f.data(\"form\");\r\n    if (!frm) {\r\n      frm = new FormBuilder().setId($f.attr(\"id\")).addFields([[\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]], [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]], [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))], [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))], [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = mergeSearchParams($f.serialize(), args.key, getchartParams(), form && args.exportSelected ? $__default.default(form).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize() : null); // Export selected\r\n        $dlg.modal(\"hide\");\r\n        args.custom // Custom Template\r\n        ? _export({\r\n          ...args,\r\n          ...{\r\n            export: \"email\",\r\n            custom: true,\r\n            emailForm: $f[0]\r\n          }\r\n        }) : exportEmail($f.find(\"#tblvar\").val(), data);\r\n        return false;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n    ew.emailDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr).end().modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  // Export to email\r\n  function exportEmail(tblVar, data) {\r\n    let swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({\r\n      ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n        _fetch(getApiUrl([ew.API_EXPORT_ACTION, \"email\", tblVar]) + \"?rnd=\" + random(), {\r\n          // Post to Export API\r\n          method: \"POST\",\r\n          body: data\r\n        }).then(async response => {\r\n          swal.hideLoading();\r\n          let result = await response.json();\r\n          if (result != null && result.success) {\r\n            swal.update({\r\n              html: \"<div class='text-success'>\" + result.message + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          } else {\r\n            var _ref3;\r\n            swal.update({\r\n              html: (_ref3 = \"<div class='text-danger'>\" + getError(result)) != null ? _ref3 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"fail\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          }\r\n        }).catch(error => {\r\n          var _ref4;\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: (_ref4 = \"<div class='text-danger'>\" + error) != null ? _ref4 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            tblVar,\r\n            data,\r\n            error\r\n          }]);\r\n        }).finally(() => {\r\n          swal.update({\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            tblVar,\r\n            data\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // Show drill down\r\n  function showDrillDown(e, obj, url, id, hdr) {\r\n    if (e != null && e.ctrlKey) {\r\n      let newUrl = setSearchParams(url, {\r\n        d: \"2\"\r\n      }); // Change \"d\" parameter to 2\r\n      return redirect(newUrl);\r\n    }\r\n    var $obj = $__default.default(obj);\r\n    var pos = $obj.data(\"drilldown-placement\") || \"auto\";\r\n    var args = {\r\n      obj: $obj[0],\r\n      placement: pos,\r\n      id,\r\n      url,\r\n      hdr\r\n    };\r\n    $document$1.trigger(\"drilldown\", [args]);\r\n    var ar = args.url.split(\"?\");\r\n    args.file = ar[0] || \"\";\r\n    args.data = ar[1] || \"\";\r\n    if (!bootstrap.Popover.getInstance(obj)) {\r\n      $obj.popover({\r\n        ...ew.popoverOptions,\r\n        placement: args.placement,\r\n        trigger: \"manual\",\r\n        title: args.hdr,\r\n        template: '<div class=\"popover\" role=\"tooltip\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\r\n        // No .popover-arrow\r\n        content: ew.spinnerTemplate(),\r\n        container: $__default.default(\"#ew-drilldown-panel\").draggable(ew.draggableOptions),\r\n        boundary: \"viewport\"\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        $obj.attr(\"data-original-title\", \"\");\r\n      }).on(\"shown.bs.popover\", function (e) {\r\n        if (!$obj.data(\"args\")) return;\r\n        var data = $obj.data(\"args\").data;\r\n        $__default.default.ajax({\r\n          cache: false,\r\n          dataType: \"html\",\r\n          type: \"POST\",\r\n          data: data,\r\n          url: $obj.data(\"args\").file,\r\n          success: function (data) {\r\n            var $tip = $__default.default(bootstrap.Popover.getInstance(obj)._getTipElement());\r\n            if (args.hdr) $tip.find(\".popover-header\").empty().removeClass(\"d-none\").append('<button type=\"button\" class=\"btn-close\" aria-label=\"' + ew.language.phrase(\"CloseBtn\") + '\"></button>' + args.hdr).find(\".btn-close\").on(\"click\", function () {\r\n              $obj.popover(\"hide\");\r\n            });\r\n            var m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\r\n            data = m ? m[0] : data;\r\n            var html = ew.stripScript(data);\r\n            $tip.find(\".popover-body\").html($__default.default(\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\r\n            .find(\".ew-table\").each(ew.setupTable);\r\n            ew.executeScript(data, id, true);\r\n            $obj.popover(\"update\");\r\n          },\r\n          error: function (o) {\r\n            if (o.responseText) {\r\n              let popover = bootstrap.Popover.getInstance(obj);\r\n              if ($__default.default.isString(o.responseText) && o.responseText.startsWith(\"{\") && o.responseText.endsWith(\"}\")) {\r\n                var _result$error12, _result$error13;\r\n                var result = parseJson(o.responseText);\r\n                if (result != null && (_result$error12 = result.error) != null && _result$error12.type && result != null && (_result$error13 = result.error) != null && _result$error13.description) {\r\n                  popover == null ? void 0 : popover.hide();\r\n                  return _alert({\r\n                    title: result.error.type,\r\n                    html: result.error.description,\r\n                    customClass: {\r\n                      title: \"ew-swal2-title text-danger\",\r\n                      htmlContainer: \"ew-swal2-html-container text-danger\"\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n              popover == null ? void 0 : popover.setContent({\r\n                \".popover-body\": '<p class=\"text-danger\">' + o.responseText + '</p>'\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }).on(\"hidden.bs.popover\", function (e) {\r\n        ew.removeScript(id);\r\n      });\r\n    }\r\n    $obj.data(\"args\", args).popover(\"show\");\r\n  }\r\n\r\n  /**\r\n   * Ajax query\r\n   * @param {Object} data - Object to passed to API\r\n   * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\r\n   * @returns {string|string[]}\r\n   */\r\n  function ajax(data, callback) {\r\n    if (!$__default.default.isObject(data) || !data.url && !data.action) return undefined;\r\n    var action;\r\n    if (data.url) {\r\n      if (data.url.startsWith(getApiUrl())) action = data.url.replace(getApiUrl(), \"\").split(\"/\")[0];else if (data.url.startsWith(ew.API_URL)) action = data.url.replace(ew.API_URL, \"\").split(\"/\")[0];\r\n    } else {\r\n      action = data.action;\r\n      delete data.action;\r\n    }\r\n    var obj = Object.assign({}, data);\r\n    var _convert = response => {\r\n      if ($__default.default.isObject(response) && response.result == \"OK\") {\r\n        var results = response.records;\r\n        if (Array.isArray(results) && results.length == 1) {\r\n          // Single row\r\n          results = results[0];\r\n          if (Array.isArray(results) && results.length == 1)\r\n            // Single column\r\n            return results[0]; // Return a value\r\n          else return results; // Return a row\r\n        }\r\n\r\n        return results;\r\n      }\r\n      return response;\r\n    };\r\n    var url = obj.url || getApiUrl(action),\r\n      // URL\r\n      type = obj.type || ([ew.API_LIST_ACTION, ew.API_VIEW_ACTION, ew.API_DELETE_ACTION].includes(action) ? \"GET\" : \"POST\");\r\n    delete obj.url;\r\n    delete obj.type;\r\n    obj.dataType = \"json\";\r\n    if (isFunction$2(callback)) {\r\n      // Async\r\n      $__default.default.ajax({\r\n        url: url,\r\n        type: type,\r\n        data: obj,\r\n        success: function (response) {\r\n          callback(_convert(response));\r\n        }\r\n      });\r\n    } else {\r\n      // Sync\r\n      var response = $__default.default.ajax({\r\n        url: url,\r\n        async: false,\r\n        type: type,\r\n        data: obj\r\n      });\r\n      return _convert(response.responseJSON);\r\n    }\r\n  }\r\n\r\n  // Get URL of current page\r\n  function currentPage() {\r\n    return location.href.split(\"#\")[0].split(\"?\")[0];\r\n  }\r\n\r\n  // Toggle search operator\r\n  function toggleSearchOperator(e, id, value) {\r\n    var el = e.currentTarget.form.elements[id];\r\n    if (!el) return;\r\n    el.value = el.value != value ? value : \"=\";\r\n  }\r\n\r\n  // Toggle multi-column layout\r\n  function toggleLayout(el) {\r\n    var _bootstrap$Tooltip$ge6;\r\n    (_bootstrap$Tooltip$ge6 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge6.hide();\r\n    document.body.style.cursor = \"wait\";\r\n    fetch(sanitizeUrl(setLayout(el.dataset.url, el.dataset.layout))).then(response => response.text()).then(html => {\r\n      let $grid = $__default.default(\".ew-multi-column-grid\").html($__default.default(\"<div>\" + html + \"</div>\").find(\".ew-multi-column-grid\").html());\r\n      ew.initPage({\r\n        target: $grid[0]\r\n      });\r\n      $grid.trigger(\"load.ew\");\r\n    }).catch(error => _alert(error)).finally(() => document.body.style.cursor = \"default\");\r\n  }\r\n\r\n  // Copy inner text to clipboard\r\n  function copyToClipboard(source) {\r\n    var _source, _source2;\r\n    source = $__default.default.isString(source) ? document.querySelector(source) : source;\r\n    const str = ((_source = source) == null ? void 0 : _source.value) || ((_source2 = source) == null ? void 0 : _source2.innerText);\r\n    if (str) {\r\n      const el = document.createElement(\"textarea\");\r\n      el.value = str;\r\n      el.setAttribute(\"readonly\", \"\");\r\n      el.style.position = \"absolute\";\r\n      el.style.left = \"-9999px\";\r\n      document.body.appendChild(el);\r\n      el.select();\r\n      document.execCommand(\"copy\");\r\n      document.body.removeChild(el);\r\n    }\r\n    return str;\r\n  }\r\n\r\n  /**\r\n   * Validators\r\n   */\r\n\r\n  // Check integer\r\n  function checkInteger(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if (object_value.includes(ew.DECIMAL_SEPARATOR)) return false;\r\n    return checkNumber(object_value);\r\n  }\r\n\r\n  // Check number\r\n  function checkNumber(object_value) {\r\n    object_value = String(object_value);\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim();\r\n    // let re = new RegExp(\"^[+\\-\\d\\s%\" + escapeRegExChars(ew.DECIMAL_SEPARATOR) + escapeRegExChars(ew.GROUPING_SEPARATOR) + ew.CURRENCY_SYMBOL + \"]+$\");\r\n    // return re.test(object_value) && ew.parseNumber(object_value) !== null;\r\n    return ew.parseNumber(object_value) !== null;\r\n  }\r\n\r\n  // Escape regular expression chars\r\n  function escapeRegExChars(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  }\r\n\r\n  // Check range\r\n  function checkRange(object_value, min_value, max_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if ($__default.default.isNumber(min_value) || $__default.default.isNumber(max_value)) {\r\n      // Number\r\n      if (checkNumber(object_value)) object_value = ew.parseNumber(object_value);\r\n    }\r\n    if (min_value !== null && object_value < min_value) return false;\r\n    if (max_value !== null && object_value > max_value) return false;\r\n    return true;\r\n  }\r\n\r\n  // Check phone\r\n  function checkPhone(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check zip\r\n  function checkZip(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check credit card\r\n  function checkCreditCard(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\r\n    if (creditcard_string.length == 0) return false;\r\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\r\n    var tempdigit,\r\n      checkdigit = 0;\r\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\r\n      tempdigit = parseInt(creditcard_string.charAt(i), 10);\r\n      if (doubledigit) {\r\n        tempdigit *= 2;\r\n        checkdigit += tempdigit % 10;\r\n        if (tempdigit / 10 >= 1.0) checkdigit++;\r\n        doubledigit = false;\r\n      } else {\r\n        checkdigit += tempdigit;\r\n        doubledigit = true;\r\n      }\r\n    }\r\n    return checkdigit % 10 == 0;\r\n  }\r\n\r\n  // Check social security number\r\n  function checkSsn(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check emails\r\n  function checkEmails(object_value, email_cnt) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\r\n    for (var i = 0, len = arEmails.length; i < len; i++) {\r\n      if (email_cnt > 0 && len > email_cnt) return false;\r\n      if (!checkEmail(arEmails[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Check email\r\n  function checkEmail(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\r\n  }\r\n\r\n  // Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\r\n  function checkGuid(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check URL\r\n  function checkUrl(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    try {\r\n      new URL(object_value);\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Check by regular expression\r\n  function checkByRegEx(object_value, pattern) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return !!object_value.match(pattern);\r\n  }\r\n\r\n  /**\r\n   * Show message dialog\r\n   *\r\n   * @param {Event|string} arg - Event or message\r\n   * @returns\r\n   */\r\n  function showMessage(arg) {\r\n    var _arg$target;\r\n    let doc, swal;\r\n    try {\r\n      // Note: If a window does not have a parent, its parent property is a reference to itself.\r\n      [doc, swal] = [window.parent.document, window.parent.Swal];\r\n    } catch (e) {\r\n      // In case window.parent.document cannot be accessed\r\n      [doc, swal] = [window.document, window.Swal];\r\n    }\r\n    let p = (_arg$target = arg == null ? void 0 : arg.target) != null ? _arg$target : doc,\r\n      $div = $__default.default(p).find(\"div.ew-message-dialog.d-none\").first(),\r\n      msg = $div.length ? $div.text() : \"\"; // Text only\r\n    if ($__default.default.isString(arg)) msg = $__default.default(\"<div>\" + arg.trim() + \"</div>\").text();\r\n    if (msg.trim() == \"\") return;\r\n    if ($div.length) {\r\n      [\"success\", \"info\", \"warning\", \"danger\"].forEach(function (type) {\r\n        let $alert = $div.find(\".alert-\" + type).toggleClass(\"alert-\" + type),\r\n          $heading = $alert.find(\".alert-heading\").detach(),\r\n          $content = $alert.children(\":not(.icon)\");\r\n        $alert.find(\".icon\").remove();\r\n        if ($alert[0]) {\r\n          let w = parseInt($content.css(\"width\"), 10); // Width specified\r\n          if (w > 0) $content.first().css(\"width\", \"auto\");\r\n          let $toast = showToast($alert.html(), type, $heading.html());\r\n          if (w > 0) $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\r\n          return;\r\n        }\r\n      });\r\n    }\r\n    if ($__default.default.isString(arg)) {\r\n      return swal.fire({\r\n        ...ew.sweetAlertSettings,\r\n        html: arg\r\n      });\r\n    }\r\n  }\r\n\r\n  // Random number\r\n  function random() {\r\n    return Math.floor(Math.random() * 100001) + 100000;\r\n  }\r\n\r\n  // File upload\r\n  function upload(input) {\r\n    let $input = $__default.default(input);\r\n    if ($input.data(\"blueimpFileupload\")) return;\r\n    let id = $input.attr(\"name\"),\r\n      nid = id.replace(/\\$/g, \"\\\\$\"),\r\n      tbl = $input.data(\"table\"),\r\n      multiple = $input.is(\"[multiple]\"),\r\n      $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n      $p = $input.closest(fieldContainerSelector),\r\n      $ft = $p.find(\"#ft_\" + nid),\r\n      $fn = $p.find(\"#fn_\" + nid),\r\n      $fa = $p.find(\"#fa_\" + nid),\r\n      $label = $p.find(\".ew-file-label\"),\r\n      label = $label.html();\r\n    let _done = function (e, data) {\r\n      if (data.result.files[0].error) return;\r\n      let name = data.result.files[0].name,\r\n        ar = multiple ? $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [] : [];\r\n      ar.push(name);\r\n      $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n      $fa.val(\"0\");\r\n      if (!multiple)\r\n        // Remove other entries if not multiple upload\r\n        $ft.find(\"tbody > tr:not(:last-child)\").remove();\r\n    };\r\n    let _deleted = function (e, data) {\r\n      let url = e.originalEvent.target.dataset.url,\r\n        params = getSearchParams(url),\r\n        fid = params.get(\"id\"),\r\n        name = params.get(fid);\r\n      if (name) {\r\n        let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [],\r\n          index = ar.indexOf(name);\r\n        if (index > -1) ar.splice(index, 1);\r\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n        $fa.val(\"0\");\r\n      }\r\n    };\r\n    let _change = function (e, data) {\r\n      var _data$files;\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files = data.files) == null ? void 0 : _data$files.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      data.files.forEach(file => ar.push(file.name));\r\n      let cnt = $input.data(\"maxNumberOfFiles\");\r\n      if ($__default.default.isNumber(cnt) && cnt > 0 && ar.length > cnt) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"));\r\n        return false;\r\n      }\r\n      let l = $input.data(\"size\");\r\n      if ($__default.default.isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxFileLength\"));\r\n        return false;\r\n      }\r\n    };\r\n    let _confirmDelete = function (e) {\r\n      if (!multiple && $fn.val()) {\r\n        if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n    let _changed = function (e, data) {\r\n      var _data$files2, _data$result2, _data$result2$files;\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files2 = data.files) == null ? void 0 : _data$files2.length) > 0 || ((_data$result2 = data.result) == null ? void 0 : (_data$result2$files = _data$result2.files) == null ? void 0 : _data$result2$files.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      $label.html(ar.join(\", \") || label);\r\n    };\r\n    let _completed = function (e, data) {\r\n      // After download template rendered\r\n      let evt = {\r\n        target: data.context\r\n      };\r\n      initLightboxes(evt);\r\n      initPdfObjects(evt);\r\n      ew.updateDropdownPosition();\r\n      data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\r\n    };\r\n    let _added = function (e, data) {\r\n      var _data$files3;\r\n      // After upload template rendered\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files3 = data.files) == null ? void 0 : _data$files3.length) > 0);\r\n      data.context.find(\".start\").click(_confirmDelete);\r\n    };\r\n    // let _send = function(e, data) { // Before each file upload request\r\n    //     console.log(data);\r\n    // };\r\n    let uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION),\r\n      _downloadTemplate = $__default.default.templates(\"#template-download\"),\r\n      _uploadTemplate = $__default.default.templates(\"#template-upload\"),\r\n      form = getForm(input),\r\n      $form = $__default.default(form),\r\n      readonly = $form.find(\"#confirm\").val() == \"confirm\" || $input.attr(\"readonly\") || $input.prop(\"disabled\");\r\n    if (readonly && !$input.prop(\"disabled\")) $input.prop(\"disabled\", true); // Disable input button if readonly\r\n    const {\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    } = $input.data();\r\n    const formData = {\r\n      id: id,\r\n      table: tbl,\r\n      session: ew.SESSION_ID,\r\n      replace: multiple ? \"0\" : \"1\",\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    };\r\n    $input.fileupload(ew.deepAssign({\r\n      url: uploadUrl,\r\n      type: \"POST\",\r\n      multipart: true,\r\n      autoUpload: true,\r\n      loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\r\n      loadVideoFileTypes: /^video\\/mp4$/i,\r\n      loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\r\n      filesContainer: $ft,\r\n      uploadTemplateId: null,\r\n      downloadTemplateId: null,\r\n      uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\r\n      downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\r\n      previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\r\n      previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\r\n      dropZone: $dropzone,\r\n      messages: {\r\n        acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n        maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n        maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n        minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n      },\r\n      formData,\r\n      readonly // Custom\r\n    }, ew.uploadOptions))\r\n    // .on(\"fileuploadsend\", _send)\r\n    .on(\"fileuploaddone\", _done).on(\"fileuploaddestroy\", _deleted).on(\"fileuploadchange\", _change).on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed).on('fileuploadadded', _added).on('fileuploadcompleted', _completed);\r\n    if ($fn.val()) {\r\n      $__default.default.ajax({\r\n        url: uploadUrl,\r\n        data: {\r\n          id: id,\r\n          table: tbl,\r\n          session: ew.SESSION_ID\r\n        },\r\n        dataType: \"json\",\r\n        context: this,\r\n        success: function (result) {\r\n          if (result != null && result[id]) {\r\n            let done = $input.fileupload(\"option\", \"done\");\r\n            if (done) done.call(input, $__default.default.Event(), {\r\n              result: {\r\n                files: result[id]\r\n              }\r\n            }); // Use \"files\"\r\n          }\r\n\r\n          if (readonly)\r\n            // Hide delete button if readonly\r\n            $ft.find(\"td.delete\").hide();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert data to number\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @returns {number}\r\n   */\r\n  function parseNumber(data) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.parse(data, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get numbering system\r\n   */\r\n  function getNumberingSystem() {\r\n    return ew.NUMBERING_SYSTEM || new Intl.NumberFormat(ew.LANGUAGE_ID).resolvedOptions().numberingSystem;\r\n  }\r\n  let DateTime = luxon__default.default.DateTime,\r\n    Interval = luxon__default.default.Interval;\r\n\r\n  /**\r\n   * Format data by DateTime (see https://moment.github.io/luxon/docs/class/src/datetime.js~DateTime.html)\r\n   *\r\n   * @param {string|Number|Date} data - Date\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/docs/manual/formatting.html#toformat)\r\n   * @returns {string}\r\n   */\r\n  function formatDateTime(data, format) {\r\n    let dt;\r\n    if ($__default.default.isString(data))\r\n      // SQL dates, times, and datetimes\r\n      dt = DateTime.fromSQL(data, {\r\n        zone: \"utc\"\r\n      }); // Do not change the time zone\r\n    else if ($__default.default.isNumber(data))\r\n      // Unix timestamps\r\n      dt = DateTime.fromSeconds(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof Date)\r\n      // JS Date Object\r\n      dt = DateTime.fromJSDate(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof DateTime)\r\n      // DateTime Object\r\n      dt = data;\r\n    return dt.toFormat(format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Format time span\r\n   *\r\n   * @param {Date} start - JS start date/time\r\n   * @param {Date} end - JS end date/time\r\n   * @param {bool} allDay - Whether event is all day\r\n   * @returns {string}\r\n   */\r\n  function formatTimeSpan(start, end, allDay) {\r\n    let from = DateTime.fromJSDate(start, {\r\n        zone: \"utc\"\r\n      }),\r\n      to = DateTime.fromJSDate(end, {\r\n        zone: \"utc\"\r\n      });\r\n    if (to.isValid && to.equals(to.startOf(\"day\")))\r\n      // 12:00AM\r\n      to = to.minus(1); // Minus one millisecond => back to previous day\r\n    let interval = new Interval({\r\n      start: from,\r\n      end: to\r\n    });\r\n    if (interval.isValid) {\r\n      // Check if all day\r\n      let days = interval.count() / (24 * 60 * 60 * 1000);\r\n      allDay || (allDay = Number.isInteger(days) && days >= 1);\r\n    }\r\n    if (allDay) {\r\n      // All day => Show date only\r\n      if (interval.isValid && interval.count(\"days\") > 1 || from.isValid && to.isValid && from.startOf(\"day\") < to.startOf(\"day\")) return formatDateTime(from, ew.DATE_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT);else if (from.isValid && !end)\r\n        // No end date\r\n        return formatDateTime(from, ew.DATE_FORMAT);\r\n      return \"\";\r\n    } else {\r\n      // Not all day => Show date/time\r\n      if (from.isValid && to.isValid) return from.startOf(\"day\") < to.startOf(\"day\") ? formatDateTime(from, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) : formatDateTime(from, ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.TIME_FORMAT);else if (from.isValid) return formatDateTime(from, ew.TIME_FORMAT);\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  /**\r\n   * Parse data to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date/Time string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {DateTime}\r\n   */\r\n  function parseDateTime(data, format) {\r\n    return DateTime.fromFormat(data, format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check if data can be parsed to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {boolean}\r\n   */\r\n  function checkDate(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n\r\n  // Check time (alias of checkDate)\r\n  function checkTime(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n\r\n  /**\r\n   * Format currency\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatCurrency(value, format) {\r\n    format || (format = ew.CURRENCY_FORMAT);\r\n    if (format.includes(\";\")) {\r\n      let formats = format.split(\";\");\r\n      format = value >= 0 ? formats[0] : formats[1];\r\n    }\r\n    format = format.replace(\"\", \"$\");\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format, {\r\n      locale,\r\n      currency: (ew.IS_RTL ? \"\\u200E\" : \"\") + ew.CURRENCY_SYMBOL\r\n    }); // Make sure the currency symbol position is not moved.\r\n  }\r\n\r\n  /**\r\n   * Format number\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatNumber(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.NUMBER_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Format percent\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatPercent(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.PERCENT_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Init page\r\n   *\r\n   * @param {Event|undefined} e - Event\r\n   */\r\n  function initPage(e) {\r\n    var _e$target12;\r\n    var el = (_e$target12 = e == null ? void 0 : e.target) != null ? _e$target12 : document,\r\n      $el = $__default.default(el),\r\n      $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\r\n    ew.initPanels(el); // Init grid panels\r\n    ew.renderJsTemplates(e);\r\n    lazyLoad(e);\r\n    initForms(e);\r\n    initTooltips(e);\r\n    initPasswordOptions(e);\r\n    initIcons(e);\r\n    initSearchFilters(e);\r\n    initLightboxes(e);\r\n    initPdfObjects(e);\r\n    $tables.each(setupTable); // Init tables\r\n    $el.find(\".ew-column-dropdown\").each(function () {\r\n      var _localStorage$getItem;\r\n      let table = this.dataset.table;\r\n      (_localStorage$getItem = localStorage.getItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\")) == null ? void 0 : _localStorage$getItem.split(\",\").forEach(field => $__default.default(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", true));\r\n      $__default.default(this).find(\".ew-dropdown-checkbox\").on(\"click\", function (e) {\r\n        let input = this.querySelector(\".ew-dropdown-check-input[data-field]\"),\r\n          field = input == null ? void 0 : input.dataset.field;\r\n        if (table && field) {\r\n          input.classList.toggle(\"ew-checked\");\r\n          $__default.default(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", !input.classList.contains(\"ew-checked\"));\r\n        }\r\n        localStorage.setItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\", Array.from(e.currentTarget.closest(\".dropdown-menu\").querySelectorAll(\".ew-dropdown-check-input[data-field]:not(.ew-checked)\"), el => el.dataset.field));\r\n      });\r\n    }).on(\"show.bs.dropdown\", function (e) {\r\n      let table = e.currentTarget.dataset.table,\r\n        inputs = e.currentTarget.querySelectorAll(\".ew-dropdown-check-input[data-field]\");\r\n      for (let input of inputs) {\r\n        let field = input.dataset.field;\r\n        input.classList.toggle(\"ew-checked\", !!$__default.default(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"']:not(.d-none)\")[0]);\r\n      }\r\n    });\r\n    initExportLinks(e);\r\n    initMultiSelectCheckboxes(e);\r\n\r\n    // Report\r\n    var $rpt = $el.find(\".ew-report\");\r\n    if ($rpt[0]) {\r\n      $rpt.find(\".card\").on(\"collapsed.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is collapsed\r\n        var $card = $__default.default(this),\r\n          $div = $card.closest(\"[class^='col-']\"),\r\n          mh = $div.css(\"min-height\");\r\n        if (mh) $div.data(\"min-height\", mh);\r\n        $div.css(\"min-height\", 0);\r\n      }).on(\"expanded.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is expanded\r\n        var $card = $__default.default(this),\r\n          $div = $card.closest(\"[class^='col-']\"),\r\n          mh = $div.css(\"min-height\");\r\n        if (mh) $div.css(\"min-height\", mh); // Restore min-height\r\n      });\r\n      // Group expand/collapse button\r\n      $rpt.find(\".ew-group-toggle\").on(\"click\", function () {\r\n        ew.toggleGroup(this);\r\n      });\r\n    }\r\n\r\n    // Show message\r\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE) showMessage(e);\r\n  }\r\n\r\n  // Redirect by HTTP GET or POST\r\n  function redirect(url, f, method, data) {\r\n    var _ew$vars;\r\n    let urls = (_ew$vars = ew.vars) != null && _ew$vars.login ? Array.from(Object.entries(ew.vars.login)).filter(entry => entry[0].endsWith(\"Url\")).map(entry => entry[1]) : [];\r\n    if (urls.includes(url)) {\r\n      // Known URLs\r\n      window.location = url;\r\n      return false;\r\n    }\r\n    let newUrl;\r\n    if (url.startsWith(\"http\")) {\r\n      newUrl = new URL(url);\r\n    } else if (url.startsWith(\"/\")) {\r\n      newUrl = new URL(url, location.protocol + \"//\" + location.host);\r\n    } else {\r\n      _alert(ew.language.phrase(\"IncorrectUrl\"));\r\n      return false;\r\n    }\r\n    let params = newUrl.searchParams;\r\n    if (data) params = mergeSearchParams(params, data);\r\n    if (sameText(method, \"post\")) {\r\n      // POST\r\n      const form = f || document.createElement(\"form\");\r\n      form.method = \"post\";\r\n      form.action = url.split(\"?\")[0];\r\n      document.body.appendChild(form);\r\n      params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      params.forEach((value, key) => {\r\n        const el = document.createElement(\"input\");\r\n        el.type = \"hidden\";\r\n        el.name = key;\r\n        el.value = ew.sanitize(value);\r\n        form.appendChild(el);\r\n      });\r\n      form.submit();\r\n    } else {\r\n      // GET\r\n      window.location = sanitizeUrl(newUrl.toString());\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Show/Hide password\r\n  function togglePassword(e) {\r\n    let $btn = $__default.default(e.currentTarget),\r\n      $input = $btn.closest(\".input-group\").find(\"input\"),\r\n      $i = $btn.find(\"i\");\r\n    if ($input.attr(\"type\") == \"text\") {\r\n      $input.attr(\"type\", \"password\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    } else if ($input.attr(\"type\") == \"password\") {\r\n      $input.attr(\"type\", \"text\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    }\r\n  }\r\n\r\n  // Re-order chart\r\n  function updateChart(el) {\r\n    let url = new URL(el.form.action),\r\n      $container = $__default.default(el).closest(\".ew-chart-top, .ew-chart-bottom\"),\r\n      $overlay = $__default.default(ew.overlayTemplate());\r\n    url.search = $__default.default(el.form).serialize();\r\n    $container.addClass(\"ew-loading\").append($overlay);\r\n    fetch(url.toString()).then(async response => {\r\n      let $html = $__default.default(\"<div>\" + (await response.text()) + \"</div>\"),\r\n        $new = $html.find(\".ew-chart-top, .ew-chart-bottom\").filter(\"[data-chart='\" + $container.data(\"chart\") + \"']\"),\r\n        $debug = $html.find(\".ew-debug\");\r\n      if ($new[0]) $container.replaceWith($new);\r\n      if ($debug[0]) $new.next(\".ew-debug\").replaceWith($debug);\r\n    }).finally(() => $container.removeClass(\"ew-loading\").find($overlay).remove());\r\n  }\r\n\r\n  // Check if larger than mediumn screen width (not mobile)\r\n  function isMediumScreen() {\r\n    return window.matchMedia(ew.screenMediaQuery).matches;\r\n  }\r\n\r\n  // Check if mobile\r\n  function isMobile() {\r\n    return ew.IS_MOBILE || !isMediumScreen();\r\n  }\r\n\r\n  /**\r\n   * Refresh page\r\n   *\r\n   * @param {Promise} promise Promise returned by fetch()\r\n   * @param {string} context CSS class name of context\r\n   * @returns {Promise}\r\n   */\r\n  function refresh(promise, context) {\r\n    var _context;\r\n    (_context = context) != null ? _context : context = \".ew-card.ew-grid\";\r\n    context = context.startsWith(\".\") || context.startsWith(\"#\") ? context : \".\" + context;\r\n    let target = document.querySelector(context + \", .ew-multi-column-grid, .ew-view-form, .ew-edit-form, main.ew-no-record\");\r\n    if (!target) return;\r\n    let $overlay = $__default.default(ew.overlayTemplate()),\r\n      $target = $__default.default(target).addClass(\"ew-loading\").toggleClass(\"overlay-wrapper\", !target.classList.contains(\"card\")).append($overlay);\r\n    return promise.then(async response => {\r\n      if (!(response instanceof Response)) return response;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      // Handle JSON\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n          validation = result.validation,\r\n          error = getError(result),\r\n          form = target.querySelector(\".ew-form\"),\r\n          f = ew.forms.get(form);\r\n        if (f && validation) {\r\n          // Validation errors\r\n          for (let [key, value] of Object.entries(validation)) {\r\n            key = parseInt(key, 10);\r\n            if ($__default.default.isNumber(key) && $__default.default.isObject(value)) {\r\n              form.dataset.rowindex = key;\r\n              for (let [fldvar, msg] of Object.entries(value)) f.addCustomError(fldvar, msg, key);\r\n            } else if ($__default.default.isString(value)) {\r\n              f.addCustomError(key, value);\r\n            }\r\n          }\r\n          f.focus();\r\n        }\r\n        if (error) showToast(error);else if ($__default.default.isString(result.warningMessage)) showToast(result.warningMessage, \"warning\");else if ($__default.default.isString(result.message)) showToast(result.message, \"body\");else if ($__default.default.isString(result.successMessage)) showToast(result.successMessage, \"success\");\r\n        return false; // Return false\r\n      }\r\n      // Handle HTML\r\n      let html = await response.text(),\r\n        url = new URL(response.url),\r\n        selectors = [\".ew-message-dialog\", \".ew-chart-top\", \".ew-chart-bottom\", \".ew-debug .card-body\", \".ew-timer\"];\r\n      if (url.searchParams.get(\"layout\") == \"false\") {\r\n        html = \"<div>\" + html + \"</div>\";\r\n        url.searchParams.delete(\"layout\");\r\n      }\r\n      url.searchParams.delete(\"rnd\");\r\n      url.searchParams.delete(\"action\");\r\n      html = getContent(html, true); // Keep scripts\r\n      let $html = $__default.default(\"<div>\" + html + \"</div>\"); // New HTML\r\n      if (!target.closest(\".ew-dashboard\")) {\r\n        // Not dashboard\r\n        selectors.unshift(\".ew-toolbar\"); // Update toolbar also\r\n        if (samePath(url, currentUrl) && currentUrl.toString() != url.toString())\r\n          // Only update browser URL if same page or view/edit page\r\n          window.history.pushState(null, \"\", url.toString()); // Update browser URL\r\n      }\r\n\r\n      if ($html.find(\"main.ew-no-record\")[0] || $target.is(\"main.ew-no-record\")) {\r\n        // New or old HTML contains no records => update <main> element\r\n        selectors = [\".ew-ext-search-form\", \"main\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-view-form\")) {\r\n        // View page\r\n        selectors = [\".ew-view-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-edit-form\")) {\r\n        // Edit page\r\n        selectors = [\".ew-edit-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-multi-column-grid\")) {\r\n        // Multi-column page\r\n        selectors = [\".ew-ext-search-form\", \".ew-multi-column-grid\", ...selectors];\r\n      } else {\r\n        // List/Report page\r\n        selectors = [\"#ew-filter-list\", \".ew-ext-search-form\", context + \" .card-header\", context + \" .card-body\", context + \" .card-footer\", ...selectors];\r\n      }\r\n      selectors.forEach(selector => $__default.default(selector).each((i, el) => {\r\n        let $old = $__default.default(el),\r\n          $new = $html.find(selector).eq(i);\r\n        if ($old[0] && $new[0]) {\r\n          delete el.dataset.isset; // Reset\r\n          $old.html($new.html()); // Replace inner HTML\r\n          $old.attr(\"class\", $new.attr(\"class\")); // Update class name\r\n        }\r\n\r\n        if (selector == \".ew-toolbar\") {\r\n          let e = {\r\n            target: el\r\n          };\r\n          initIcons(e);\r\n          initSearchFilters(e);\r\n        } else if (selector == \".ew-ext-search-form\") {\r\n          ew.initForms({\r\n            target: $new[0]\r\n          });\r\n          let $tmpl = $new.find(\"#navbar-basic-search\");\r\n          if ($tmpl[0]) {\r\n            let html = $tmpl.render(null, ew.jsRenderHelpers),\r\n              $html = $__default.default(html),\r\n              $search = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH),\r\n              $searchType = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE);\r\n            if ($search.val() != $__default.default(\"#\" + ew.TABLE_BASIC_SEARCH).val() || $searchType.val() != $__default.default(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE).val()) $__default.default(\".nav-item.navbar-basic-search\").replaceWith($html);\r\n          }\r\n          $old.find(\".ew-search-operator .form-select.ew-operator-select\").each((i, el) => searchOperatorChange(el));\r\n        } else if (selector == \".ew-message-dialog\") {\r\n          if (!$new.hasClass(\"d-none\")) $old.html($new.html()); // Replace inline html\r\n        }\r\n      }));\r\n\r\n      selectors.filter(selector => selector != \".ew-message-dialog\").forEach(selector => $html.find(selector).remove()); // Remove HTML used (except message)\r\n      removeScript(\"refresh\"); // Remove old scripts\r\n      executeScript($html.html(), \"refresh\"); // Execute scripts, e.g. custom template\r\n      let e = $__default.default.Event({\r\n        type: \"load.ew\",\r\n        target\r\n      });\r\n      ew.initPage(e);\r\n      if (selectors.includes(\".ew-toolbar\")) ew.initExportLinks(); // Export links are not inside e.target\r\n      target.querySelectorAll(\".btn-group\").forEach(el => {\r\n        var _bootstrap$Tooltip$ge7;\r\n        return (_bootstrap$Tooltip$ge7 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge7.update();\r\n      }); // Update tooltip position or it may obscure other buttons\r\n      $__default.default(\".toast.show\").toast(\"dispose\"); // Hide toasts\r\n      showMessage({\r\n        target: $html\r\n      }); // Show message, if any\r\n      $document$1.trigger(e);\r\n      $document$1.trigger($__default.default.Event({\r\n        type: \"refresh.ew\",\r\n        target\r\n      }));\r\n    }).finally(() => $target.removeClass(\"ew-loading\").find($overlay).remove());\r\n  }\r\n\r\n  // Check if dark mode\r\n  function isDark() {\r\n    return document.body.classList.contains(\"dark-mode\");\r\n  }\r\n\r\n  // Layout\r\n  var _fixLayoutHeightTimer;\r\n\r\n  // Fix layout height\r\n  function fixLayoutHeight() {\r\n    if (_fixLayoutHeightTimer) _fixLayoutHeightTimer.cancel(); // Clear timer\r\n    _fixLayoutHeightTimer = $__default.default.later(50, null, function () {\r\n      var layout = $body.data(\"lte.layout\");\r\n      if (layout) layout.fixLayoutHeight();\r\n    });\r\n  }\r\n\r\n  // Add user event handlers\r\n  function addEventHandlers(tblVar) {\r\n    let fields = ew.events[tblVar];\r\n    if (fields) {\r\n      for (const [fldVar, events] of Object.entries(fields)) $__default.default('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\r\n    }\r\n  }\n\n  var functions = {\n    __proto__: null,\n    currentUrl,\n    forms,\n    AjaxLookup,\n    AutoSuggest,\n    Form,\n    Field,\n    Select2Utils: Utils,\n    Select2Defaults: Defaults,\n    fieldContainerSelector,\n    createSelect,\n    createModalLookup,\n    createFilter,\n    initIcons,\n    initPasswordOptions,\n    getApiUrl,\n    parseUrl,\n    createSearchParams,\n    getSearchParams,\n    getSearchParam,\n    setSearchParams,\n    mergeSearchParams,\n    setSearchParam,\n    deleteSearchParam,\n    buildUrl,\n    setLayout,\n    sanitizeUrl,\n    setSessionTimer,\n    initExportLinks,\n    initMultiSelectCheckboxes,\n    getError,\n    fileDownload,\n    lazyLoad,\n    updateDropdownPosition,\n    initLightboxes,\n    initPdfObjects,\n    initTooltips,\n    parseJson,\n    searchOperatorChange,\n    initForms,\n    isFunction: isFunction$2,\n    alert: _alert,\n    prompt: _prompt,\n    toast,\n    showToast,\n    getForm,\n    hasFormData,\n    setSearchType,\n    updateOptions,\n    getUserParams,\n    getQueryBuilderFilterInput,\n    getQueryBuilderValueSetter,\n    getQueryBuilderFilterValidation,\n    applyTemplate,\n    exportCustom,\n    toggleGroup,\n    convertToBool,\n    valueChanged,\n    setLanguage,\n    submitAction,\n    getchartParams,\n    _export,\n    export: _export,\n    removeSpaces,\n    isHiddenTextArea,\n    isModalLookup,\n    isFilter,\n    isAutoSuggest,\n    isSelect2,\n    isNativeSelectOne,\n    isTextbox,\n    isBooleanCheckbox,\n    clearError,\n    onError,\n    setFocus,\n    setInvalid,\n    setValid,\n    hasValue,\n    isMaskedPassword,\n    sort,\n    filter,\n    scrollIntoView,\n    inlineAction,\n    confirmDelete,\n    keySelected,\n    selectAllKeys,\n    selectAll,\n    updateSelected,\n    clearSelected,\n    clearDelete,\n    clickDelete,\n    selectKey,\n    setupTable,\n    setupGrid,\n    addGridRow,\n    deleteGridRow,\n    htmlEncode,\n    htmlDecode,\n    getElements,\n    getElement,\n    getAncestorBy,\n    isHidden,\n    sameText,\n    sameString,\n    headerCase,\n    samePath,\n    getValue,\n    getOptionValues,\n    getOptionValue,\n    getOptionTexts,\n    clearOptions,\n    getId,\n    valueSeparator,\n    displayValue,\n    optionHtml,\n    optionsHtml,\n    newOption,\n    selectOption,\n    fetch: _fetch,\n    executeScript,\n    stripScript,\n    addScript,\n    removeScript,\n    getContent,\n    getOptions,\n    enable2FA,\n    disable2FA,\n    sendOTP,\n    showBackupCodes,\n    addOptionDialogShow,\n    modalDialogHide,\n    modalDialogShow,\n    importDialogShow,\n    autoFill,\n    tooltip,\n    initSearchFilters,\n    emailDialogShow,\n    exportEmail,\n    showDrillDown,\n    ajax,\n    currentPage,\n    toggleSearchOperator,\n    toggleLayout,\n    copyToClipboard,\n    checkInteger,\n    checkNumber,\n    escapeRegExChars,\n    checkRange,\n    checkPhone,\n    checkZip,\n    checkCreditCard,\n    checkSsn,\n    checkEmails,\n    checkEmail,\n    checkGuid,\n    checkUrl,\n    checkByRegEx,\n    showMessage,\n    random,\n    upload,\n    parseNumber,\n    getNumberingSystem,\n    formatDateTime,\n    formatTimeSpan,\n    parseDateTime,\n    parseDate: parseDateTime,\n    parseTime: parseDateTime,\n    checkDate,\n    checkTime,\n    formatCurrency,\n    formatNumber,\n    formatPercent,\n    initPage,\n    redirect,\n    togglePassword,\n    updateChart,\n    isMediumScreen,\n    isMobile,\n    refresh,\n    isDark,\n    fixLayoutHeight,\n    addEventHandlers\n  };\n\n  /**\r\n   * Create FullCalendar object\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {Object} options - Calendar options\r\n   * @param {Object} options.fullCalendarOptions - FullCalendar options\r\n   * @param {Object} options.eventPopoverOptions - Event popover options\r\n   * @param {HTMLElement} dropdown - HTML element\r\n   * @returns calendar object\r\n   */\r\n  function fullCalendar(el, options, dropdown) {\r\n    let {\r\n        updateTable,\r\n        eventFields,\r\n        addUrl,\r\n        viewUrl,\r\n        editUrl,\r\n        deleteUrl,\r\n        copyUrl,\r\n        fullCalendarOptions,\r\n        eventPopoverOptions\r\n      } = options,\r\n      calendar;\r\n\r\n    // Remove addUrl in options\r\n    delete options.addUrl;\r\n\r\n    // Update event from server side JSON response\r\n    let processJson = data => {\r\n      //console.log(result);\r\n      let convertValue = (key, value) => {\r\n        let match;\r\n        if (typeof value == \"string\" && (match = value.match(/^(\\d{4}-\\d{2}-\\d{2}) (\\d{2}:\\d{2}:\\d{2})/)))\r\n          // Make sure ISO date\r\n          return match[1] + \"T\" + match[2];\r\n        if (key == \"allDay\")\r\n          // Make sure Boolean\r\n          return ew.convertToBool(value);else if (key == \"url\" && !value) return \"\"; // Make sure not null\r\n        else if (key == \"display\" && !value) return \"auto\"; // Make sure not null\r\n        else if (key == \"classNames\" && value && $__default.default.isString(value))\r\n          // Make sure return as array\r\n          return value.replace(/\\s+/g, \" \").split(\" \");else if (key == \"classNames\" && !value)\r\n          // Make sure return as array\r\n          return [\"\"];else if (key == \"groupId\" && !value)\r\n          // Make sure return as stringy\r\n          return \"\";else if (key == \"description\" && !value) return \"\"; // Make sure not null\r\n        else return value;\r\n      };\r\n      if (data.success) {\r\n        let action = data.action,\r\n          events = data[updateTable];\r\n        if (!Array.isArray(events)) events = [events];\r\n        for (let event of events) {\r\n          for (let [key, name] of Object.entries(eventFields)) {\r\n            // Normalize keys in event\r\n            if (key != name && name !== null && name in event) {\r\n              event[key] = event[name];\r\n              delete event[name];\r\n            }\r\n          }\r\n          if (action == ew.API_DELETE_ACTION) {\r\n            var _calendar$getEventByI;\r\n            // Remove deleted event\r\n            (_calendar$getEventByI = calendar.getEventById(event.id)) == null ? void 0 : _calendar$getEventByI.remove();\r\n          } else if (action == ew.API_ADD_ACTION) {\r\n            // Add/Copy event\r\n            for (let name in event) {\r\n              // Check new properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                value = event[name];\r\n              if (key && value !== undefined)\r\n                // Value can be null\r\n                event[key] = convertValue(key, value); // Convert value\r\n            }\r\n\r\n            calendar.addEvent(event);\r\n          } else {\r\n            // Update event\r\n            let curEvent = calendar.getEventById(event.id);\r\n            let groupId = event.groupId;\r\n            for (let name in event) {\r\n              // Update properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                value = convertValue(key, event[name]);\r\n              if (key && value !== undefined) {\r\n                // Value can be null\r\n                value = convertValue(key, value); // Convert value\r\n                if (key == \"start\") curEvent.setStart(value);else if (key == \"end\") curEvent.setEnd(value);else if (key == \"allDay\") curEvent.setAllDay(value);else if (key == \"description\") curEvent.setExtendedProp(key, value);else if (key != \"id\" && !groupId)\r\n                  // setProp will change all related events, https://fullcalendar.io/docs/Event-setProp\r\n                  curEvent.setProp(key, value);\r\n              } else if (value) {\r\n                curEvent.setExtendedProp(name, value);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    // Process event\r\n    let processEvent = info => {\r\n      let event = info.event,\r\n        events = [event, ...info.relatedEvents],\r\n        apiAction = event.id ? ew.API_EDIT_ACTION : ew.API_ADD_ACTION;\r\n      events.forEach(event => processRequest(event, apiAction).then(data => {\r\n        if (!data.success) {\r\n          // Revert if not success\r\n          info.revert();\r\n        } else {\r\n          // Update event\r\n          processJson(data);\r\n        }\r\n      }).catch(err => {\r\n        // Revert if error\r\n        console.log(err);\r\n        info.revert();\r\n      }));\r\n    };\r\n\r\n    // Process request\r\n    let processRequest = (event, apiAction) => new Promise((resolve, reject) => {\r\n      // Set up post data\r\n      let obj = event.toPlainObject({\r\n          collapseExtendedProps: true\r\n        }),\r\n        data = {};\r\n      // Event fields\r\n      for (let [key, name] of Object.entries(eventFields)) {\r\n        if (key in obj) {\r\n          let val = obj[key];\r\n          name || (name = key);\r\n          if (val instanceof Date)\r\n            // Handle date field, need to convert to ISO string\r\n            val = val.toISOString().slice(0, -5).replace(/T/, \" \"); // Assume UTC\r\n          else if (typeof val == \"string\" && val.match(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/)) val = val.substring(0, 19).replace(/T/, \" \");else if (typeof val === \"boolean\")\r\n            // Handle boolean field\r\n            val = val ? \"1\" : \"0\";else if (key == \"classNames\") val = Array.isArray(val) ? val.join(\" \") : val; // Convert array to string\r\n          data[name] = val;\r\n          delete obj[key];\r\n        }\r\n      }\r\n      data = {\r\n        ...data,\r\n        ...obj\r\n      };\r\n      // Post to Event Table add/edit/delete API\r\n      let apiUrl = apiAction == ew.API_ADD_ACTION ? ew.getApiUrl([apiAction, updateTable]) : ew.getApiUrl([apiAction, updateTable, event.id]);\r\n      $__default.default.post(apiUrl, data, data => resolve(data)).fail(err => reject(err));\r\n    });\r\n\r\n    // Get field parameter\r\n    let getFldParm = name => Object.keys(currentTable.fields).find(key => currentTable.fields[key].name == name);\r\n\r\n    // Add menu ID to URL\r\n    let urlAddId = (url, id) => {\r\n      let ar = url.split(\"?\");\r\n      ar[0] += id ? (!ar[0].endsWith(\"/\") ? \"/\" : \"\") + id : \"\";\r\n      return ar.join(\"?\");\r\n    };\r\n\r\n    // Add/Copy event\r\n    let addEventDialogShow = data => {\r\n      let url = addUrl,\r\n        params = new URLSearchParams();\r\n      if ($__default.default.isObject(data) && (data.startStr || data.endStr /* || data.allDay */)) {\r\n        let startFld = getFldParm(eventFields[\"start\"]),\r\n          endFld = getFldParm(eventFields[\"end\"]) /*,\r\n                                                  allDayFld = getFldParm(eventFields[\"allDay\"])*/;\r\n        if (startFld && data.startStr) params.set(startFld, data.startStr);\r\n        if (endFld && data.endStr) params.set(endFld, data.endStr);\r\n        // if (allDayFld && data.allDay)\r\n        //     params.set(allDayFld, \"1\");\r\n      }\r\n\r\n      if ($__default.default.isString(data) && data.match(/^\\d+$/))\r\n        // Copy\r\n        url = urlAddId(url, data);\r\n      let qs = params.toString();\r\n      url += qs ? \"?\" + qs : \"\";\r\n      ew.modalDialogShow({\r\n        url: url,\r\n        callback: processJson,\r\n        json: true,\r\n        btn: ew.language.phrase(\"AddBtn\"),\r\n        caption: ew.language.phrase(\"AddLink\")\r\n      });\r\n    };\r\n\r\n    // View event\r\n    let viewEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(viewUrl, id),\r\n      callback: processJson,\r\n      json: true,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"ViewLink\")\r\n    });\r\n\r\n    // Edit event\r\n    let editEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(editUrl, id),\r\n      callback: processJson,\r\n      json: true,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"EditLink\")\r\n    });\r\n\r\n    // Delete event\r\n    let deleteEvent = id => ew.prompt(ew.language.phrase(\"DeleteEventConfirm\"), result => {\r\n      if (result) ew.modalDialogShow({\r\n        url: ew.setSearchParams(urlAddId(deleteUrl, id), {\r\n          action: \"delete\"\r\n        }),\r\n        callback: processJson,\r\n        json: true\r\n      });\r\n    });\r\n\r\n    // Add custom add button\r\n    if (addUrl) {\r\n      fullCalendarOptions.customButtons = {\r\n        add: {\r\n          text: ew.language.phrase(\"AddEvent\"),\r\n          click: addEventDialogShow\r\n        }\r\n      };\r\n      fullCalendarOptions.headerToolbar.left += \" add\";\r\n    }\r\n\r\n    // Get or create popover\r\n    let getOrCreatePopover = info => {\r\n      let config = {\r\n        ...bootstrap.Popover.Default,\r\n        ...eventPopoverOptions,\r\n        trigger: \"manual\" // Set trigger to \"manual\"\r\n      };\r\n\r\n      let popover = bootstrap.Popover.getOrCreateInstance(info.el, config),\r\n        template = Array.from(document.querySelectorAll(\"script[data-name='event-popover']\")).sort((a, b) => {\r\n          a = parseInt(a.dataset.seq, 10) || 0;\r\n          b = parseInt(b.dataset.seq, 10) || 0;\r\n          return a - b;\r\n        }).shift(),\r\n        tmpl = $__default.default.templates(template.text);\r\n      info.event.setExtendedProp(\"timeSpan\", ew.formatTimeSpan(info.event.start, info.event.end, info.event.allDay)); // Add extended property \"timeSpan\"\r\n      let content = tmpl.render(info.event, ew.jsRenderHelpers).trim();\r\n      if (content) {\r\n        var _Array$from$find$repl, _Array$from$find;\r\n        let popoverClass = (_Array$from$find$repl = (_Array$from$find = Array.from(info.el.classList.values()).find(name => name.match(/^event-([\\w+]+)\\b/))) == null ? void 0 : _Array$from$find.replace(/^event-/, \"popover-\")) != null ? _Array$from$find$repl : \"popover-default\";\r\n        popover._templateFactory = null; // Make sure popover create tip again from _config\r\n        popover._config.title = info.event.title;\r\n        popover._config.content = content;\r\n        popover._config.customClass += (popover._config.customClass ? \" \" : \"\") + \"ew-event-popover \" + popoverClass;\r\n        return popover;\r\n      }\r\n      return null;\r\n    };\r\n\r\n    // Context menu\r\n    let generateGetBoundingClientRect = info => {\r\n        let x = 0,\r\n          y = 0;\r\n        if (info) {\r\n          let rect = info.el.getBoundingClientRect(),\r\n            evt = info.jsEvent;\r\n          x = rect.left + evt.offsetX, y = rect.top + evt.offsetY;\r\n        }\r\n        return () => ({\r\n          width: 0,\r\n          height: 0,\r\n          top: y,\r\n          right: x,\r\n          bottom: y,\r\n          left: x\r\n        });\r\n      },\r\n      virtualElement = {\r\n        getBoundingClientRect: generateGetBoundingClientRect()\r\n      },\r\n      bsDropdown;\r\n    if (dropdown && options.useContextMenu && (viewUrl || editUrl || addUrl && copyUrl || deleteUrl)) {\r\n      dropdown.dataset.bsToggle = \"dropdown\"; // For clearing dropdown menu\r\n      document.addEventListener(\"keydown\", event => event.key !== \"Escape\" || bootstrap.Dropdown.clearMenus());\r\n      bsDropdown = bootstrap.Dropdown.getOrCreateInstance(dropdown, {\r\n        reference: virtualElement\r\n      });\r\n      bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => item.addEventListener(\"click\", e => {\r\n        let dataset = e.currentTarget.dataset,\r\n          action = dataset.action,\r\n          id = dataset.eventId;\r\n        if (action && id) {\r\n          if (action == \"view\" && viewUrl) viewEventDialogShow(id);else if (action == \"edit\" && editUrl) editEventDialogShow(id);else if (action == \"copy\" && addUrl && copyUrl)\r\n            // Copy\r\n            addEventDialogShow(id);else if (action == \"delete\" && deleteUrl) deleteEvent(id);\r\n        }\r\n      }));\r\n    }\r\n\r\n    // Options\r\n    let opts = ew.deepAssign(fullCalendarOptions, {\r\n      // events\r\n      //eventDragStart: info => console.log(info),\r\n      //eventDragStop: info => console.log(info),\r\n      drop: function (info) {\r\n        // Remove element\r\n        let checkbox = document.getElementById(\"remove-event\");\r\n        if (checkbox.checked) info.draggedEl.parentNode.removeChild(info.draggedEl);\r\n      },\r\n      select: event => addUrl && addEventDialogShow(event),\r\n      eventReceive: processEvent,\r\n      // Event created\r\n      eventDragStart: info => {\r\n        var _bootstrap$Popover$ge;\r\n        return (_bootstrap$Popover$ge = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge.hide();\r\n      },\r\n      eventDrop: processEvent,\r\n      // Event changed (Drag / Drop)\r\n      eventResize: processEvent,\r\n      // Event changed (Resize)\r\n      eventClick: info => {\r\n        // Event click\r\n        info.jsEvent.preventDefault();\r\n        if (info.jsEvent.button == 2) {\r\n          // Right click\r\n          if (bsDropdown) {\r\n            var _bootstrap$Popover$ge2;\r\n            (_bootstrap$Popover$ge2 = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge2.hide();\r\n            bsDropdown.hide();\r\n            bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => {\r\n              item.dataset.eventId = info.event.id;\r\n              item.classList.toggle(\"d-none\", !options[item.dataset.action + \"Url\"]);\r\n            });\r\n            if (bsDropdown._menu.querySelectorAll(\".dropdown-item:not(.d-done)\").length) {\r\n              virtualElement.getBoundingClientRect = generateGetBoundingClientRect(info);\r\n              bsDropdown.show();\r\n            }\r\n          }\r\n        } else if (info.event.url) {\r\n          window.open(info.event.url);\r\n        } else if (options.usePopover && eventPopoverOptions.trigger.match(/\\bclick\\b/)) {\r\n          var _getOrCreatePopover;\r\n          (_getOrCreatePopover = getOrCreatePopover(info)) == null ? void 0 : _getOrCreatePopover.toggle();\r\n        } else if (options.showViewPageOnEventClick) {\r\n          viewEventDialogShow(info.event.id);\r\n        }\r\n      },\r\n      eventMouseEnter: info => {\r\n        var _bsDropdown, _getOrCreatePopover2;\r\n        if ((_bsDropdown = bsDropdown) != null && _bsDropdown._isShown(bsDropdown._menu) /* && bsDropdown._element.dataset.eventId == info.event.id*/) return;\r\n        if (info.view.type == \"dayGridMonth\" && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_getOrCreatePopover2 = getOrCreatePopover(info)) == null ? void 0 : _getOrCreatePopover2.show();\r\n      },\r\n      eventMouseLeave: info => {\r\n        var _bsDropdown2, _bootstrap$Popover$ge3;\r\n        if ((_bsDropdown2 = bsDropdown) != null && _bsDropdown2._isShown(bsDropdown._menu) /* && bsDropdown._element.dataset.eventId == info.event.id*/) return;\r\n        if (info.view.type == \"dayGridMonth\" && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_bootstrap$Popover$ge3 = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge3.hide();\r\n      }\r\n    });\r\n\r\n    // Trigger \"calendar\" event\r\n    let args = {\r\n      element: el,\r\n      options: opts\r\n    };\r\n    $__default.default(document).trigger(\"calendar\", [args]);\r\n\r\n    // Create calendar\r\n    calendar = new window.FullCalendar.Calendar(el, args.options);\r\n\r\n    // Return calendar\r\n    return calendar;\r\n  }\n\n  var fullCalendar$1 = {\n    __proto__: null,\n    fullCalendar\n  };\n\n  /**\r\n   * Service worker\r\n   */\r\n  ew__default.default.SERVICE_WORKER = \"sw.js\";\r\n\r\n  /**\r\n   * Show dialog for push notification\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {string} args.url - URL of web push API\r\n   * @param {MouseEvent} args.evt - Mouse event\r\n   * @returns false\r\n   */\r\n  async function pushNotificationDialogShow(args) {\r\n    let $dlg = ew__default.default.pushDialog || $__default.default(\"#ew-push-notification-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $__default.default(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n    if (!$dlg[0]) {\r\n      console.log(\"DIV #ew-push-notificatoin-dialog not found\");\r\n      return false;\r\n    }\r\n    if (!args.url) {\r\n      // No API URL\r\n      console.log(\"Missing URL of Web Push API\");\r\n      return false;\r\n    }\r\n    let target = args.evt.currentTarget,\r\n      // Button\r\n      $form = $__default.default(target.form),\r\n      $f = $dlg.find(\".modal-body form\"),\r\n      frm = $f.data(\"form\");\r\n    $f.data(\"all\", false); // Reset\r\n    if (!$form.find(\"input[name='key_m[]']:checked\")[0]) {\r\n      // No keys selected\r\n      let result = await ew__default.default.prompt(ew__default.default.language.phrase(\"SendPushNotificationsToAll\"), bool => bool); // Callback returns result as boolean\r\n      $f.data(\"all\", result);\r\n      if (!result)\r\n        // Cancelled\r\n        return;\r\n    }\r\n    if (!frm) {\r\n      frm = new ew__default.default.FormBuilder().setId($f.attr(\"id\")).addFields([[\"title\", ew__default.default.Validators.required(ew__default.default.language.phrase(\"PushNotificationFormTitle\"))], [\"body\", ew__default.default.Validators.required(ew__default.default.language.phrase(\"PushNotificationFormBody\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = [$f.serialize(), $f.data(\"all\") ? \"\" : $form.find(\"input[name='key_m[]']:checked\").serialize()].join(\"&\");\r\n        $__default.default.post(args.url, data, result => {\r\n          var _result$error;\r\n          if (Array.isArray(result)) {\r\n            let successes = result.reduce((acc, cur) => acc + (cur.success ? 1 : 0), 0),\r\n              failures = result.length - successes;\r\n            if (successes > 0 && failures == 0) ew__default.default.alert(ew__default.default.language.phrase(\"PushNotificationSuccess\").replace(\"%s\", successes), \"success\");else if (successes == 0 && failures > 0) ew__default.default.alert(ew__default.default.language.phrase(\"PushNotificationFailure\").replace(\"%f\", failures));else if (successes == 0 && failures == 0) ew__default.default.alert(ew__default.default.language.phrase(\"NoSubscriptions\").replace(\"%f\", failures), \"primary\");else ew__default.default.alert(ew__default.default.language.phrase(\"PushNotificationSent\").replace(\"%s\", successes).replace(\"%f\", failures), \"primary\");\r\n          } else if (result != null && (_result$error = result.error) != null && _result$error.description) {\r\n            ew__default.default.alert(result.error.description);\r\n          }\r\n        });\r\n        return true;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n    ew__default.default.pushDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr || target.dataset.caption).end().modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check if push notification and service workers are supported by browser\r\n   */\r\n  function isPushNotificationSupported() {\r\n    return \"serviceWorker\" in navigator && \"PushManager\" in window;\r\n  }\r\n\r\n  /**\r\n   * Base 64 to Unit8Array\r\n   */\r\n  function urlBase64ToUint8Array(base64String) {\r\n    const padding = \"=\".repeat((4 - base64String.length % 4) % 4),\r\n      base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\"),\r\n      rawData = window.atob(base64),\r\n      outputArray = new Uint8Array(rawData.length);\r\n    for (let i = 0; i < rawData.length; ++i) outputArray[i] = rawData.charCodeAt(i);\r\n    return outputArray;\r\n  }\r\n\r\n  /**\r\n   * Send subscription to server\r\n   */\r\n  async function sendSubscriptionToServer(subscription, url) {\r\n    const key = subscription.getKey(\"p256dh\"),\r\n      token = subscription.getKey(\"auth\"),\r\n      contentEncoding = (PushManager.supportedContentEncodings || [\"aesgcm\"])[0];\r\n    let formData = new FormData();\r\n    formData.set(\"endpoint\", subscription.endpoint);\r\n    formData.set(\"publicKey\", key ? btoa(String.fromCharCode.apply(null, new Uint8Array(key))) : null);\r\n    formData.set(\"authToken\", token ? btoa(String.fromCharCode.apply(null, new Uint8Array(token))) : null);\r\n    formData.set(\"contentEncoding\", contentEncoding);\r\n    let response = await ew__default.default.fetch(url, {\r\n      method: \"POST\",\r\n      body: formData\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  /**\r\n   * Create subscription and send to server\r\n   * @returns Promise that resolves to a PushSubscription object\r\n   */\r\n  async function createSubscription() {\r\n    var _result$error2;\r\n    let url = ew__default.default.getApiUrl([ew__default.default.API_PUSH_NOTIFICATION_ACTION, ew__default.default.API_PUSH_NOTIFICATION_SUBSCRIBE]),\r\n      serviceWorkerReg = await navigator.serviceWorker.ready,\r\n      subscription = await serviceWorkerReg.pushManager.subscribe({\r\n        userVisibleOnly: true,\r\n        applicationServerKey: urlBase64ToUint8Array(ew__default.default.PUSH_SERVER_PUBLIC_KEY)\r\n      }),\r\n      result = await sendSubscriptionToServer(subscription, url);\r\n    if (result != null && (_result$error2 = result.error) != null && _result$error2.description) ew__default.default.alert(result.error.description);\r\n    return result.success ? subscription : null;\r\n  }\r\n\r\n  /**\r\n   * Get subscription\r\n   */\r\n  async function getSubscription() {\r\n    let serviceWorkerReg = await navigator.serviceWorker.ready;\r\n    return serviceWorkerReg.pushManager.getSubscription();\r\n  }\r\n\r\n  /**\r\n   * Set subscription\r\n   * @param {PushSubscription} subscription\r\n   */\r\n  function setSubscription(subscription) {\r\n    let $btn = $__default.default(\"#subscribe-notification\").toggleClass(\"ew-enable-notification\", !subscription).removeClass(\"disabled\");\r\n    $btn.find(\"i\").toggleClass(\"fa-bell\", !subscription).toggleClass(\"fa-bell-slash\", !!subscription);\r\n    let inst = bootstrap.Tooltip.getInstance($btn[0]);\r\n    if (inst) inst._config.title = ew__default.default.language.phrase(subscription ? \"DisableNotifications\" : \"EnableNotifications\");\r\n  }\r\n\r\n  /**\r\n   * Subscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n  async function subscribeNotification() {\r\n    if (Notification.permission !== \"denied\" && !ew__default.default.IS_SYS_ADMIN) {\r\n      // Support non system administrator\r\n      document.body.style.cursor = \"wait\";\r\n      try {\r\n        if (Notification.permission === \"granted\") {\r\n          var _await$getSubscriptio, _document$getElementB;\r\n          setSubscription((_await$getSubscriptio = await getSubscription()) != null ? _await$getSubscriptio : await createSubscription());\r\n          if (!((_document$getElementB = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB.classList.contains(\"ew-enable-notification\"))) ew__default.default.showToast(ew__default.default.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        } else if (Notification.permission === \"default\" && (await Notification.requestPermission()) == \"granted\") {\r\n          var _document$getElementB2;\r\n          setSubscription(await createSubscription());\r\n          if (!((_document$getElementB2 = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB2.classList.contains(\"ew-enable-notification\"))) ew__default.default.showToast(ew__default.default.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew__default.default.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check subscription\r\n   *\r\n   * @returns true\r\n   */\r\n  async function checkSubscription() {\r\n    $__default.default(\"#subscribe-notification\").tooltip();\r\n    if (Notification.permission == \"granted\") setSubscription(await getSubscription());else setSubscription(null);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n  async function unsubscribeNotification() {\r\n    ew__default.default.prompt({\r\n      html: ew__default.default.language.phrase(\"DisableNotificationsConfirm\")\r\n    }, async res => {\r\n      if (!res) return;\r\n      document.body.style.cursor = \"wait\";\r\n      try {\r\n        var _result$error3;\r\n        let subscription = await getSubscription();\r\n        await subscription.unsubscribe();\r\n        let url = ew__default.default.getApiUrl([ew__default.default.API_PUSH_NOTIFICATION_ACTION, ew__default.default.API_PUSH_NOTIFICATION_DELETE]),\r\n          result = await sendSubscriptionToServer(subscription, url); // Delete subscription\r\n        if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n          ew__default.default.alert(result.error.description);\r\n          return false;\r\n        }\r\n        if (result.success) {\r\n          // No subscription or deleted successfully\r\n          setSubscription(null);\r\n          ew__default.default.showToast(ew__default.default.language.phrase(\"NotificationsDisabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew__default.default.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Init web push notifications\r\n   */\r\n  loadjs.ready(\"foot\", () => {\r\n    if (ew__default.default.PUSH_SERVER_PUBLIC_KEY && isPushNotificationSupported()) {\r\n      navigator.serviceWorker.register(ew__default.default.PATH_BASE + ew__default.default.SERVICE_WORKER, {\r\n        scope: ew__default.default.PATH_BASE\r\n      }).then(() => {\r\n        checkSubscription();\r\n        $__default.default(\"#subscribe-notification\").on(\"click\", function () {\r\n          this.classList.contains(\"ew-enable-notification\") ? subscribeNotification() : unsubscribeNotification();\r\n        });\r\n      }).catch(e => console.log(e));\r\n    } else {\r\n      $__default.default(\"#subscribe-notification\").addClass(\"d-none\");\r\n    }\r\n  });\n\n  var webpush = {\n    __proto__: null,\n    pushNotificationDialogShow,\n    isPushNotificationSupported,\n    subscribeNotification,\n    checkSubscription,\n    unsubscribeNotification\n  };\n\n  /**\r\n   * Map styles\r\n   */\r\n\r\n  /**\r\n   * Show map\r\n   * @param {Object} data Data of map\r\n   */\r\n  function show(data) {\r\n    if (data.inited)\r\n      // Already initiated\r\n      return true;\r\n    let latlng = data.latlng,\r\n      $div = $__default.default(\"#\" + data.id),\r\n      useSingleMap = data.useSingleMap,\r\n      showAllMarkers = data.showAllMarkers,\r\n      useMarkerClusterer = data.useMarkerClusterer,\r\n      ext = ew.maps[data.ext];\r\n    if (useSingleMap) {\r\n      // Use single map\r\n      let id = data.id.replace(/^mp\\d*_/, \"mp_\"); // Remove index from \"m<n>_\" prefix\r\n      $div = $__default.default(\"#\" + id);\r\n      if (!$div[0]) {\r\n        $div = $__default.default(\"<div></div>\").attr(\"id\", id).addClass(\"ew-single-map\").height(data.singleMapHeight); // Create new $div for single map\r\n        if (data.singleMapWidth) $div.width(data.singleMapWidth);\r\n        $__default.default(\".ew-grid, .ew-multi-column-grid\").first()[data.showMapOnTop ? \"before\" : \"after\"]($div); // Insert before/after table\r\n        data.map = ext.createMap($div[0], data);\r\n        $div.data(\"map\", data.map);\r\n        $div.data(\"ext\", data.ext);\r\n        $div.data(\"bounds\", showAllMarkers ? ext.createBounds() : null);\r\n        $div.data(\"markerClusterer\", useMarkerClusterer ? ext.createMarkerClusterer(data) : null);\r\n      }\r\n      data = Object.assign(data, $div.data()); // Merge data\r\n    } else {\r\n      if (!latlng) {\r\n        // Location not found\r\n        $div.addClass(\"d-none\").html(data.status);\r\n        return true;\r\n      }\r\n      $div.next(\".ew-map-value\").addClass(\"d-none\"); // Hide view value\r\n      if (!data.map) data.map = ext.createMap($div[0], data);\r\n    }\r\n    data.marker = ext.createMarker(data); // Create marker\r\n    data.inited = true; // Initiated\r\n    $__default.default(document).trigger(\"map\", [data]);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * All maps initiated\r\n   */\r\n  function done() {\r\n    $__default.default(\".ew-single-map\").each(function () {\r\n      let data = $__default.default(this).data();\r\n      ew.maps[data.ext].fitBounds(data); // Fit bounds\r\n    });\r\n\r\n    $__default.default(document).trigger(\"maps\");\r\n  }\r\n\r\n  /**\r\n   * Init maps\r\n   * @param {string} [ext] - Map type, e.g. 'googlemaps', 'leaflet'\r\n   * @returns\r\n   */\r\n  function init(ext) {\r\n    let promises = $__default.default(\".ew-map\").filter(function () {\r\n      return !ext || $__default.default(this).data(\"ext\") == ext;\r\n    }).map(function (i) {\r\n      let data = $__default.default(this).data();\r\n      if (data.inited)\r\n        // Already initiated\r\n        return show(data);\r\n      data.id = this.id; // Get ID\r\n      data.address = (data.address || \"\").trim();\r\n      if (data.address) {\r\n        let geocodingDelay = data.geocodingDelay;\r\n        return new Promise(resolve => {\r\n          $__default.default.later(i * geocodingDelay, null, () => {\r\n            // Set a timer for better performance\r\n            resolve(ew.maps[data.ext].geocode(data).then(latlng => {\r\n              data.latlng = latlng;\r\n            }).catch(status => {\r\n              data.status = status;\r\n            }).finally(() => show(data)));\r\n          });\r\n        });\r\n      } else {\r\n        let latitude = data.latitude,\r\n          longitude = data.longitude;\r\n        if (latitude && !isNaN(latitude) && longitude && !isNaN(longitude)) data.latlng = ew.maps[data.ext].createLatLng(latitude, longitude);\r\n        return show(data);\r\n      }\r\n    }).get();\r\n    return Promise.all(promises).then(done);\r\n  }\r\n\r\n  /**\r\n   * Init\r\n   */\r\n  $__default.default(function () {\r\n    $__default.default(\"#ew-modal-dialog\").on(\"load.ew\", init);\r\n    $__default.default(document).on(\"preview.ew\", init);\r\n  });\n\n  var maps = {\n    __proto__: null,\n    show,\n    done,\n    init\n  };\n\n  ew.MOBILE_DETECT = new MobileDetect(window.navigator.userAgent);\r\n  ew.IS_MOBILE = !!ew.MOBILE_DETECT.mobile();\r\n\r\n  // Charts\r\n  window.exportCharts = {}; // Per window\r\n\r\n  // Extend\r\n  Object.assign(ew, {\r\n    MultiPage,\r\n    Form,\r\n    FormBuilder,\r\n    Validators,\r\n    maps\r\n  }, functions, webpush, fullCalendar$1);\r\n  var $document = $__default.default(document);\r\n\r\n  // Init document\r\n  loadjs.ready(\"load\", function () {\r\n    $__default.default.views.settings.debugMode(ew.DEBUG);\r\n    ew.setSessionTimer();\r\n    ew.initPage();\r\n    $__default.default(\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\r\n    $__default.default(\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\r\n    var hash = ew.currentUrl.searchParams.get(\"hash\");\r\n    if (hash) $__default.default(\"html, body\").animate({\r\n      scrollTop: $__default.default(\"#\" + hash).offset().top\r\n    }, 800);\r\n    $document.trigger(\"load.ew\");\r\n  });\r\n\r\n  // Default \"addoption\" event (fired before adding new option to selection list)\r\n  $document.on(\"addoption\", function (e, args) {\r\n    let row = args.data,\r\n      // New row to be validated\r\n      arp = args.parents; // Parent field values\r\n    for (let i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Iterate parent values\r\n      let p = arp[i];\r\n      if (!p.length)\r\n        // Empty parent\r\n        //continue; // Allow\r\n        return args.valid = false; // Disallow\r\n      let val = row[\"ff\" + (i > 0 ? i + 1 : \"\")]; // Filter fields start from the 6th field\r\n      if (!$__default.default.isUndefined(val) && !p.includes(String(val)))\r\n        // Filter field value not in parent field values\r\n        return args.valid = false; // Returns false if invalid\r\n    }\r\n  });\r\n\r\n  // Click handler for buttons\r\n  $document.on(\"click\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $__default.default(this).data()),\r\n      action = data.ewAction;\r\n    if (!action) {\r\n      return true;\r\n    } else if (action == \"none\") {\r\n      return false;\r\n    } else if (action == \"redirect\") {\r\n      return ew.redirect(data.url);\r\n    } else if (action == \"reload\") {\r\n      location.reload();\r\n      return false;\r\n    } else if (action == \"submit\") {\r\n      delete data.ewAction;\r\n      return ew.submitAction(e, data);\r\n    } else if (action == \"modal\") {\r\n      e.preventDefault();\r\n      return data.ajax ? ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      }) : ew.modalDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"inline\" || action == \"grid\") {\r\n      e.preventDefault();\r\n      return ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"export\") {\r\n      return ew.export({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"layout\") {\r\n      return ew.toggleLayout(this);\r\n    } else if (action == \"language\") {\r\n      return ew.setLanguage(this);\r\n    } else if (action == \"filter\") {\r\n      return ew.filter(e);\r\n    } else if (action == \"sort\") {\r\n      return ew.sort(e, this.dataset);\r\n    } else if (action == \"refresh\") {\r\n      let url = ew.setLayout(this.dataset.url, false);\r\n      if (url && url != \"#\") ew.refresh(fetch(url), this.dataset.context);\r\n      return false;\r\n    } else if (action == \"email\") {\r\n      delete data.ewAction;\r\n      return ew.emailDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"set-action\") {\r\n      this.form.elements[\"action\"].value = data.value;\r\n    } else if (action == \"drilldown\") {\r\n      return ew.showDrillDown(e, this, data.url, data.id, data.hdr);\r\n    } else if (action == \"add-option\") {\r\n      delete data.ewAction;\r\n      return ew.addOptionDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"search-type\") {\r\n      return ew.setSearchType(this);\r\n    } else if (action == \"search-operator\") {\r\n      ew.toggleSearchOperator(e, data.target, data.value);\r\n    } else if (action == \"search-toggle\") {\r\n      let panel = document.getElementById(this.dataset.form + \"_search_panel\");\r\n      if (panel) {\r\n        bootstrap.Collapse.getOrCreateInstance(panel).toggle();\r\n        this.classList.toggle(\"active\");\r\n      }\r\n    } else if (action == \"highlight\") {\r\n      $__default.default(\"mark.\" + this.dataset.name).toggleClass(\"mark\");\r\n      this.classList.toggle(\"active\");\r\n    } else if (action == \"inline-delete\") {\r\n      return ew.confirmDelete(this);\r\n    } else if (action == \"add-grid-row\") {\r\n      return ew.addGridRow(this);\r\n    } else if (action == \"delete-grid-row\") {\r\n      return ew.deleteGridRow(this, this.dataset.rowindex);\r\n    } else if (action == \"select-all\") {\r\n      ew.selectAll(this);\r\n    } else if (action == \"select-key\") {\r\n      ew.selectKey(e);\r\n    } else if (action == \"select-all-keys\") {\r\n      ew.selectAllKeys(this);\r\n    } else if (action == \"import\") {\r\n      return ew.importDialogShow({\r\n        evt: e,\r\n        hdr: data.hdr\r\n      });\r\n    } else if (action == \"password\") {\r\n      return ew.togglePassword(e);\r\n    } else if (action == \"push\") {\r\n      return ew.pushNotificationDialogShow({\r\n        evt: e,\r\n        url: data.apiUrl\r\n      });\r\n    } else if (action == \"enable-2fa\") {\r\n      return ew.enable2FA();\r\n    } else if (action == \"disable-2fa\") {\r\n      return ew.disable2FA();\r\n    } else if (action == \"send-otp\") {\r\n      var _document$getElementB;\r\n      return ew.sendOTP((_document$getElementB = document.getElementById(data.account)) == null ? void 0 : _document$getElementB.value);\r\n    } else if (action == \"backup-codes\") {\r\n      return ew.showBackupCodes();\r\n    } else if (action == \"scroll-top\") {\r\n      $__default.default(document).scrollTop($__default.default('#top').offset().top);\r\n      return false;\r\n    }\r\n  })\r\n  // Change handler for selects\r\n  .on(\"change\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $__default.default(this).data());\r\n    if (!data.ewAction) return true;\r\n    let actions = data.ewAction.split(\" \").filter(action => !!action);\r\n    for (let action of actions) {\r\n      if (action == \"submit-form\") {\r\n        var _this$form;\r\n        (_this$form = this.form) == null ? void 0 : _this$form.submit();\r\n      } else if (action == \"change-page-size\") {\r\n        let pageSize = ew.sameText(this.value, \"ALL\") ? \"ALL\" : ew.parseNumber(this.value);\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + pageSize;\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          let url = ew.setSearchParam(this.dataset.url, this.name, pageSize);\r\n          ew.redirect(url);\r\n        }\r\n        return false;\r\n      } else if (action == \"update-options\") {\r\n        ew.updateOptions.call(this);\r\n      } else if (action == \"autofill\") {\r\n        ew.autoFill(this);\r\n      } else if (action == \"search-operator\") {\r\n        return ew.searchOperatorChange(this);\r\n      } else if (action == \"language\") {\r\n        ew.setLanguage(this);\r\n      } else if (action == \"chart-order\") {\r\n        ew.updateChart(this);\r\n      }\r\n    }\r\n  }).on(\"keydown\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $__default.default(this).data()),\r\n      action = data.ewAction;\r\n    if (action == \"change-page\") {\r\n      // ew-page-number\r\n      if (e.key == \"Enter\") {\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + ew.parseNumber(this.value);\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          ew.currentUrl.searchParams.set(this.name, ew.parseNumber(this.value));\r\n          window.location = ew.sanitizeUrl(ew.currentUrl.toString());\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n  });\r\n\r\n  // Click handler for row links\r\n  $document.on(\"click\", \".ew-row-link\", e => e.stopPropagation());\r\n\r\n  // Fix z-index of multiple modals\r\n  $document.on(\"show.bs.modal\", \".modal\", function () {\r\n    var zIndex = 1050 + $__default.default(\".modal:visible\").length;\r\n    $__default.default(this).css(\"z-index\", zIndex);\r\n    setTimeout(function () {\r\n      $__default.default(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\r\n    }, 0);\r\n  });\r\n\r\n  // Fix scrolling of multiple modals\r\n  $document.on(\"hidden.bs.modal\", \".modal\", function () {\r\n    $__default.default(\".modal:visible\").length && $__default.default(\"body\").addClass(\"modal-open\");\r\n  });\r\n\r\n  // Crop action for jQuery File Upload\r\n  $__default.default.blueimp.fileupload.prototype.options.processQueue.unshift({\r\n    action: \"cropImage\",\r\n    // Action name\r\n    fileTypes: \"@loadImageFileTypes\",\r\n    // Reuse loadImageFileTypes\r\n    maxFileSize: \"@loadImageMaxFileSize\",\r\n    // Reuse loadImageMaxFileSize\r\n    cropperOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#options\r\n    cropperCanvasOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#getcroppedcanvasoptions\r\n    disabled: \"@disableImageCrop\" // Use data-disable-image-crop attribute to enable/disable\r\n  });\r\n\r\n  $__default.default.widget(\"blueimp.fileupload\", $__default.default.blueimp.fileupload, {\r\n    processActions: {\r\n      cropImage: function (data, options) {\r\n        let file = data.files[data.index];\r\n        if (options.disabled || $__default.default.isNumber(options.maxFileSize) && file.size > options.maxFileSize || options.fileTypes && !options.fileTypes.test(file.type)) return data;\r\n        let url = URL.createObjectURL(file),\r\n          dfd = $__default.default.Deferred(),\r\n          that = this;\r\n        let $dlg = ew.cropperDialog || $__default.default(\"#ew-cropper-dialog\").on(\"shown.bs.modal\", function () {\r\n          $dlg.data(\"cropper\", new Cropper(this.querySelector(\"#ew-crop-image\"), options.cropperOptions));\r\n        }).on(\"hidden.bs.modal\", function () {\r\n          var _$dlg$data;\r\n          (_$dlg$data = $dlg.data(\"cropper\")) == null ? void 0 : _$dlg$data.destroy();\r\n          $dlg.removeData(\"cropper\");\r\n          $dlg.find(\"#ew-crop-image\").attr(\"src\", \"data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\");\r\n        });\r\n        ew.cropperDialog = $dlg;\r\n        $dlg.find(\"#ew-crop-image\").attr(\"src\", url);\r\n        $dlg.find(\".ew-crop-btn\").off(\"click\").on(\"click\", function () {\r\n          if ($dlg.data(\"cropper\")) {\r\n            try {\r\n              let canvas = $dlg.data(\"cropper\").getCroppedCanvas(options.cropperCanvasOptions);\r\n              canvas.toBlob(blob => {\r\n                data.files[data.index] = new File([blob], file.name, {\r\n                  type: file.type\r\n                });\r\n                dfd.resolveWith(that, [data]);\r\n              }, file.type);\r\n            } catch (error) {\r\n              ew.alert(error);\r\n              dfd.rejectWith(that, [data]);\r\n            } finally {\r\n              $dlg.modal(\"hide\");\r\n            }\r\n          }\r\n        });\r\n        $dlg.find(\".ew-skip-btn\").off(\"click\").on(\"click\", function () {\r\n          dfd.resolveWith(that, [data]);\r\n          $dlg.modal(\"hide\");\r\n        });\r\n        $dlg.modal(\"show\");\r\n        return dfd.promise();\r\n      }\r\n    }\r\n  });\n\n  // Extend jQuery\r\n  $__default.default.extend({\r\n    isBoolean: function (o) {\r\n      return typeof o === 'boolean';\r\n    },\r\n    isNumber: function (o) {\r\n      return typeof o === 'number' && isFinite(o);\r\n    },\r\n    isObject: function (o) {\r\n      return o && (typeof o === 'object' || this.isFunction(o)) || false;\r\n    },\r\n    isString: function (o) {\r\n      return typeof o === 'string';\r\n    },\r\n    isUndefined: function (o) {\r\n      return typeof o === 'undefined';\r\n    },\r\n    isValue: function (o) {\r\n      return this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o);\r\n    },\r\n    isDate: function (o) {\r\n      return this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\r\n    },\r\n    later: function (when, o, fn, data, periodic) {\r\n      when = when || 0;\r\n      o = o || {};\r\n      var m = fn,\r\n        d = data,\r\n        f,\r\n        r;\r\n      if (this.isString(fn)) m = o[fn];\r\n      if (!m) return;\r\n      if (!this.isUndefined(data) && !this.isArray(d)) d = [data];\r\n      f = function () {\r\n        m.apply(o, d || []);\r\n      };\r\n      r = periodic ? setInterval(f, when) : setTimeout(f, when);\r\n      return {\r\n        interval: periodic,\r\n        cancel: function () {\r\n          if (this.interval) {\r\n            clearInterval(r);\r\n          } else {\r\n            clearTimeout(r);\r\n          }\r\n        }\r\n      };\r\n    }\r\n  });\n\n  /**\r\n   * jQuery.fields() plugin\r\n   *\r\n   * @param {string|undefined} fldvar - Field variable name or undefined\r\n   *  If field variable name, returns jQuery object of the specified field element(s).\r\n   *  If unspecified, returns object of jQuery objects of all fields.\r\n   * @returns jQuery object\r\n   */\r\n  $__default.default.fn.fields = function (fldvar) {\r\n    // Note: fldvar has NO \"x_\" prefix\r\n    let rec = {},\r\n      id = this.attr(\"id\"),\r\n      obj = this[0],\r\n      m = id.match(/^[xy](\\d*)_/),\r\n      f,\r\n      tbl,\r\n      infix;\r\n    if (m) {\r\n      // \"this\" is input element\r\n      f = ew.getForm(obj); // form\r\n      tbl = this.data(\"table\"); // table var\r\n      infix = m[1]; // row index\r\n    } else if (obj != null && obj.htmlForm) {\r\n      // \"this\" is form\r\n      f = obj.$element; // form\r\n      tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\r\n      infix = obj.htmlForm.dataset.rowindex; // row index\r\n    }\r\n\r\n    let selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\" + ($__default.default.isValue(infix) ? \"[name^=x\" + infix + \"]\" : \"\") + \":not(.ew-custom-option)\";\r\n    if (f && selector) {\r\n      $__default.default(f).find(selector).each(function () {\r\n        let key = this.dataset.field.substring(2),\r\n          // \"data-field\"\r\n          name = this.getAttribute(\"name\");\r\n        key = /^y_/.test(name) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\r\n        rec[key] = rec[key] ? rec[key].add(this) : $__default.default(this); // Create jQuery object for each field\r\n      });\r\n    }\r\n\r\n    return fldvar ? rec[fldvar] : rec;\r\n  };\r\n  $__default.default.fn.extend({\r\n    // Get jQuery object of the row (<div> or <tr>)\r\n    row: function () {\r\n      var _this$data;\r\n      let $row = this.closest(\"#r_\" + ((_this$data = this.data(\"field\")) == null ? void 0 : _this$data.substring(2)));\r\n      if (!$row[0]) $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\r\n      return $row;\r\n    },\r\n    // Show/Hide field\r\n    visible: function (v) {\r\n      var _this$data2;\r\n      let $p = this.closest(\"#r_\" + ((_this$data2 = this.data(\"field\")) == null ? void 0 : _this$data2.substring(2))); // Find the row\r\n      if (!$p[0]) $p = this.closest(\"[id^=el]\"); // Find the span\r\n      if (typeof v != \"undefined\") {\r\n        $p.toggle(v);\r\n        return this;\r\n      } else {\r\n        return $el.is(\":visible\");\r\n      }\r\n    },\r\n    // Get/Set field \"readonly\" attribute\r\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\r\n    readonly: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"readOnly\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"readOnly\");\r\n      }\r\n    },\r\n    // Get/Set field \"disabled\" attribute\r\n    // Note: A disabled control's value isn't submitted with the form\r\n    disabled: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"disabled\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"disabled\");\r\n      }\r\n    },\r\n    // Get/Set field value(s)\r\n    // Note: Return array if select-multiple\r\n    value: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        ew.selectOption(this[0], v);\r\n        return this;\r\n      } else {\r\n        return ew.getValue(this[0]);\r\n      }\r\n    },\r\n    // Get field value as number\r\n    toNumber: function () {\r\n      return ew.parseNumber(this.value());\r\n    },\r\n    // Get field value as Luxon object\r\n    toDate: function () {\r\n      var _ew$vars$tables, _ew$vars$tables$table, _ew$vars$tables$table2, _ew$vars$tables$table3;\r\n      let data = this.data(),\r\n        table = data.table,\r\n        field = data.field.replace(/^[xy]_/, \"\"),\r\n        format = (_ew$vars$tables = ew.vars.tables) == null ? void 0 : (_ew$vars$tables$table = _ew$vars$tables[table]) == null ? void 0 : (_ew$vars$tables$table2 = _ew$vars$tables$table.fields) == null ? void 0 : (_ew$vars$tables$table3 = _ew$vars$tables$table2[field]) == null ? void 0 : _ew$vars$tables$table3.clientFormatPattern;\r\n      return ew.parseDateTime(this.value(), format);\r\n    },\r\n    // Get field value as native Date object\r\n    toJsDate: function () {\r\n      return this.toDate().toJSDate();\r\n    }\r\n  });\n\n  // Improve Bootstrap Dropdown\r\n  bootstrap.Dropdown.prototype.toggle = function () {\r\n    if (!this._element.classList.contains(\"ew-dropdown-toggle\")) {\r\n      if (this._element.closest(\"[data-widget]\")) $__default.default(this._element).on(\"click.ew.dropdown\", e => {\r\n        bootstrap.Dropdown.clearMenus(e.originalEvent); // Clear menus first because this click event will not propagate to the document\r\n        e.stopPropagation(); // Stop propagate or the event will toggle row of expandable-table\r\n      });\r\n      // Move the menu to document body if menu inside responsive table\r\n      if (this._menu.closest(\".table-responsive\")) {\r\n        let container = this._menu.closest(\".popover-body, .modal-body, .offcanvas-body, body\");\r\n        container.appendChild(this._menu);\r\n        let menu = this._menu;\r\n        if (!this._element.id) this._element.id = \"dropdownbtn\" + ew.random();\r\n        menu.setAttribute('aria-labelledby', this._element.id);\r\n        function callback(mutationList) {\r\n          mutationList.forEach(mutation => {\r\n            switch (mutation.type) {\r\n              case \"attributes\":\r\n                if (mutation.target.classList.contains(\"show\")) menu.classList.add(\"d-block\");else menu.classList.remove(\"d-block\");\r\n                break;\r\n            }\r\n          });\r\n        }\r\n        let observer = new MutationObserver(callback);\r\n        observer.observe(this._parent, {\r\n          attributeFilter: [\"class\"],\r\n          attributeOldValue: false,\r\n          subtree: false\r\n        });\r\n      }\r\n      this._element.classList.add(\"ew-dropdown-toggle\");\r\n    }\r\n    return this._isShown() ? this.hide() : this.show();\r\n  };\n\n  var isNil = (value) => {\r\n      return value === null || value === undefined;\r\n  };\r\n\r\n  var isNil$1 = isNil;\n\n  var isFunction = (value) => {\r\n      return typeof value === 'function';\r\n  };\r\n\r\n  var isFunction$1 = isFunction;\n\n  var isNaNNumber = (value) => {\r\n      return typeof value === 'number' && isNaN(value);\r\n  };\r\n\r\n  var isNaNNumber$1 = isNaNNumber;\n\n  var isFiniteNumber = (value) => {\r\n      return typeof value == 'number' && isFinite(value);\r\n  };\r\n\r\n  var isFiniteNumber$1 = isFiniteNumber;\n\n  /**\r\n   * Optimized for performance\r\n   */\r\n  const multiplyByPowerOfTen = (number, powerOfTenExponent) => {\r\n      if (!isFiniteNumber$1(number))\r\n          return NaN;\r\n      const numAsString = '' + number;\r\n      const indexOfE = numAsString.indexOf('e');\r\n      if (indexOfE === -1) {\r\n          return +(numAsString + 'e' + powerOfTenExponent);\r\n      }\r\n      else {\r\n          return +(numAsString.slice(0, indexOfE) + 'e' + (+numAsString.slice(indexOfE + 1) + powerOfTenExponent));\r\n      }\r\n  };\r\n\r\n  var multiplyByPowerOfTen$1 = multiplyByPowerOfTen;\n\n  /**\r\n   * Only handles direct power of ten (only integer exponents)\r\n   */\r\n  const log10 = (numberThatIsPowerOfTen) => {\r\n      return Math.round(Math.log(numberThatIsPowerOfTen) * Math.LOG10E);\r\n  };\r\n\r\n  var log10$1 = log10;\n\n  const toObject = (arr, entriesResolver) => {\r\n      const object = {};\r\n      for (let i = 0; i < arr.length; ++i) {\r\n          if (i in arr) {\r\n              const [key, value] = entriesResolver(arr[i], i);\r\n              object[key] = value;\r\n          }\r\n      }\r\n      return object;\r\n  };\r\n\r\n  var toObject$1 = toObject;\n\n  // <i> Extracted from https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\r\n  const escapeRegexString = (string) => {\r\n      return string.replace(/[.*+?^${}()|[\\]\\\\]/g, match => `\\\\${match}`);\r\n  };\r\n\r\n  var escapeRegexString$1 = escapeRegexString;\n\n  /**\r\n   * This function doesn't work with non-primitive arguments\r\n   */\r\n  const memoize = (fn) => {\r\n      const cache = {};\r\n      return function (...args) {\r\n          const cacheKey = args.length > 1 ? args.join('-(:-:)-') : args[0];\r\n          if (cacheKey in cache) {\r\n              return cache[cacheKey];\r\n          }\r\n          const result = fn.apply(this, args);\r\n          cache[cacheKey] = result;\r\n          return result;\r\n      };\r\n  };\r\n\r\n  var memoize$1 = memoize;\n\n  const powerOf10LookupObject = (() => {\r\n      const object = {};\r\n      // 1 <= x <= Infinity (positive exponent)\r\n      let additionalZeros = '';\r\n      let currentValue;\r\n      while (currentValue !== Infinity) {\r\n          currentValue = +('1' + additionalZeros);\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      // 0 <= x < 1 (negative exponent)\r\n      additionalZeros = '';\r\n      currentValue = undefined;\r\n      while (currentValue !== 0) {\r\n          currentValue = +('0.' + additionalZeros + '1');\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      return object;\r\n  })();\r\n  const isPowerOfTen = (number) => {\r\n      return !!powerOf10LookupObject[number];\r\n  };\r\n\r\n  var isPowerOfTen$1 = isPowerOfTen;\n\n  const toBase = (value, valueUnit, unitScale) => {\r\n      if (!isFiniteNumber$1(value) || valueUnit === unitScale.base)\r\n          return value;\r\n      if (!(valueUnit in unitScale.scale))\r\n          return NaN;\r\n      const toBaseMultiplier = unitScale.scale[valueUnit] || 1;\r\n      return isPowerOfTen$1(toBaseMultiplier)\r\n          ? multiplyByPowerOfTen$1(value, log10$1(toBaseMultiplier))\r\n          : value * toBaseMultiplier;\r\n  };\r\n  const convertUnit = (value, originUnit, targetUnit, unitScale) => {\r\n      if (!isFiniteNumber$1(value) || originUnit === targetUnit)\r\n          return value;\r\n      const valueAsBase = toBase(value, originUnit, unitScale);\r\n      const resolvedScale = Object.assign(Object.assign({}, unitScale.scale), { [unitScale.base]: 1 });\r\n      if (isNaN(valueAsBase) || !(originUnit in resolvedScale) || !(targetUnit in resolvedScale))\r\n          return NaN;\r\n      const conversionFactorFromBase = unitScale.scale[targetUnit] || 1;\r\n      return isPowerOfTen$1(conversionFactorFromBase)\r\n          ? multiplyByPowerOfTen$1(valueAsBase, -log10$1(conversionFactorFromBase))\r\n          : valueAsBase / conversionFactorFromBase;\r\n  };\r\n  /**\r\n   * Looks through every possibility for the 'best' available unit.\r\n   * i.e. Where the value has the fewest numbers before the decimal point,\r\n   * but is still higher than 1.\r\n   */\r\n  const toBest = (value, originUnit, unitScale, options) => {\r\n      const resolvedOptions = Object.assign({ exclude: [], cutOffNumber: 1 }, options);\r\n      let best = null;\r\n      const scale = unitScale.scale;\r\n      Object.keys(scale).sort((a, b) => scale[a] - scale[b]).forEach((scaleUnit) => {\r\n          const isIncluded = resolvedOptions.exclude.indexOf(scaleUnit) === -1;\r\n          if (!isIncluded)\r\n              return;\r\n          const result = convertUnit(value, originUnit, scaleUnit, unitScale);\r\n          const absoluteResult = Math.abs(result);\r\n          if (!best || (absoluteResult >= resolvedOptions.cutOffNumber && absoluteResult < Math.abs(best[0]))) {\r\n              best = [result, scaleUnit];\r\n          }\r\n      });\r\n      return best || [value, originUnit];\r\n  };\r\n  const unitScale = (unitScaleDefinition) => {\r\n      return {\r\n          toBase: (value, unit) => {\r\n              return toBase(value, unit, unitScaleDefinition);\r\n          },\r\n          convert: (value, originUnit, targetUnit) => {\r\n              return convertUnit(value, originUnit, targetUnit, unitScaleDefinition);\r\n          },\r\n          toBest: (value, originUnit, options) => {\r\n              return toBest(value, originUnit, unitScaleDefinition, options);\r\n          },\r\n          scaleDefinition: unitScaleDefinition,\r\n      };\r\n  };\n\n  /**\r\n   * Short version of mozilla polyfill:\r\n   * <i> See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\r\n   */\r\n  const stringRepeat = (str, count) => {\r\n      // return (str.repeat && str.repeat(count)) || new Array(count + 1).join(str);\r\n      if (count < 1)\r\n          return '';\r\n      let result = '';\r\n      let pattern = str;\r\n      while (count > 1) {\r\n          if (count & 1)\r\n              result += pattern;\r\n          count >>>= 1, pattern += pattern;\r\n      }\r\n      return result + pattern;\r\n  };\r\n\r\n  var stringRepeat$1 = stringRepeat;\n\n  const baseCreateUnitScaleFromLocaleAbbreviations = (str) => {\r\n      if (!str) {\r\n          return unitScale({ base: '', scale: {} });\r\n      }\r\n      const scale = str.split('|');\r\n      const scaleDefinition = { ['']: 1 };\r\n      scale.forEach((scaleItem, scaleItemIndex) => {\r\n          if (!scaleItem)\r\n              return;\r\n          scaleDefinition[scaleItem] = +(1 + stringRepeat$1('0', scaleItemIndex));\r\n      });\r\n      return unitScale({ base: '', scale: scaleDefinition });\r\n  };\r\n  const createUnitScaleFromLocaleAbbreviations = memoize$1(baseCreateUnitScaleFromLocaleAbbreviations);\r\n\r\n  var createUnitScaleFromLocaleAbbreviations$1 = createUnitScaleFromLocaleAbbreviations;\n\n  const replaceNumeralSystemWithLatinNumbers = (numericStringWithExtraInfo, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericStringWithExtraInfo;\r\n      const numericStringLength = numericStringWithExtraInfo.length;\r\n      const numeralSystemToLatinSystemMap = toObject$1(numeralSystemMap, (digit, digitIndex) => [digit.replace(/\\u200e/g, ''), '' + digitIndex]);\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericStringWithExtraInfo[numericStringIndex];\r\n          output += numeralSystemToLatinSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n  const getScalingFactorFromAbbreviations = (stringOriginal, options) => {\r\n      var _a;\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1((_a = options.locale) === null || _a === void 0 ? void 0 : _a.abbreviations);\r\n      const abbreviationsSortedByLengthDesc = Object.keys(scale.scaleDefinition.scale).sort((a, b) => b.length - a.length);\r\n      let abbreviationScalingFactor = 1;\r\n      for (const abbreviation of abbreviationsSortedByLengthDesc) {\r\n          const scapedAbbreviationForRegex = escapeRegexString$1(abbreviation);\r\n          const regexp = new RegExp('[^a-zA-Z]'\r\n              + `(${scapedAbbreviationForRegex})|(${scapedAbbreviationForRegex.replace(/\\u200e/g, '')})`\r\n              + '(?:\\\\)(?:\\\\))?)?$');\r\n          if (stringOriginal.match(regexp)) {\r\n              abbreviationScalingFactor = scale.toBase(abbreviationScalingFactor, abbreviation);\r\n              break;\r\n          }\r\n      }\r\n      return abbreviationScalingFactor;\r\n  };\r\n  // unformats numbers separators, decimals places, signs, abbreviations\r\n  const formattedStringToNumber = (inputString, options) => {\r\n      var _a;\r\n      const locale = options.locale;\r\n      const stringOriginal = inputString;\r\n      let value;\r\n      // Replace special digits with latin digits\r\n      const stringWithLatinDigits = replaceNumeralSystemWithLatinNumbers(inputString, (_a = options.locale) === null || _a === void 0 ? void 0 : _a.numeralSystem);\r\n      if (options.zeroFormat && stringWithLatinDigits === options.zeroFormat) {\r\n          value = 0;\r\n      }\r\n      else if (options.nullFormat && stringWithLatinDigits === options.nullFormat || !stringWithLatinDigits.replace(/[^0-9]+/g, '').length) {\r\n          value = null;\r\n      }\r\n      else {\r\n          // Replaces the locale decimal delimiter with a dot (.)\r\n          const decimalDelimiterFromLocale = locale.delimiters.decimal;\r\n          const stringWithDotDecimalDelimiter = decimalDelimiterFromLocale === '.'\r\n              ? stringWithLatinDigits\r\n              : stringWithLatinDigits.replace(/\\./g, '').replace(decimalDelimiterFromLocale, '.');\r\n          // Determines the scaling factor from the abbreviations (if has abbreviations)\r\n          const abbreviationScalingFactor = getScalingFactorFromAbbreviations(stringOriginal, options);\r\n          // Check for negative number\r\n          const negativeFactor = (stringWithDotDecimalDelimiter.split('-').length\r\n              + Math.min(stringWithDotDecimalDelimiter.split('(').length - 1, stringWithDotDecimalDelimiter.split(')').length - 1)) % 2 ? 1 : -1;\r\n          // Remove non numbers\r\n          const numberAsString = stringWithDotDecimalDelimiter.replace(/[^0-9.]+/g, '');\r\n          value = negativeFactor * multiplyByPowerOfTen$1(+numberAsString, log10$1(abbreviationScalingFactor));\r\n      }\r\n      return value;\r\n  };\r\n\r\n  var formattedStringToNumber$1 = formattedStringToNumber;\n\n  const locale = {\r\n      code: 'en',\r\n      delimiters: {\r\n          thousands: ',',\r\n          decimal: '.',\r\n      },\r\n      abbreviations: '|||K|||M|||B|||T',\r\n      ordinal: number => {\r\n          const b = number % 10;\r\n          return (Math.floor(number % 100 / 10) === 1)\r\n              ? 'th'\r\n              : b === 1\r\n                  ? 'st'\r\n                  : b === 2\r\n                      ? 'nd'\r\n                      : b === 3\r\n                          ? 'rd'\r\n                          : 'th';\r\n      },\r\n  };\r\n\r\n  var locale$1 = locale;\n\n  function merge(...args) {\r\n      const newObject = {};\r\n      const argsLength = args.length;\r\n      for (let i = 0; i < argsLength; i++) {\r\n          for (const key in args[i])\r\n              newObject[key] = args[i][key];\r\n      }\r\n      return newObject;\r\n  }\n\n  var isObject = (value) => {\r\n      return typeof value === 'object' && value !== null;\r\n  };\r\n\r\n  var isObject$1 = isObject;\n\n  var isString = (value) => {\r\n      return typeof value === 'string';\r\n  };\r\n\r\n  var isString$1 = isString;\n\n  const truncateNumber = (value) => {\r\n      return value < 0 ? Math.ceil(value) : Math.floor(value);\r\n  };\r\n\r\n  var truncateNumber$1 = truncateNumber;\n\n  const getPatternParts = (patternMask) => {\r\n      let isInEscapedPart = false;\r\n      let currentEscapedWord = '';\r\n      const parts = [];\r\n      for (let i = 0; i < patternMask.length; i++) {\r\n          const char = patternMask.charAt(i);\r\n          if (char === \"'\" && !isInEscapedPart) {\r\n              isInEscapedPart = true;\r\n              currentEscapedWord = '';\r\n          }\r\n          else if (char === \"'\" && isInEscapedPart && patternMask.charAt(i - 1) !== \"\\\\\") {\r\n              isInEscapedPart = false;\r\n              parts.push({ escaped: true, value: currentEscapedWord });\r\n          }\r\n          else if (isInEscapedPart) {\r\n              currentEscapedWord += char;\r\n          }\r\n          else {\r\n              if (parts.length && !parts[parts.length - 1].escaped) {\r\n                  parts[parts.length - 1].value += char;\r\n              }\r\n              else {\r\n                  parts.push({ escaped: false, value: char });\r\n              }\r\n          }\r\n      }\r\n      return parts;\r\n  };\r\n  /**\r\n   * Checks only the pattern parts that are not escaped\r\n   */\r\n  const patternIncludes = (patternMask, search) => {\r\n      return patternRemoveEscapedText(patternMask).indexOf(search) !== -1;\r\n  };\r\n  /**\r\n   * Replaces only the pattern parts that are not escaped\r\n   */\r\n  const patternReplace = (patternMask, searchValue, replaceValue) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? `'${e.value}'` : e.value.replace(searchValue, _ => replaceValue))\r\n          .join('');\r\n  };\r\n  const patternRemoveEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .filter(e => !e.escaped)\r\n          .map(e => e.value)\r\n          .join('');\r\n  };\r\n  const patternStripAndNormalizeEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? e.value.replace(/\\\\'/g, \"'\") : e.value)\r\n          .join('');\r\n  };\n\n  const stringIncludes = (str, search) => {\r\n      return str.indexOf(search) !== -1;\r\n  };\r\n\r\n  var stringIncludes$1 = stringIncludes;\n\n  /**\r\n   * What does it look for in the pattern?\r\n   *     '(' | '+' | '-'\r\n   * What does it remove from the pattern?\r\n   *     '(' | ')' | '+' | '-'\r\n   * What options does it provide?\r\n   *     - negativeParentheses (if negative value should be wrapped between parentheses)\r\n   *     - forceSign (is positive values should have a + sign)\r\n   * How will it transform the output?\r\n   *     - Parentheses:\r\n   *         '-23.58' & '(0.00)'  =>  '(23.58)'\r\n   *         '-23.58' & '( 0.00 )'  =>  '( 23.58 )'\r\n   *         '-23.58' & '(  0.00 ) '  =>  ' (  23.58 )'\r\n   *     - Sign:\r\n   *         '12.34' & '+0.0'  =>  '+12.34'\r\n   *         '-12.34' & '+0.0'  =>  '-12.34'\r\n   *\r\n   * <i> If '+' is somewhere in the pattern, it will set the '+' sign for positive numbers\r\n   *     and same for negative numbers.\r\n   * <i> If '-' is somewhere in the pattern, it will place the negative sign in the defined position.\r\n   *     But it won't still set the sign for positive numbers.\r\n   * <i> Checks if we should use parentheses for negative number or if we should prefix with a sign.\r\n   *     If both are present we default to parentheses.\r\n   */\r\n  const signRule = (pattern) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      const negativeParentheses = stringIncludes$1(patternWithoutEscapedText, '(') && stringIncludes$1(patternWithoutEscapedText, ')');\r\n      const forceSign = !negativeParentheses && stringIncludes$1(patternWithoutEscapedText, '+');\r\n      let outputPatternMask = pattern;\r\n      outputPatternMask = patternReplace(outputPatternMask, '(', `'nps'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, ')', `'npe'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, /(-|\\+)/, `'s'`);\r\n      return [outputPatternMask, { negativeParentheses, forceSign }];\r\n  };\r\n\r\n  var signRule$1 = signRule;\n\n  /**\r\n   * Checks if abbreviation is wanted\r\n   * <i> Applied only when 'a' is present.\r\n   * <i> If 'a' is followed by 'k' | 'm' | 'b' | 't', then, it will force the abbreviation to be the specified\r\n   *     unit. (e.g. (123456.78, '0,0.00am')  =>  '0.12M')\r\n   */\r\n  const abbreviationRule = (patternMask) => {\r\n      let compactUnit = null; // force abbreviation\r\n      let compact = false;\r\n      // If it includes 'a' means it should be abbreviated (only if at least includes 'a')\r\n      if (patternIncludes(patternMask, 'a')) {\r\n          compact = true;\r\n          const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n          const abbreviationRegExpResult = patternWithoutEscapedText.match(/a(k|m|b|t)?/);\r\n          compactUnit = !!abbreviationRegExpResult ? abbreviationRegExpResult[1] : null;\r\n      }\r\n      let outputPatternMask = patternMask;\r\n      outputPatternMask = patternReplace(outputPatternMask, /a(k|m|b|t)?/, `'a'`);\r\n      return [outputPatternMask, { compact, compactUnit, compactAuto: compact && !compactUnit }];\r\n  };\r\n\r\n  var abbreviationRule$1 = abbreviationRule;\n\n  /**\r\n   * Faster version of String.prototype.split that only handles splitting in two parts\r\n   */\r\n  const splitStringInTwoParts = (str, separator) => {\r\n      if (!str)\r\n          return ['', ''];\r\n      const indexOfSearchChar = str.indexOf(separator);\r\n      if (indexOfSearchChar === -1) {\r\n          return [str, ''];\r\n      }\r\n      else {\r\n          return [str.slice(0, indexOfSearchChar), str.slice(indexOfSearchChar + 1)];\r\n      }\r\n  };\r\n\r\n  var splitStringInTwoParts$1 = splitStringInTwoParts;\n\n  const countChars = (string, char) => {\r\n      return !string ? 0 : string.split('').filter(stringChar => stringChar === char).length;\r\n  };\r\n  /**\r\n   * Fraction digits (decimals) count rule (minimum and maximum fraction digits)\r\n   * <i> Optional fraction digits would go always after the forced ones\r\n   */\r\n  const decimalPlacesRule = (patternMask) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternPrecisionPart = splitStringInTwoParts$1(patternWithoutEscapedText, '.')[1];\r\n      let minimumFractionDigits = 0;\r\n      let maximumFractionDigits = 0;\r\n      if (!!patternPrecisionPart) {\r\n          const trimmedPatternPrecisionPart = patternPrecisionPart.trim();\r\n          if (stringIncludes$1(trimmedPatternPrecisionPart, '[')) {\r\n              // If it contains optional fraction digits\r\n              const patternPrecisionPartWithoutClosingBracket = trimmedPatternPrecisionPart.replace(']', '');\r\n              // Isolates forced (left) vs optional (right) decimals\r\n              const precisionSplitted = splitStringInTwoParts$1(patternPrecisionPartWithoutClosingBracket, '[');\r\n              minimumFractionDigits = countChars(precisionSplitted[0], '0');\r\n              maximumFractionDigits = minimumFractionDigits + countChars(precisionSplitted[1], '0');\r\n          }\r\n          else if (stringIncludes$1(trimmedPatternPrecisionPart, '#')) {\r\n              // If it contains optional fraction digits marked with '#'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('#')[0], '0');\r\n              maximumFractionDigits = trimmedPatternPrecisionPart.length;\r\n          }\r\n          else if (stringIncludes$1(trimmedPatternPrecisionPart, 'X')) {\r\n              // If it contains no-maximum fraction digits marked with 'X'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('X')[0], '0');\r\n              maximumFractionDigits = 500;\r\n          }\r\n          else {\r\n              const fractionDigits = countChars(trimmedPatternPrecisionPart.split(' ')[0], '0');\r\n              minimumFractionDigits = fractionDigits;\r\n              maximumFractionDigits = fractionDigits;\r\n          }\r\n      }\r\n      return { minimumFractionDigits, maximumFractionDigits };\r\n  };\r\n\r\n  var decimalPlacesRule$1 = decimalPlacesRule;\n\n  /**\r\n   * Check for optional decimals.\r\n   *\r\n   * <i> 'optionalDecimals' This would mean that:\r\n   *     - In case the number (value) HAS decimals (e.g. 55.34), then it would display the fixed amount of defined\r\n   *       decimals (e.g. '0[.]000' => 3 fixed decimals), but, if the number is an straight integer, then it won't\r\n   *       display any decimals.\r\n   * <i> It could also accept optional decimals afterwards. So for the case '0[.]00##':\r\n   *     - If it is an integer, displays only an integer:  23 => '23'\r\n   *     - If it has 1 decimal, displays 2 decimals:       23.4 => '23.40'\r\n   *     - If it has 3 decimals, displays 3 decimals:      23.456 => '23.456'\r\n   */\r\n  const optionalDecimalPlacesRule = (patternMask) => {\r\n      let optionalFractionDigits = false;\r\n      let outputPatternMask = patternMask;\r\n      if (patternIncludes(patternMask, '[.]')) {\r\n          optionalFractionDigits = true;\r\n          outputPatternMask = patternReplace(outputPatternMask, '[.]', '.');\r\n      }\r\n      return [outputPatternMask, { optionalFractionDigits }];\r\n  };\r\n\r\n  var optionalDecimalPlacesRule$1 = optionalDecimalPlacesRule;\n\n  /**\r\n   * <i> The regExp tests for:\r\n   *     - 0.00##X\r\n   *     - 0,0.00##X\r\n   *     - #.00##X (without leading zeros)\r\n   *     - #,#.00##X (without leading zeros)\r\n   */\r\n  const numberPositionRule = (patternMask) => {\r\n      const numberPartRegExp = /((((0|#)+,)?(0|#)+(\\.([0#X]|\\[0+\\])+)?){1})/;\r\n      return patternReplace(patternMask, numberPartRegExp, `'n'`);\r\n  };\r\n  /**\r\n   * Minimum leading integer digits rule\r\n   * This will define the minimum amount of digits on the integer part (left-most grouped zeroes).\r\n   *     - (12.34, '0000.0') =>  '0012.3'\r\n   *     - (12.34, '0000,0.0')  =>  '0,012.3'\r\n   *     - (0.34, '#.0') => '.3'\r\n   *     - (1.34, '#.0') => '1.3'\r\n   *\r\n   * <i> It always pick the left-most amount of zeros, so:\r\n   *     - If pattern has NO thousands separator ('000.0'), then the amount at the left of the DOT is used.\r\n   *     - If pattern HAS thousands separator ('00,0.0'), then the amount at the left of the COMMA is used.\r\n   * <i> This will remove the integer zero for numbers between 1 and -1 (e.g. 0.23 or -0.5)\r\n   *     - If pattern integer part is option (0.24, '#.00') => '.24'\r\n   */\r\n  const minimumIntegerDigitsRule = (patternMask) => {\r\n      const patternMaskWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternMaskIntegerPart = patternMaskWithoutEscapedText.split('.')[0].split(',')[0];\r\n      // If it has '#' in the integer part, sets the minimumIntegerDigits to 0\r\n      if (/#/g.test(patternMaskIntegerPart)) {\r\n          return 0;\r\n      }\r\n      return (patternMaskIntegerPart.match(/0/g) || []).length;\r\n  };\r\n  // If sign is not included, put sign at the left of the number\r\n  const addSignPositionIfItDoesNotExists = (patternMask) => {\r\n      if (stringIncludes$1(patternMask, `'s'`) || stringIncludes$1(patternMask, `'nps'`))\r\n          return patternMask;\r\n      return patternMask.replace(`'n'`, _ => `'s''n'`);\r\n  };\r\n  const baseParsePattern = (inputPattern) => {\r\n      const resolvedInputPattern = isString$1(inputPattern) && inputPattern || '0,0.##########';\r\n      const [patternMaskAfterSignRule, signRules] = signRule$1(resolvedInputPattern);\r\n      const [patternMaskAfterAbbreviationRule, abbreviationRules] = abbreviationRule$1(patternMaskAfterSignRule);\r\n      const [patternMaskAfterOptionalDecimalPlacesRule, optionalDecimalPlacesRules] = optionalDecimalPlacesRule$1(patternMaskAfterAbbreviationRule);\r\n      const outputPatternMask = patternMaskAfterOptionalDecimalPlacesRule;\r\n      const outputPatternMaskWithoutEscapedText = patternRemoveEscapedText(outputPatternMask);\r\n      const decimalPlacesRules = decimalPlacesRule$1(outputPatternMask);\r\n      const minimumIntegerDigits = minimumIntegerDigitsRule(outputPatternMask);\r\n      const grouping = outputPatternMaskWithoutEscapedText.indexOf(',') > -1;\r\n      const patternMaskAfterHandlingNumberPosition = numberPositionRule(outputPatternMask);\r\n      const patternMaskWithEnsuredSignPosition = addSignPositionIfItDoesNotExists(patternMaskAfterHandlingNumberPosition);\r\n      const patternMask = patternMaskWithEnsuredSignPosition;\r\n      return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, signRules), abbreviationRules), optionalDecimalPlacesRules), decimalPlacesRules), { grouping,\r\n          minimumIntegerDigits,\r\n          patternMask });\r\n  };\r\n  const parsePattern = memoize$1(baseParsePattern);\r\n\r\n  var parsePattern$1 = parsePattern;\n\n  /**\r\n   * <i> Checks if value is negative, and removes the sign in case it exists\r\n   * Expects: a value as string, with or without the minus sign, AND NOTHING ELSE.\r\n   * Returns: same as the input but without the minus sign in case it had.\r\n   */\r\n  const removeSignIfExists = (valueAsString) => {\r\n      return valueAsString[0] === '-' ? valueAsString.slice(1) : valueAsString;\r\n  };\r\n\r\n  var removeSignIfExists$1 = removeSignIfExists;\n\n  /**\r\n   * This process only is applied for automatic abbreviation ('a'), and only in the rounding\r\n   * bubbling cases where the scale has to be recomputed.\r\n   * E.g.\r\n   *     formatNumber(999960, 0.0a') // Would return '1000.0k' instead of '1.0m' without this rescaling-fix\r\n   *\r\n   * It only applies rescaling if the absolute value of 'the already scaled and rounded value' (1.87, 'k') is greater or\r\n   * equal to 1000, and the abbreviation is not greater or equal to trillion.\r\n   *\r\n   * <i> After initial scaling, value shouldn't be greater than 1000, unless it is a trillion.\r\n   * <i> The resulting decimal part, will be always 0, as this will be executed only on the corner cases,\r\n   *     that results from rounding bubbling. This is why decimal part is ignored.\r\n   */\r\n  const rescaleRoundedValue = (value, currentAbbreviationScale, patternRules, options) => {\r\n      const { compact, compactAuto } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact || !compactAuto) {\r\n          return [value, currentAbbreviationScale];\r\n      }\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1(abbreviations);\r\n      const [newScaledValue, newScaledValueUnit] = scale.toBest(value, currentAbbreviationScale || '');\r\n      return [newScaledValue, newScaledValueUnit];\r\n  };\r\n\r\n  var rescaleRoundedValue$1 = rescaleRoundedValue;\n\n  /**\r\n   * If abbreviation is forced, looks for the closest (in terms of power of ten) abbreviation in the current locale\r\n   *     k === 10 ** 3\r\n   *     m === 10 ** 6\r\n   *     b === 10 ** 9\r\n   *     t === 10 ** 12\r\n   */\r\n  const resolveForcedAbbreviationUnit = (forcedAbbreviationUnit, abbreviationsFromLocale, value) => {\r\n      // Record<AbbreviationSymbol, PowerOfTenExponent>\r\n      const forcedScaleMap = { k: 3, m: 6, b: 9, t: 12 };\r\n      const targetPowerOfTenExponent = forcedScaleMap[forcedAbbreviationUnit];\r\n      const scaleDefinitionFromLocale = (abbreviationsFromLocale === null || abbreviationsFromLocale === void 0 ? void 0 : abbreviationsFromLocale.split('|')) || [];\r\n      let closestPowerOfTenWithAvailableAbbreviation = null;\r\n      for (let distanceFromTarget = 0; distanceFromTarget < scaleDefinitionFromLocale.length; distanceFromTarget++) {\r\n          if (!scaleDefinitionFromLocale[targetPowerOfTenExponent - distanceFromTarget])\r\n              continue;\r\n          closestPowerOfTenWithAvailableAbbreviation = targetPowerOfTenExponent - distanceFromTarget;\r\n          break;\r\n      }\r\n      if (closestPowerOfTenWithAvailableAbbreviation === null) {\r\n          return [value, null];\r\n      }\r\n      return [\r\n          multiplyByPowerOfTen$1(value, -closestPowerOfTenWithAvailableAbbreviation),\r\n          scaleDefinitionFromLocale[closestPowerOfTenWithAvailableAbbreviation],\r\n      ];\r\n  };\r\n  const scaleValueWithAbbreviation = (value, patternRules, options) => {\r\n      const { compact, compactUnit } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact)\r\n          return [value, null];\r\n      if (!!compactUnit) {\r\n          return resolveForcedAbbreviationUnit(compactUnit, abbreviations, value);\r\n      }\r\n      /**\r\n       * If abbreviation is automatic, resolves the abbreviation to the best (where the value has\r\n       * the fewest numbers before the decimal point, but is still higher than 1).\r\n       */\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1(abbreviations);\r\n      const [scaledValue, localizedUnit] = scale.toBest(value, '');\r\n      return [scaledValue, localizedUnit || null];\r\n  };\r\n\r\n  var scaleValueWithAbbreviation$1 = scaleValueWithAbbreviation;\n\n  const roundNumber = (number, precision, roundingFunction) => {\r\n      const resolvedPrecision = precision || 0;\r\n      const resolvedRoundingFunction = roundingFunction || Math.round;\r\n      const scaledValueForRounding = multiplyByPowerOfTen$1(number, resolvedPrecision);\r\n      const roundedScaledValue = resolvedRoundingFunction(scaledValueForRounding);\r\n      const roundedValue = multiplyByPowerOfTen$1(roundedScaledValue, -resolvedPrecision);\r\n      return roundedValue;\r\n  };\r\n\r\n  var roundNumber$1 = roundNumber;\n\n  /**\r\n   * The result from toFixed can contain an exponent for big numbers (e.g. 1.12345671234567e+50).\r\n   * <!> Only handles positive exponents.\r\n   */\r\n  const formatPositiveExponentResult = (valueAsString) => {\r\n      const [significand, exponent] = splitStringInTwoParts$1(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      if (exponentAsNumber < 0)\r\n          return valueAsString;\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts$1(significand, '.');\r\n      const numberOfZerosToAdd = exponentAsNumber - fractionalPartOfSignificand.length;\r\n      return `${integerPartOfSignificand}${fractionalPartOfSignificand}${stringRepeat$1('0', numberOfZerosToAdd)}`;\r\n  };\r\n  /**\r\n   * The result from toFixed can contain an exponent for small numbers (e.g. 1.123e-87).\r\n   * <i> Only handles negative exponents\r\n   */\r\n  const formatNegativeExponentResult = (value, exponentAsNumber, significandAsString) => {\r\n      const negativeExponentAbsoluteValue = Math.abs(exponentAsNumber);\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts$1(significandAsString, '.');\r\n      const absoluteIntegerPartOfSignificand = integerPartOfSignificand[0] === '-' ? integerPartOfSignificand.slice(1) : integerPartOfSignificand;\r\n      let outputIntegerPartOfSignificand = absoluteIntegerPartOfSignificand;\r\n      let outputFractionalPartOfSignificand = fractionalPartOfSignificand;\r\n      for (let i = 0; i < negativeExponentAbsoluteValue; i += 1) {\r\n          // Consider using array.shift\r\n          const firstCharInIntegerPart = outputIntegerPartOfSignificand[0] || '';\r\n          outputIntegerPartOfSignificand = outputIntegerPartOfSignificand.slice(0, outputIntegerPartOfSignificand.length - 1);\r\n          outputFractionalPartOfSignificand = (firstCharInIntegerPart || '0') + outputFractionalPartOfSignificand;\r\n      }\r\n      return `${value < 0 ? '-' : ''}${outputIntegerPartOfSignificand || 0}.${outputFractionalPartOfSignificand}`;\r\n  };\r\n  /**\r\n   * Like Number.prototype.toString() but excluding the exponential info for small and big numbers.\r\n   * e.g.\r\n   *     Small numbers:\r\n   *         value: 0.0000000000001234 (1.234e-13)\r\n   *         toString() => \"1.234e-13\"\r\n   *         numberToStringWithoutExponent() => \"0.0000000000001234\"\r\n   *     Big numbers:\r\n   *         value: 1234123412341230000000 (1.234123412341234e+21)\r\n   *         toString() => \"1.234123412341234e+21\"\r\n   *         numberToStringWithoutExponent() => \"1234123412341230000000\"\r\n   */\r\n  const numberToNonExponentialString = (value) => {\r\n      const valueAsString = (value || 0).toString();\r\n      const valueAsStringHasExponentialInfo = valueAsString.indexOf('e') >= 0;\r\n      if (!valueAsStringHasExponentialInfo)\r\n          return valueAsString;\r\n      // If the toString returns an exponential number (e.g. 1.23e+28)\r\n      const [significand, exponent] = splitStringInTwoParts$1(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      return exponentAsNumber >= 0\r\n          ? formatPositiveExponentResult(valueAsString)\r\n          : formatNegativeExponentResult(value, exponentAsNumber, significand);\r\n  };\r\n\r\n  var numberToNonExponentialString$1 = numberToNonExponentialString;\n\n  const addTrailingZerosInFractionalPart = (valueAsString, minimumFractionDigits) => {\r\n      const [integerPart, fractionalPart] = splitStringInTwoParts$1(valueAsString, '.');\r\n      return `${integerPart}.${fractionalPart + stringRepeat$1('0', minimumFractionDigits - fractionalPart.length)}`;\r\n  };\r\n  /**\r\n   * Implementation of Number.prototype.toFixed() that treats floats more like decimals\r\n   *\r\n   * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\r\n   * problems for accounting- and finance-related software.\r\n   *\r\n   * <!> This function should only receive a finite number, never NaN, Infinity or -Infinity\r\n   * <i> This function should return always a JS string representation of a number, but without exponent.\r\n   * <i> optionalFractionDigits means: from the fractionDigits amount, the ones that are optional.\r\n   */\r\n  const numberToFixed = (finiteNumber, fractionDigits, roundingFunction, optionalFractionDigits) => {\r\n      const valueAsString = numberToNonExponentialString$1(finiteNumber);\r\n      const minimumFractionDigits = fractionDigits - (optionalFractionDigits || 0);\r\n      const fractionalPartOfValueAsString = splitStringInTwoParts$1(valueAsString, '.')[1];\r\n      const targetFractionDigitsAmount = !!fractionalPartOfValueAsString\r\n          ? Math.min(Math.max(fractionalPartOfValueAsString.length, minimumFractionDigits), fractionDigits)\r\n          : minimumFractionDigits;\r\n      const roundedValue = roundNumber$1(finiteNumber, targetFractionDigitsAmount, roundingFunction);\r\n      let output = numberToNonExponentialString$1(roundedValue);\r\n      // Add trailing zeros if needed\r\n      if (!!minimumFractionDigits) {\r\n          output = addTrailingZerosInFractionalPart(output, minimumFractionDigits);\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var numberToFixed$1 = numberToFixed;\n\n  const roundValueAndAddTrailingZeros = (value, patternRules, options) => {\r\n      const { rounding } = options;\r\n      const { minimumFractionDigits, maximumFractionDigits } = patternRules;\r\n      const resolvedRoundingFunction = rounding || Math.round;\r\n      const shouldIncludeDecimalPlaces = minimumFractionDigits > 0 || maximumFractionDigits > 0;\r\n      if (shouldIncludeDecimalPlaces) {\r\n          const optionalDecimalDigitsCount = maximumFractionDigits - minimumFractionDigits;\r\n          return numberToFixed$1(value, maximumFractionDigits, resolvedRoundingFunction, optionalDecimalDigitsCount);\r\n      }\r\n      else {\r\n          return numberToFixed$1(value, 0, resolvedRoundingFunction);\r\n      }\r\n  };\r\n\r\n  var roundValueAndAddTrailingZeros$1 = roundValueAndAddTrailingZeros;\n\n  const replaceDigitsWithNumeralSystem = (numericString, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericString;\r\n      const numericStringLength = numericString.length;\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericString[numericStringIndex];\r\n          output += numeralSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var replaceDigitsWithNumeralSystem$1 = replaceDigitsWithNumeralSystem;\n\n  /**\r\n   * <i> Add or remove leading zeros\r\n   * Expects: a value integer part as string, without the minus sign. And nothing else but a number at the start.\r\n   * Returns:\r\n   *     - The value with the added or removed leading zeros\r\n   */\r\n  const addOrRemoveLeadingZerosToValue = (valueIntegerPartWithoutSign, patternRules) => {\r\n      const { minimumIntegerDigits } = patternRules;\r\n      if (minimumIntegerDigits === 0 && +valueIntegerPartWithoutSign < 1 && +valueIntegerPartWithoutSign > -1) {\r\n          return '';\r\n      }\r\n      return valueIntegerPartWithoutSign.length >= minimumIntegerDigits\r\n          ? valueIntegerPartWithoutSign\r\n          : `${stringRepeat$1('0', minimumIntegerDigits - valueIntegerPartWithoutSign.length)}${valueIntegerPartWithoutSign}`;\r\n  };\r\n\r\n  var addOrRemoveLeadingZerosToValue$1 = addOrRemoveLeadingZerosToValue;\n\n  const addSignInfoToFullFormattedNumber = (fullFormattedValueWithoutSign, isValueNegative, isValueZero, patternRules) => {\r\n      const { negativeParentheses, forceSign } = patternRules;\r\n      let output = fullFormattedValueWithoutSign;\r\n      if (negativeParentheses && isValueNegative) {\r\n          output = output.replace(/'(nps|npe)'/g, match => match === `'nps'` ? '(' : ')');\r\n      }\r\n      else if (forceSign) {\r\n          output = output.replace(`'s'`, isValueNegative ? '-' : isValueZero ? '' : '+');\r\n      }\r\n      else if (isValueNegative) {\r\n          output = output.replace(`'s'`, '-');\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var addSignInfoToFullFormattedNumber$1 = addSignInfoToFullFormattedNumber;\n\n  /**\r\n   * Splits the given number (as string) in the integer and decimal parts.\r\n   * Returns:\r\n   *     [integerPart: string, decimalPart: string]\r\n   * <i> The integer part can potentially contain the number sign (-) if it wasn't removed previously.\r\n   * <i> It should always return [string, string]\r\n   */\r\n  const splitNumberIntegerAndDecimalParts = (valueAsString, patternRules) => {\r\n      const { optionalFractionDigits } = patternRules;\r\n      const [integerPart, decimalPart] = splitStringInTwoParts$1(valueAsString, '.');\r\n      // Checks whether optionalDecimalPlaces [.] is enabled and the value is an integer (no decimals)\r\n      if (optionalFractionDigits && Number(decimalPart) === 0) {\r\n          return [integerPart, ''];\r\n      }\r\n      return [integerPart, decimalPart];\r\n  };\r\n\r\n  var splitNumberIntegerAndDecimalParts$1 = splitNumberIntegerAndDecimalParts;\n\n  const addThousandsSeparatorToValueIntegerPart = (valueIntegerPartWithLeadingZerosAndWithoutSign, patternRules, options) => {\r\n      const { delimiters, digitGroupingStyle } = options.locale;\r\n      const { grouping } = patternRules;\r\n      if (!grouping || !delimiters.thousands) {\r\n          return valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      }\r\n      const valueAsString = valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      const thousandsSeparator = delimiters.thousands;\r\n      const digitGrouping = !!(digitGroupingStyle === null || digitGroupingStyle === void 0 ? void 0 : digitGroupingStyle.length) ? digitGroupingStyle : [3];\r\n      const restDigitGrouping = [...digitGrouping];\r\n      let output = '';\r\n      let groupingSubIteration = 1;\r\n      for (let i = valueAsString.length - 1; i >= 0; i--) {\r\n          if (groupingSubIteration === restDigitGrouping[0] && i !== 0) {\r\n              output = thousandsSeparator + valueAsString[i] + output;\r\n              if (restDigitGrouping.length > 1)\r\n                  restDigitGrouping.shift();\r\n              groupingSubIteration = 1;\r\n          }\r\n          else {\r\n              output = valueAsString[i] + output;\r\n              groupingSubIteration += 1;\r\n          }\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var addThousandsSeparatorToValueIntegerPart$1 = addThousandsSeparatorToValueIntegerPart;\n\n  /**\r\n   * Applies the localized abbreviation unit to the pattern mask\r\n   * <i> If the localized unit is empty (''), it will remove the space between the number and the abbreviation.\r\n   * <i> Replaces the single quotes from the abbreviation, to prevent collision with patternMask escaped text.\r\n   */\r\n  const applyAbbreviationLocalizedUnitToPatternMask = (patternMask, abbreviationLocalizedUnit, hasAbbreviationInPatternMask) => {\r\n      if (!hasAbbreviationInPatternMask)\r\n          return patternMask;\r\n      if (abbreviationLocalizedUnit) {\r\n          /**\r\n           * If it has abbreviation in the rules, and has a valid unit (e.g. K | M | B | T, or\r\n           * other localized one), escapes the single quotes in the localized abbreviation unit and appends to the mask.\r\n           */\r\n          return patternMask.replace(`'a'`, _ => `'${abbreviationLocalizedUnit.replace(/'/g, _ => \"\\\\'\")}'`);\r\n      }\r\n      else {\r\n          // If it has abbreviation in the rules, but it has no unit, removes the space between abbreviation and number\r\n          return patternMask.match(/'n'\\s*'a'/)\r\n              // If abbreviation is before\r\n              ? patternMask.replace(/\\s*'a'/, '')\r\n              // If abbreviation is after\r\n              : patternMask.replace(/'a'\\s*/, '');\r\n      }\r\n  };\r\n\r\n  var applyAbbreviationLocalizedUnitToPatternMask$1 = applyAbbreviationLocalizedUnitToPatternMask;\n\n  const scaleAndRoundValue = (number, patternRules, options) => {\r\n      // If it doesn't have abbreviation, just round the value and add trailing zeros\r\n      if (!patternRules.compact) {\r\n          const roundedValueAsString = roundValueAndAddTrailingZeros$1(number, patternRules, options);\r\n          return [roundedValueAsString, null];\r\n      }\r\n      // If it has abbreviation, scales the value\r\n      const [scaledValue, scaledValueLocalizedUnit] = scaleValueWithAbbreviation$1(number, patternRules, options);\r\n      const roundedScaledValue = +roundValueAndAddTrailingZeros$1(scaledValue, patternRules, options);\r\n      const [rescaledValue, rescaledValueLocalizedUnit] = rescaleRoundedValue$1(+roundedScaledValue, scaledValueLocalizedUnit, patternRules, options);\r\n      const roundedRescaledValueAsStringWithTrailingZeros = roundValueAndAddTrailingZeros$1(rescaledValue, patternRules, options);\r\n      return [roundedRescaledValueAsStringWithTrailingZeros, rescaledValueLocalizedUnit];\r\n  };\r\n  const numberToFormattedNumber = (number, pattern, options) => {\r\n      var _a;\r\n      const patternRules = parsePattern$1(pattern);\r\n      // Ensure always uses a number or default number\r\n      const resolvedValue = isFiniteNumber$1(number) ? number : 0;\r\n      const [valueAsString, localizedAbbreviationUnit] = scaleAndRoundValue(resolvedValue, patternRules, options);\r\n      // Prevents potentially wrong formatting coming from this function\r\n      if (valueAsString === 'NaN')\r\n          return '';\r\n      const isValueNegative = options.signedZero ? number < 0 : +valueAsString < 0;\r\n      const isValueZero = options.signedZero ? number === 0 : +valueAsString === 0;\r\n      const valueAsStringWithoutSign = removeSignIfExists$1(valueAsString);\r\n      const [integerPart, decimalPart] = splitNumberIntegerAndDecimalParts$1(valueAsStringWithoutSign, patternRules);\r\n      const valueIntegerPartWithLeadingZeros = addOrRemoveLeadingZerosToValue$1(integerPart, patternRules);\r\n      const valueIntegerPartWithThousandsSeparator = addThousandsSeparatorToValueIntegerPart$1(valueIntegerPartWithLeadingZeros, patternRules, options);\r\n      const numeralSystemFromLocale = options.locale.numeralSystem;\r\n      const integerPartWithNumeralSystem = replaceDigitsWithNumeralSystem$1(valueIntegerPartWithThousandsSeparator, numeralSystemFromLocale);\r\n      const decimalPartWithNumeralSystem = replaceDigitsWithNumeralSystem$1(decimalPart, numeralSystemFromLocale);\r\n      const fullNumberWithNumeralSystem = (integerPartWithNumeralSystem\r\n          + (!!decimalPartWithNumeralSystem ? (((_a = options.locale.delimiters) === null || _a === void 0 ? void 0 : _a.decimal) || '.') + decimalPartWithNumeralSystem : ''));\r\n      // Assembling\r\n      const patternMaskWithAbbreviation = applyAbbreviationLocalizedUnitToPatternMask$1(patternRules.patternMask, localizedAbbreviationUnit, patternRules.compact);\r\n      const patternMaskWithNumber = patternMaskWithAbbreviation.replace(`'n'`, _ => `'${fullNumberWithNumeralSystem.replace(/'/g, \"\\\\'\")}'`);\r\n      const patternMaskWithSignInfo = addSignInfoToFullFormattedNumber$1(patternMaskWithNumber, isValueNegative, isValueZero, patternRules);\r\n      const cleanPatternMask = patternMaskWithSignInfo.replace(/'(nps|npe|s|a|n)'/g, '');\r\n      const fullFormattedValueWithNormalizedText = patternStripAndNormalizeEscapedText(cleanPatternMask);\r\n      return fullFormattedValueWithNormalizedText;\r\n  };\r\n\r\n  var numberToFormattedNumber$1 = numberToFormattedNumber;\n\n  /**\r\n   * Basis point format (BPS)\r\n   * <i> See https://en.wikipedia.org/wiki/Basis_point\r\n   */\r\n  const bpsFormatter = {\r\n      name: 'bps',\r\n      regexps: {\r\n          format: /BPS/,\r\n          unformat: /BPS/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scaledValue = multiplyByPowerOfTen$1(number, 4);\r\n          const patternWithEscapedBPS = patternReplace(pattern, /BPS/, `'BPS'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedBPS, options);\r\n          return formatResult.replace('BPS', 'BPS');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber$1(string.replace(/\\s?BPS/, ''), options);\r\n          return isFiniteNumber$1(number) ? multiplyByPowerOfTen$1(number, -4) : number;\r\n      },\r\n  };\r\n\r\n  var bpsFormatter$1 = bpsFormatter;\n\n  const timeFormatter = {\r\n      name: 'time',\r\n      regexps: {\r\n          format: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n          unformat: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n      },\r\n      format: (number) => {\r\n          const absoluteValue = Math.abs(number);\r\n          const sign = number < 0 ? '-' : '';\r\n          const hours = truncateNumber$1(absoluteValue / 3600);\r\n          const minutes = truncateNumber$1((absoluteValue - (hours * 3600)) / 60);\r\n          const seconds = truncateNumber$1(absoluteValue - (hours * 3600) - (minutes * 60));\r\n          return `${sign}${hours}:${(minutes < 10 ? '0' : '') + minutes}:${(seconds < 10 ? '0' : '') + seconds}`;\r\n      },\r\n      unformat: (string) => {\r\n          const isNegative = /^ *-/.test(string);\r\n          const stringWithoutSign = string.replace(/^ *-/, '');\r\n          const timeArray = stringWithoutSign.split(':').reverse();\r\n          let seconds = 0;\r\n          seconds += +timeArray[0];\r\n          seconds += +timeArray[1] * 60;\r\n          seconds += (+timeArray[2] || 0) * 3600;\r\n          return isNegative && seconds !== 0 ? -seconds : seconds;\r\n      },\r\n  };\r\n\r\n  var timeFormatter$1 = timeFormatter;\n\n  const decimalSuffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n  const binarySuffixes = ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n  const allSuffixes = decimalSuffixes.concat(binarySuffixes.slice(1));\r\n  /** Avoid collision with BPS format @see formats|bps.ts */\r\n  const unformatRegex = `(${allSuffixes.join('|').replace(/B/g, 'B(?!PS)')})`;\r\n  const bytesDecimalScale = unitScale({ base: 'B', scale: toObject$1(decimalSuffixes, (unit, unitIndex) => [unit, Math.pow(1000, unitIndex)]) });\r\n  const bytesBinaryScale = unitScale({ base: 'B', scale: toObject$1(binarySuffixes, (unit, unitIndex) => [unit, Math.pow(1024, unitIndex)]) });\r\n  const bytesFormatter = {\r\n      name: 'bytes',\r\n      regexps: {\r\n          format: /([0\\s]b[bd])|(b[bd][0\\s])/,\r\n          unformat: (string, options) => options.type === 'bytes' ? new RegExp(unformatRegex).test(string) : false,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scale = patternIncludes(pattern, 'bb') ? bytesBinaryScale : bytesDecimalScale;\r\n          const [scaledValue, scaledValueUnit] = scale.toBest(number, 'B');\r\n          const patternWithEscapedBytes = patternReplace(pattern, /b[bd]/, `'bytes'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedBytes, options);\r\n          return formatResult.replace('bytes', scaledValueUnit || '');\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const number = formattedStringToNumber$1(string.replace(new RegExp(unformatRegex), ''), options);\r\n          const suffix = ((_a = string.match(unformatRegex)) === null || _a === void 0 ? void 0 : _a[0]) || '';\r\n          const scale = !!bytesBinaryScale.scaleDefinition.scale[suffix] ? bytesBinaryScale : bytesDecimalScale;\r\n          return number ? scale.toBase(number, suffix) : number;\r\n      }\r\n  };\r\n\r\n  var bytesFormatter$1 = bytesFormatter;\n\n  const ordinalFormatter = {\r\n      name: 'ordinal',\r\n      regexps: {\r\n          format: /o/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a, _b;\r\n          const localizedOrdinal = ((_b = (_a = options.locale).ordinal) === null || _b === void 0 ? void 0 : _b.call(_a, number)) || '';\r\n          const patternWithEscapedOrdinal = patternReplace(pattern, /o/, `'ord'`);\r\n          const formatResult = numberToFormattedNumber$1(number, patternWithEscapedOrdinal, options);\r\n          return formatResult.replace('ord', _ => localizedOrdinal);\r\n      }\r\n  };\r\n\r\n  var ordinalFormatter$1 = ordinalFormatter;\n\n  const currencySymbolsMap = {\r\n      EUR: '',\r\n      USD: '$',\r\n      XCD: 'EC$',\r\n      AUD: 'A$',\r\n      INR: '',\r\n      BRL: 'R$',\r\n      CAD: 'CA$',\r\n      XAF: 'FCFA',\r\n      CNY: 'CN',\r\n      NZD: 'NZ$',\r\n      XPF: 'CFPF',\r\n      GBP: '',\r\n      HKD: 'HK$',\r\n      ILS: '',\r\n      JPY: '',\r\n      KRW: '',\r\n      XOF: 'CFA',\r\n      MXN: 'MX$',\r\n      TWD: 'NT$',\r\n      VND: '',\r\n  };\r\n  const currencyFormatter = {\r\n      name: 'currency',\r\n      regexps: {\r\n          format: /(\\$)/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a;\r\n          const currencyFromOptions = (_a = options.currency) === null || _a === void 0 ? void 0 : _a.toUpperCase();\r\n          const localizedCurrencySymbol = currencySymbolsMap[currencyFromOptions] || currencyFromOptions || '';\r\n          const patternWithEscapedCurrencySymbol = patternReplace(pattern, /\\$/, `'currency'`);\r\n          const formatResult = numberToFormattedNumber$1(number, patternWithEscapedCurrencySymbol, options);\r\n          return formatResult.replace('currency', _ => localizedCurrencySymbol);\r\n      },\r\n  };\r\n\r\n  var currencyFormatter$1 = currencyFormatter;\n\n  const percentageFormatter = {\r\n      name: 'percentage',\r\n      regexps: {\r\n          format: /%!?/,\r\n          unformat: /%/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const hasNotScalePercentageSymbolInPattern = patternIncludes(pattern, '%!');\r\n          const scaledValue = options.scalePercentage && !hasNotScalePercentageSymbolInPattern ? multiplyByPowerOfTen$1(number, 2) : number;\r\n          const patternWithEscapedPercentage = patternReplace(pattern, /%!?/, `'%'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedPercentage, options);\r\n          return formatResult.replace('%', '%');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber$1(string.replace(/\\s?%/, ''), options);\r\n          return number && options.scalePercentage ? multiplyByPowerOfTen$1(number, -2) : number;\r\n      },\r\n  };\r\n\r\n  var percentageFormatter$1 = percentageFormatter;\n\n  const exponentialFormatter = {\r\n      name: 'exponential',\r\n      regexps: {\r\n          format: /[eE][+-][0-9]+/,\r\n          unformat: /[eE][+-][0-9]+/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const exponential = typeof number === 'number' && !isNaNNumber$1(number) ? number.toExponential() : '0e+0';\r\n          const parts = splitStringInTwoParts$1(exponential, 'e');\r\n          const patternWithoutExponential = patternReplace(pattern, /e[+|-]{1}0/i, '');\r\n          const formatResult = numberToFormattedNumber$1(+parts[0], patternWithoutExponential, options);\r\n          return formatResult + 'e' + parts[1];\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const value = formattedStringToNumber$1(string.replace(/e[+-]{1}[0-9]{1,3}/i, ''), options);\r\n          const powerOfTenExponent = +(((_a = string.match(/e([+-]{1}[0-9]{1,3})/i)) === null || _a === void 0 ? void 0 : _a[1]) || '0');\r\n          return isFiniteNumber$1(value) ? multiplyByPowerOfTen$1(value, powerOfTenExponent) : value;\r\n      },\r\n  };\r\n\r\n  var exponentialFormatter$1 = exponentialFormatter;\n\n  const BUILT_IN_FORMATTERS = [\r\n      percentageFormatter$1,\r\n      currencyFormatter$1,\r\n      ordinalFormatter$1,\r\n      timeFormatter$1,\r\n      bytesFormatter$1,\r\n      exponentialFormatter$1,\r\n      bpsFormatter$1,\r\n  ];\r\n\r\n  var BUILT_IN_FORMATTERS$1 = BUILT_IN_FORMATTERS;\n\n  const roundHalfAwayFromZero = (value) => {\r\n      return value >= 0\r\n          ? Math.round(value)\r\n          : (value % 0.5 === 0) ? Math.floor(value) : Math.round(value);\r\n  };\r\n\r\n  var roundHalfAwayFromZero$1 = roundHalfAwayFromZero;\n\n  const areDelimitersValid = (delimiters) => {\r\n      return !!(delimiters === null || delimiters === void 0 ? void 0 : delimiters.decimal)\r\n          && isString$1(delimiters === null || delimiters === void 0 ? void 0 : delimiters.thousands)\r\n          && delimiters.decimal !== delimiters.thousands;\r\n  };\r\n  const resolveOptionsLocale = (optionsLocale) => {\r\n      const defaultLocale = locale$1;\r\n      if (!isObject$1(optionsLocale))\r\n          return defaultLocale;\r\n      return merge(optionsLocale, {\r\n          delimiters: areDelimitersValid(optionsLocale.delimiters) ? optionsLocale.delimiters : defaultLocale.delimiters,\r\n          abbreviations: optionsLocale.abbreviations || defaultLocale.abbreviations,\r\n          ordinal: optionsLocale.ordinal || defaultLocale.ordinal,\r\n      });\r\n  };\r\n  const resolveRoundingOption = (roundingOption) => {\r\n      switch (roundingOption) {\r\n          case 'ceil': return Math.ceil;\r\n          case 'floor': return Math.floor;\r\n          case 'truncate': return truncateNumber$1;\r\n          case 'half-up': return Math.round;\r\n          case 'half-away-from-zero': return roundHalfAwayFromZero$1;\r\n          default: return isFunction$1(roundingOption) ? roundingOption : roundHalfAwayFromZero$1;\r\n      }\r\n  };\r\n  const resolveOptionsFormatters = (optionsFormatters) => {\r\n      if (!optionsFormatters)\r\n          return BUILT_IN_FORMATTERS$1;\r\n      return isFunction$1(optionsFormatters)\r\n          ? optionsFormatters(BUILT_IN_FORMATTERS$1)\r\n          : [...optionsFormatters, ...BUILT_IN_FORMATTERS$1];\r\n  };\r\n  const resolveFormatOptions = (formatOptions) => {\r\n      var _a, _b, _c;\r\n      const options = formatOptions || {};\r\n      const resolvedRoundingFunction = resolveRoundingOption(options.rounding);\r\n      const resolvedLocale = resolveOptionsLocale(options.locale);\r\n      const resolvedFormatters = resolveOptionsFormatters(options.formatters);\r\n      return {\r\n          defaultPattern: options.defaultPattern || '0,0.##########',\r\n          nullFormat: options.nullFormat || '',\r\n          nanFormat: options.nanFormat,\r\n          zeroFormat: options.zeroFormat,\r\n          locale: resolvedLocale,\r\n          rounding: resolvedRoundingFunction,\r\n          type: options.type,\r\n          scalePercentage: (_a = options.scalePercentage) !== null && _a !== void 0 ? _a : true,\r\n          trim: (_b = options.trim) !== null && _b !== void 0 ? _b : true,\r\n          formatters: resolvedFormatters,\r\n          currency: options.currency,\r\n          signedZero: !!options.signedZero,\r\n          nonBreakingSpace: (_c = options.nonBreakingSpace) !== null && _c !== void 0 ? _c : false,\r\n      };\r\n  };\r\n\r\n  var resolveFormatOptions$1 = resolveFormatOptions;\n\n  const getUnformatFunctionIfMatch = (input, resolvedOptions) => {\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.unformat;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction$1(matcher) ? matcher(input, resolvedOptions) : !!input.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.unformat;\r\n      }\r\n  };\r\n  const parse$2 = (input, options) => {\r\n      const resolvedOptions = resolveFormatOptions$1(options);\r\n      let value;\r\n      if (isNil$1(input) || isNaNNumber$1(input)) {\r\n          value = null;\r\n      }\r\n      else if (typeof input === 'number') {\r\n          // Handles negative zero\r\n          value = input === 0 ? 0 : input;\r\n      }\r\n      else if (typeof input === 'string') {\r\n          if (resolvedOptions.zeroFormat && input === resolvedOptions.zeroFormat) {\r\n              value = 0;\r\n          }\r\n          else if (resolvedOptions.nullFormat && input === resolvedOptions.nullFormat) {\r\n              value = null;\r\n          }\r\n          else {\r\n              // Removes non-breaking spaces if they exists\r\n              const inputStringWithNormalSpaces = input.replace(/\\u00A0/, ' ');\r\n              const unformatFunctionFromFormatters = getUnformatFunctionIfMatch(inputStringWithNormalSpaces, resolvedOptions);\r\n              const unformatFunction = unformatFunctionFromFormatters || formattedStringToNumber$1;\r\n              value = unformatFunction(inputStringWithNormalSpaces, resolvedOptions);\r\n          }\r\n      }\r\n      else {\r\n          const result = +input;\r\n          value = result === 0 ? result : (result || null);\r\n      }\r\n      return value;\r\n  };\r\n\r\n  var parse$1$1 = parse$2;\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * parse('1,250.48')\r\n   * //=> 1250.48\r\n   * parse('10 %')\r\n   * //=> 0.1\r\n   * parse('1 000,582', { locale: fr })\r\n   * //=> 1000.582\r\n   * ```\r\n   * Parse the given numeric-string applying the provided options.\r\n   *\r\n   * options:\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   *\r\n   * @param string string: The numeric-string to parse (e.g. **'10 %'**)\r\n   * @param options options: The options used to parse the numeric-string\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   */\r\n  const parse = (string, options) => {\r\n      return parse$1$1(string, options);\r\n  };\r\n\r\n  var parse$1 = parse;\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * round(12.687, 2)\r\n   * //=> 12.69\r\n   * round(12.687)\r\n   * //=> 13\r\n   * round(12.687, 2, Math.floor)\r\n   * //=> 12.68\r\n   * ```\r\n   * Rounds the given number to the specified amount of decimal places.\r\n   *\r\n   * - The **default precision** is 0.\r\n   * - The **default roundingFunction** is Math.round.\r\n   *\r\n   * @param number number: The number to round (e.g. **10.23**)\r\n   * @param precision precision: The desired amount of decimal places (e.g. **2**)\r\n   * @param roundingFunction roundingFunction: The function applied for rounding (e.g. **Math.floor**)\r\n   * */\r\n  const round = (number, precision, roundingFunction) => {\r\n      return roundNumber$1(number, precision, roundingFunction);\r\n  };\r\n\r\n  var round$1 = round;\n\n  const getFormatFunctionIfMatch = (pattern, resolvedOptions) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.format;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction$1(matcher) ? matcher(pattern, resolvedOptions) : !!patternWithoutEscapedText.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.format;\r\n      }\r\n  };\r\n  const format$1 = (value, pattern, options) => {\r\n      var _a;\r\n      try {\r\n          const resolvedValue = isString$1(value) ? parseFloat(value) : value;\r\n          const resolvedOptions = resolveFormatOptions$1(options);\r\n          const resolvedPattern = pattern || resolvedOptions.defaultPattern;\r\n          let output;\r\n          if (resolvedValue === Infinity || resolvedValue === -Infinity) {\r\n              output = resolvedValue > 0 ? '' : '-';\r\n          }\r\n          else if (isNaNNumber$1(resolvedValue)) {\r\n              return isString$1(resolvedOptions.nanFormat)\r\n                  ? resolvedOptions.nanFormat\r\n                  : (isString$1(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '');\r\n          }\r\n          else if (isNil$1(resolvedValue)) {\r\n              output = isString$1(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '';\r\n          }\r\n          else if (resolvedValue === 0 && isString$1(resolvedOptions.zeroFormat)) {\r\n              output = resolvedOptions.zeroFormat;\r\n          }\r\n          else {\r\n              // <!> Here value should always be a number\r\n              const resolvedValueAsNumber = resolvedValue || 0;\r\n              const formatFunctionFromFormatters = getFormatFunctionIfMatch(resolvedPattern, resolvedOptions);\r\n              const resolvedFormatFunction = formatFunctionFromFormatters || numberToFormattedNumber$1;\r\n              output = resolvedFormatFunction(resolvedValueAsNumber, resolvedPattern, resolvedOptions);\r\n          }\r\n          // Ensures that it always returns an string\r\n          output = isString$1(output) ? output : '';\r\n          // Replaces spaces with non-breaking spaces if needed\r\n          output = resolvedOptions.nonBreakingSpace\r\n              ? output.replace(/ /g, _ => '\\u00A0')\r\n              : output;\r\n          // Trims the output if needed\r\n          output = resolvedOptions.trim ? output.trim() : output;\r\n          return output;\r\n      }\r\n      catch (_error) {\r\n          return ((_a = options) === null || _a === void 0 ? void 0 : _a._errorFormat) || '';\r\n      }\r\n  };\r\n\r\n  var format$1$1 = format$1;\n\n  function format(number, arg2, arg3) {\r\n      const pattern = isString$1(arg2) ? arg2 : null;\r\n      const options = isObject$1(arg2) ? arg2 : (isObject$1(arg3) ? arg3 : {});\r\n      return format$1$1(number, pattern, options);\r\n  }\r\n  const createFormatFunction = (options) => {\r\n      const baseOptions = merge(options, {\r\n          locale: isFunction$1(options.locale) ? options.locale() : options.locale,\r\n      });\r\n      return ((value, arg2, arg3) => {\r\n          const pattern = isString$1(arg2) ? arg2 : null;\r\n          const optionsFromArguments = isObject$1(arg2) ? arg2 : (isObject$1(arg3) ? arg3 : {});\r\n          return format$1$1(value, pattern, merge(baseOptions, optionsFromArguments));\r\n      });\r\n  };\r\n  format.withOptions = createFormatFunction;\n\n  const unique = (arr) => {\r\n      if (!arr)\r\n          return [];\r\n      return arr.filter((value, index, self) => self.indexOf(value) === index);\r\n  };\r\n\r\n  var unique$1 = unique;\n\n  // <i> Extracted from https://stackoverflow.com/questions/12006095/javascript-how-to-check-if-character-is-rtl\r\n  const leftToRightMark = '\\u200e';\r\n  const rtlCharsRanges = '\\u0591-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\r\n  const rtlDirCheck = new RegExp('^[^' + rtlCharsRanges + ']*?[' + rtlCharsRanges + ']');\r\n  const isRTL = (string) => rtlDirCheck.test(string);\r\n  const appendLeftToRightMarkIfIsRTL = (string) => isRTL(string) ? string + leftToRightMark : string;\r\n  // const languagesWith4DigitsGroupingStyle = ['zh', 'yue', 'ko', 'ja'];\r\n  const languagesWith4DigitsGroupingStyle = []; //***\r\n  const toLocaleStringSupportsOptions = () => {\r\n      return typeof Intl === 'object' && !!Intl && typeof Intl.NumberFormat === 'function';\r\n  };\r\n  const getNumeralSystemDigits = (languageTag) => {\r\n      try {\r\n          const localizedNumber = (1234567890).toLocaleString(languageTag, { useGrouping: false });\r\n          const lookupObject = {};\r\n          const repeatedChar = localizedNumber.split('').find((char) => {\r\n              if (lookupObject[char])\r\n                  return true;\r\n              lookupObject[char] = true;\r\n          });\r\n          const digitsWithoutGroupingDelimiters = repeatedChar\r\n              ? localizedNumber.replace(new RegExp(escapeRegexString$1(repeatedChar || ''), 'g'), '')\r\n              : localizedNumber;\r\n          const digitsAsArray = digitsWithoutGroupingDelimiters.split('');\r\n          const sortedDigits = [digitsAsArray[digitsAsArray.length - 1], ...digitsAsArray.slice(0, -1)];\r\n          return sortedDigits.join('');\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingAndFractionDelimiters = (languageTag, digits) => {\r\n      try {\r\n          const localizedNumber = (12345678.123).toLocaleString(languageTag);\r\n          const localizedNumberWithoutDigits = localizedNumber.replace(new RegExp(`[${escapeRegexString$1(digits)}]`, 'g'), '');\r\n          const [groupingDelimiter = ',', fractionDelimiter = '.'] = unique$1(localizedNumberWithoutDigits.split(''));\r\n          return [groupingDelimiter, fractionDelimiter];\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingStyle = (languageTag, groupingDelimiter) => {\r\n      // <i> Handle '4 digits' grouping style for some asian countries (not CLDR)\r\n      if (languagesWith4DigitsGroupingStyle.some(language => languageTag.indexOf(language) === 0))\r\n          return [4];\r\n      try {\r\n          const result = [];\r\n          let subIterationIndex = 0;\r\n          (100000000000).toLocaleString(languageTag).split('').reverse().forEach((digitOrGroupingDelimiter) => {\r\n              if (digitOrGroupingDelimiter === groupingDelimiter) {\r\n                  result.push(subIterationIndex);\r\n                  subIterationIndex = 0;\r\n              }\r\n              else {\r\n                  subIterationIndex += 1;\r\n              }\r\n          });\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === result[resultIndex - 1])\r\n                  result.pop();\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getAbbreviations = (languageTag, digits, type) => {\r\n      try {\r\n          if (!toLocaleStringSupportsOptions())\r\n              return null;\r\n          const intlFormatOptions = { notation: 'compact', useGrouping: false, compactDisplay: type };\r\n          const [digitOfZero, digitOfOne, digitOfTwo] = digits.split('');\r\n          let abbreviations = '';\r\n          for (let i = 1; i < 50; i++) {\r\n              const abbreviationResultForOne = (+(1 + stringRepeat$1('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n              if (new RegExp(`^${digitOfOne}[^${digitOfZero}]+$`).test(abbreviationResultForOne)) {\r\n                  if (type === 'long') {\r\n                      const abbreviationResultForTwo = (+(2 + stringRepeat$1('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n                      const abbreviationOne = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      const abbreviationTwo = abbreviationResultForTwo.replace(new RegExp(`${digitOfTwo}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviationOne) + ':::' + appendLeftToRightMarkIfIsRTL(abbreviationTwo);\r\n                  }\r\n                  else {\r\n                      const abbreviation = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviation);\r\n                  }\r\n              }\r\n              else {\r\n                  abbreviations += '|';\r\n              }\r\n          }\r\n          // Remove trailing pipes '|'\r\n          let result = abbreviations;\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === '|')\r\n                  result = result.slice(0, -1);\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const baseGetLocaleFromPlatform = (languageTag) => {\r\n      const resolvedLanguageTag = languageTag || 'en';\r\n      const digits = getNumeralSystemDigits(resolvedLanguageTag);\r\n      const resolvedDigits = digits || '0123456789';\r\n      const delimiters = getGroupingAndFractionDelimiters(resolvedLanguageTag, resolvedDigits);\r\n      const [groupingDelimiter, fractionDelimiter] = !!delimiters && delimiters.length >= 2 ? delimiters : [',', '.'];\r\n      const groupingStyle = getGroupingStyle(resolvedLanguageTag, groupingDelimiter);\r\n      const shortAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'short');\r\n      const longAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'long');\r\n      return {\r\n          _abbreviationsLong: longAbbreviations || locale$1.abbreviations,\r\n          code: resolvedLanguageTag,\r\n          delimiters: { thousands: groupingDelimiter, decimal: fractionDelimiter },\r\n          abbreviations: shortAbbreviations || locale$1.abbreviations,\r\n          digitGroupingStyle: !!(groupingStyle === null || groupingStyle === void 0 ? void 0 : groupingStyle.length) ? groupingStyle : undefined,\r\n          numeralSystem: digits !== '0123456789' ? digits === null || digits === void 0 ? void 0 : digits.split('').map(appendLeftToRightMarkIfIsRTL) : undefined,\r\n          ordinal: locale$1.ordinal,\r\n      };\r\n  };\r\n  const getLocaleFromPlatform$2 = memoize$1(baseGetLocaleFromPlatform);\r\n\r\n  var getLocaleFromPlatform$1$1 = getLocaleFromPlatform$2;\n\n  /**\r\n   * Given a language tag (e.g. '**zh**' | '**es**' | '**fr**' | '**en-IN**' | '**zh-Hans**'), returns a NumerableLocale\r\n   * object extracted from the platform Intl.NumberFormat behavior.\r\n   *\r\n   * This locale object can be used in the numerable functions that support i18n (*format* and *parse*).\r\n   * Example:\r\n   * ```javascript\r\n   * format(12345, '0,0.00', { locale: getLocaleFromPlatform('fr') })\r\n   * ```\r\n   *\r\n   * <i> Take into account that the returned locale is not complete, and some features like\r\n   *     'ordinal formatting' won't work. Use this feature only for simple applications that don't require\r\n   *     full support from numeral, and don't target legacy browsers.\r\n   */\r\n  const getLocaleFromPlatform = (languageTag) => {\r\n      return getLocaleFromPlatform$1$1(languageTag);\r\n  };\r\n\r\n  var getLocaleFromPlatform$1 = getLocaleFromPlatform;\n\n  var numerable = {\n    __proto__: null,\n    parse: parse$1,\n    round: round$1,\n    format,\n    getLocaleFromPlatform: getLocaleFromPlatform$1\n  };\n\n  // Extend\r\n  Object.assign(ew__default.default, numerable);\n\n})(ew, jQuery, luxon);\n"],"mappings":"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"}
